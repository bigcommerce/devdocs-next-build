{"version":3,"sources":["webpack:////home/circleci/project/platform/src/utils/highlight/index.js","webpack:////home/circleci/project/platform/src/components/HtmlViewer/index.js","webpack:////home/circleci/project/core/src/lang-html/config.ts","webpack:////home/circleci/project/platform/src/components/CodeMirror/index.js","webpack:////home/circleci/project/core/src/lang-html/index.ts","webpack:////home/circleci/project/core/src/lang-html/reader.ts","webpack:////home/circleci/project/core/src/unified/index.ts","webpack:////home/circleci/project/core/src/unified/unified.ts","webpack:////home/circleci/project/core/src/lang-html/sanitizeScript.ts","webpack:////home/circleci/project/platform/src/components/CodeMirror/codeMirror.js","webpack:////home/circleci/project/platform/src/components/CodeMirror/jsonlint.js","webpack:////home/circleci/project/platform/src/components/CodeMirror/custom-hint.js","webpack:////home/circleci/project/platform/src/components/SimpleMdEditor/editor.js","webpack:////home/circleci/project/platform/src/utils/workers/index.js","webpack:////home/circleci/project/platform/src/utils/json/lineNumbers.worker.js","webpack:////home/circleci/project/platform/src/components/JsonPathCacheContainer/index.js","webpack:////home/circleci/project/platform/src/components/PageLoading/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockAction/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockBarList/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCallout/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCardList/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCardList/viewer.js","webpack:////home/circleci/project/platform/src/components/Highlight/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockCode/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHero/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHero/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHtml/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockImage/viewer.js","webpack:////home/circleci/project/platform/src/components/JsonSchemaViewer/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockJsonSchema/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockRef/viewer.js","webpack:////home/circleci/project/platform/src/components/JsonPathCacheParentContainer/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockList/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockTabs/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockTabs/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockContainer/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockText/viewer.js","webpack:////home/circleci/project/platform/src/utils/hoc/deepCompare.js","webpack:////home/circleci/project/platform/src/utils/hoc/pureCompare.js","webpack:////home/circleci/project/platform/src/components/FormSelect/index.js","webpack:////home/circleci/project/platform/src/components/DebounceContainer/index.js","webpack:////home/circleci/project/platform/src/components/SimpleMdEditor/index.js","webpack:////home/circleci/project/platform/src/components/MarkdownEditor/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/step_basics.js","webpack:////home/circleci/project/platform/src/components/EditorContentSection/index.js","webpack:////home/circleci/project/platform/src/utils/json/lineNumbers-worker.js","webpack:////home/circleci/project/platform/src/utils/codeMirror/index.js","webpack:////home/circleci/project/platform/src/utils/browser/index.js","webpack:////home/circleci/project/platform/src/components/CodeEditor/editor.js","webpack:////home/circleci/project/platform/src/components/CodeEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormCodeEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormInputMap/index.js","webpack:////home/circleci/project/platform/src/components/FormRadio/index.js","webpack:////home/circleci/project/platform/src/components/FormHttpBodyEditor/index.js","webpack:////home/circleci/project/platform/src/components/FormCheckbox/index.js","webpack:////home/circleci/project/platform/src/components/Modal/index.js","webpack:////home/circleci/project/platform/src/components/OAuth2TokenFormModal/index.js","webpack:////home/circleci/project/platform/src/components/EntityEditorGroup/index.js","webpack:////home/circleci/project/platform/src/components/UsedPathParams/index.js","webpack:////home/circleci/project/platform/src/components/LearnMore/index.js","webpack:////home/circleci/project/platform/src/components/UsedCtxVariables/index.js","webpack:////home/circleci/project/platform/src/components/UsedEnvironmentVariables/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/settings.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/auth/oauth2.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/auth/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/logic-location.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/captures.js","webpack:////home/circleci/project/platform/src/utils/httpsnippet/index.js","webpack:////home/circleci/project/platform/src/components/CodeGenerator/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/code-generation.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/headers.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/query.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/scripts.js","webpack:////home/circleci/project/platform/src/components/ScenarioContractTest/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/tests.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/tabs/index.js","webpack:////home/circleci/project/platform/src/components/ConnectedOperationSearch/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/path.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/method.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/host.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/http.js","webpack:////home/circleci/project/platform/src/components/RefBuilder/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/ref.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/script.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/input/index.js","webpack:////home/circleci/project/platform/src/components/JsonTree/index.js","webpack:////home/circleci/project/platform/src/components/Frame/documentContext.js","webpack:////home/circleci/project/platform/src/components/Frame/index.js","webpack:////home/circleci/project/platform/src/components/HttpBodyViewer/index.js","webpack:////home/circleci/project/platform/src/components/InputResultList/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioStats/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/scenario.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/http.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/script.js","webpack:////home/circleci/project/platform/src/components/Accordion/index.js","webpack:////home/circleci/project/platform/src/components/BarListItem/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/ref.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/output/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioLogs/log.js","webpack:////home/circleci/project/platform/src/components/ScenarioLogs/index.js","webpack:////home/circleci/project/platform/src/components/ScenarioEditor/step.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHttp/common.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockHttp/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/BlockAccordion/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/components/Block/viewer.js","webpack:////home/circleci/project/platform/src/components/ScrollWrapper/index.js","webpack:////home/circleci/project/platform/src/components/SortableTreeList/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/PageSidebar/viewer.js","webpack:////home/circleci/project/platform/src/components/ScrollWrapper/hoc.js","webpack:////home/circleci/project/platform/src/format-hubs/components/PageNotFound/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/Page/viewer.js","webpack:////home/circleci/project/hub-builder/lib/client/containers/Page.js","webpack:////home/circleci/project/platform/src/format-hubs/utils/index.js","webpack:////home/circleci/project/platform/src/components/MarkdownViewer/index.js","webpack:////home/circleci/project/platform/src/utils/markdown/index.js"],"names":["prismjs_components_prism_core__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","prismjs_components_prism_core__WEBPACK_IMPORTED_MODULE_0___default","n","Prism","allowRawHTML","isHubBuilder","htmlReader","HTMLReader","inputFieldTypes","Anchor","_ref","id","query","window","_","get","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","_platform_utils_router_Link__WEBPACK_IMPORTED_MODULE_6__","href","concat","aria-hidden","className","name","_core_ui__WEBPACK_IMPORTED_MODULE_5__","icon","faLink","anchoredComponents","h1","_ref2","children","props","_objectWithoutProperties","h2","_ref3","h3","_ref4","Script","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","React","Component","_this$props","scriptProps","script","document","Object","assign","type","innerHTML","instance","appendChild","_this","style","display","ref","el","HtmlViewer","_ref5","arguments","length","undefined","value","_ref5$context","context","_ref5$options","options","isNil","classNames","cn","dangerouslySetInnerHTML","__html","config","sanitize","react","components","_ref6","computed","svg","_ref7","path","_ref8","_ref9","input","_ref10","checked","includes","defaultValue","defaultChecked","textarea","_ref11","select","_ref12","anchors","_objectSpread","toReact","__importStar","exports","reactConfig","r","__webpack_exports__","_codeMirror__WEBPACK_IMPORTED_MODULE_0__","CodeMirror","__export","format","parse","slug","stringify","Unified","config_1","sanitizeScript_1","parseOptions","fragment","[object Object]","html","create","use","data","processor","sanitizeScript","processSync","contents","trim","unified","transformer","node","tagName","map","child","join","getTextContent","global","codemirror__WEBPACK_IMPORTED_MODULE_0__","codemirror__WEBPACK_IMPORTED_MODULE_0___default","_jsonlint__WEBPACK_IMPORTED_MODULE_1__","jsonlint","parser","trace","yy","symbols_","error","JSONString","STRING","JSONNumber","NUMBER","JSONNullLiteral","NULL","JSONBooleanLiteral","TRUE","FALSE","JSONText","JSONValue","EOF","JSONObject","JSONArray","{","}","JSONMemberList","JSONMember",":",",","[","]","JSONElementList","$accept","$end","terminals_","2","4","6","8","10","11","14","17","18","21","22","23","24","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","$0","$","replace","Number","push","table","3","5","7","9","12","13","15","16","1","19","20","25","defaultActions","parseError","str","hash","Error","self","stack","vstack","lstack","recovering","lexer","setInput","yylloc","yyloc","popStack","lex","token","symbol","preErrorSymbol","state","action","p","len","newState","expected","yyval","errStr","showPosition","text","match","line","loc","toString","Array","first_line","last_line","first_column","last_column","slice","_input","_more","_less","done","matched","conditionStack","ch","unput","more","less","pastInput","past","substr","upcomingInput","next","pre","c","tempMatch","index","lines","rules","_currentRules","i","flex","begin","condition","popState","pop","conditions","topState","pushState","yy_","$avoiding_name_collisions","YY_START","INITIAL","inclusive","Pos","scriptHint","editor","keywords","getToken","cur","getCursor","test","innerMode","getMode","string","end","start","tprop","list","found","globalScope","maybeAdd","displayText","lastIndexOf","arr","item","prototype","indexOf","arrayContains","gatherCompletions","obj","callback","forAllProps","base","additionalContext","useGlobalScope","jQuery","getCompletions","from","to","registerHelper","e","getTokenAt","inited","SimpleMdEditor","togglePreview","setState","previewOn","isUndefined","preview","createEditor","nextProps","simplemde","_this2","setTimeout","_this3","codeMirrorInstance","extraKeys","onChange","hideToolbar","init","marked","Renderer","defaultOptions","element","getElementById","initialValue","status","spellChecker","toolbar","title","SimpleMDE","codemirror","setOption","on","immediate","_this$props2","fill","fill-space","_MarkdownViewer__WEBPACK_IMPORTED_MODULE_6__","_this$props3","hide-toolbar","w-full","w-50","renderEditor","renderPreview","propTypes","PropTypes","placeholder","func","isRequired","bool","array","d","createWorker","webworker_promise__WEBPACK_IMPORTED_MODULE_0__","webworker_promise__WEBPACK_IMPORTED_MODULE_0___default","worker","WebworkerPromise","module","Worker","JsonPathCacheContainer","BaseComponent","cacheKey","cacheKeyProp","pathProp","targetExport","pure","_React$Component","JsonPathCache","apply","_inherits","_createClass","key","_this$props$jsonPathC","jsonPathContainerData","store","register","nextData","_this$props$jsonPathC2","baseProps","updateCache","cache","getCache","react_default","_extends","updated","t","v","forceUpdate","localStorage","debugRender","require","inject","jsonPathCache","ck","updateCacheFactory","basePath","PageLoading","_ref$className","_ref$children","_ref$text","extraProps","PageLoading_objectWithoutProperties","padding","Loader","PageLoading_extends","inline","size","active","inverted","BlockAction","onChangeData","_ref$theme","theme","_action$type","content","_action$route","route","isExternalLink","buildViewPath","actionElem","actionBgStyle","actionTextStyle","router","Button","primary","HubSearch","BarItem","_props$child","_props$theme","childIndex","_child$actions","actions","relativePath","childTextStyle","actionIndex","actionTheme","BlockAction_viewer","BlockBarList","WrapperFactory","_props$data","_props$theme2","contentElem","childBgStyle","viewer_BarItem","viewer_extends","BlockCallout","_data$type","body","MarkdownViewer","target","startsWith","BlockCallout_viewer_extends","headerElem","contentClassName","defaultTheme","styles","color","background","backgroundColor","CardChild","_child$image","image","_child$route","computedTheme","computeTheme","cardBgStyle","cardTextStyle","src","BlockCardList","_props$header","header","_data$children","subtitle","baseBgStyle","baseTextStyle","viewer_CardChild","BlockCardList_viewer_extends","contentProps","Highlight","highlightCode","nodes","querySelectorAll","highlightElement","console","getDataLines","highlightRange","dataLines","isArray","forOwn","lineRange","dataLine","getPrettyJson","pretty","safeStringify","safeParse","highlight","languages","json","mode","lineNumbers","codeClassNames","preClassNames","line-numbers","code","data-line","object","oneOfType","defaultProps","CodeBlock","_props$config","components_Highlight","BlockCode_viewer_extends","BlockHero","_data$actions","BlockHero_viewer_extends","HtmlBlock","plain","isEmpty","err","ErrorMessage","isObject","BlockHtml_viewer_extends","ImageBlock","maxWidth","String","maxHeight","centered","Image","alt","fluid","bordered","BlockImage_viewer_extends","isCombiner","prop","anyOf","oneOf","pickValidations","validations","enum","items","merge","omit","PropValidations","elems","k","hasOwnProperty","JsonSchemaViewer_typeof","renderProp","propType","childPropType","schemas","level","rowElems","parentName","propName","required","toggleExpandRow","expandedRows","defaultExpandedDepth","forApiDocs","hideInheritedFrom","jsonPath","hideRoot","position","rowKey","isBasic","expandable","expanded","has","all","properties","patternProperties","types","isString","requiredElem","typeElems","$ref","__error","reduce","acc","vt","validationCount","keys","pluralize","validationText","showVt","showInheritedFrom","__inheritedFrom","cursor-pointer","is-expanded","is-required","has-validations","onClick","src_ui","faCaretDown","faCaretRight","JSV-namelessType","description","JsonSchemaViewer_PropValidations","_ref2$parsed","parsed","getProps","requiredElems","commonProps","renderProps","JsonSchemaViewer_objectSpread","renderCombiner","defaultType","h","renderRowDivider","elem","set","renderSchema","schema","parseInt","nextLevel","pick","JsonSchemaViewer","showExtra","showCopied","toggleShowExtra","update","copy","JSON","alert","message","dereferencedSchema","_this$props$schemas","limitPropertyCount","_this$props$defaultEx","emptyText","_this$props$emptyClas","emptyClass","emptyElem","isSchemaViewerEmpty","dereferenceSchema","definitions","_this$state","mergeAllOf","resolvers","defaultResolver","values","mergeSchemas","_toConsumableArray","propOverflowCount","dropRight","is-on","disabled","pr-1","faCopy","transparent","number","JsonSchemaBlock","getSchema","_this$props$data","_this$props$dereferen","dereferencedBlock","render","_this$props2$config","components_JsonSchemaViewer","expandedDepth","BlockJsonSchema_viewer_extends","observer","_props$block","block","_props$dereferencedBl","blockId","refBlock","find","connectedBlocks","refBlockDeref","cloneDeep","unionBy","Block_viewer","BlockRef_viewer_extends","log","registerLogger","JsonPathCacheParentContainer","basePathProp","childrenProp","JsonPathCacheParent","JsonPathCacheParentContainer_classCallCheck","JsonPathCacheParentContainer_possibleConstructorReturn","JsonPathCacheParentContainer_getPrototypeOf","JsonPathCacheParentContainer_inherits","JsonPathCacheParentContainer_createClass","registerChildren","isEqual","_props$jsonPathContai","JsonPathCacheParentContainer_objectWithoutProperties","childCacheIds","getChildrenCacheIds","debug","displayName","JsonPathCacheParentContainer_extends","HubBlockList","blockPath","parentPath","renderBlock","_this$props$blocks","blocks","_this$props$blocksDer","blocksDereferenced","_this$props$blockProp","blockProps","slugger","blockLength","isLast","BlockList_viewer_extends","blockDereferenced","blockIndex","isSolo","_this$props2$blocks","_this$props2$childCac","contentElems","forEach","getActiveTab","_props$cache","_props$childCacheIds","_props$blockPath","activeIndex","Math","max","activeTabId","activeTab","BlockTabs_objectSpread","handleChangeTab","TabsBlock","renderTabs","_this$props$cache","tabs","tab","Menu","Item","isNested","_activeTab$blocks","attached","secondary","pointing","BlockList_viewer","BlockTabs_viewer_extends","ContainerBlock","BlockContainer_viewer_extends","TextBlock","toLower","BlockText_viewer_typeof","BlockText_viewer_extends","customizer","objValue","othValue","isFunction","deepCompare","skipFunctions","WrappedComponent","_class2","_getPrototypeOf2","deepCompare_classCallCheck","_len","args","_key","deepCompare_possibleConstructorReturn","deepCompare_getPrototypeOf","componentWillMount","shouldComponentUpdate","same","isEqualWith","deepCompare_inherits","pureCompare","FormSelect","option","_this$props$input","_this$props2$input","big","_this$props2$defaultV","_this$props2$classNam","label","tip","_this$props2$options","multiple","allowAdditions","search","readOnly","warn","labelElem","isFixedWidth","computedOptions","without","NaN","uniq","v2","Label","FormSelect_extends","FormInputLabel","FormDropdown","selection","clearSearchOnSelect","defaultConvertToTarget","defaultConvertFromTarget","DebounceContainer","_props$convertForTarg","convertForTarget","_props$convertFromTar","convertFromTarget","_props$targetPropName","targetPropName","Debouncer","DebounceContainer_classCallCheck","DebounceContainer_possibleConstructorReturn","DebounceContainer_getPrototypeOf","onExternalValueChange","internal","externalValue","_persistChange","nextVal","persistChange","debounce","DebounceContainer_inherits","DebounceContainer_createClass","nextState","flush","computedProps","DebounceContainer_defineProperty","DebounceContainer_extends","default","SimpleMdEditor_extends","minHeight","info","MarkdownEditor","_cn","borderless","_this$props$value","_this$props$preview","editorProps","MarkdownEditor_objectWithoutProperties","MarkdownEditor_defineProperty","MarkdownEditor_extends","newValue","spellCheck","toolbarHidden","toolbarOnFocus","typeOptions","StepTypeSelector","typeWhitelist","step_basics_objectWithoutProperties","_i","o","components_FormSelect","step_basics_extends","step_basics_objectSpread","appStore","injectUi","ui","updateUi","_props$step","step","_props$typeWhitelist","basic","docsOpen","before","after","newAfterScript","method","url","RegExp","createScriptFromHTTP","FormInput","components_MarkdownEditor","markdownVal","workerInstance","EditorContentSection_objectSpread","_props$canToggle","canToggle","can-toggle","is-closed","isClosed","Icon","modeObjs","cpp","csharp","css","go","http","java","js","jsx","markdown","objectivec","perl","php","python","ruby","scala","shell","sql","swift","xml","yaml","currentBrowser","Browser","findDOMNode","ReactDOM","normalizeLineEndings","setterFunc","getterFunc","buildRequest","root","scopes","proxy","headers","buildResponse","buildGlobalScope","envDisplayText","env","request","response","buildDoubleDollar","ctx","buildInput","output","buildOutput","conductor","tests","SL","specs","buildOptions","newOptions","autocompleteScopes","cm","execCommand","Pass","hintOptions","completeSingle","CodeMirrorComponent","isFocused","currentHighlightLineNumbers","getCodeMirrorInstance","unHighlightLineNumbers","lineNumber","codeMirror","eachLine","removeLineClass","highlightLineNumbers","addLineClass","getCodeMirror","focus","focusChanged","focused","onFocusChange","doc","getValue","scrollChanged","onScroll","getScrollInfo","codemirrorValueChanged","change","highlightPath","highlightLines","origin","leading","textareaNode","refs","fromTextArea","bind","setValue","toTextArea","preserveScrollPosition","prevScrollPosition","scrollTo","left","top","editor_typeof","optionName","propPath","opts","LineNumberWorker","postMessage","then","highlightStart","highlightEnd","y","charCoords","prevHighlightStart","prevHighlightEnd","catch","editorClassName","ReactCodeMirror--focused","autoComplete","any","CodeEditor","lastBroadcastedValue","broadcasting","val","parseValue","_this$props$mode","CodeEditor_typeof","_this$props$mode2","keyMap","tabSize","lineWrapping","lint","onFocus","onBlur","autoRefresh","modeObj","fullPlaceholder","CodeEditor_editor","safari","Alt-F","styleSelectedText","matchBrackets","autoCloseBrackets","highlightSelectionMatches","foldGutter","gutters","checkId","noDebounce","shouldUpdate","autogrow","maxLines","_this$props2$styles","classes","noFill","ErrorBoundary","FormCodeEditor","_props$mode","_props$className","FormCodeEditor_objectWithoutProperties","components_CodeEditor","FormCodeEditor_extends","FormInputMap","externalFields","fields","convertExternalValue","isPlainObject","FormInputMap_objectSpread","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","extra","FormInputMap_objectWithoutProperties","chain","split","compact","return","noUnset","handleUpdate","_this$props$className","_this$props$addText","addText","_this$props$namePlace","namePlaceholder","_this$props$valuePlac","valuePlaceholder","_this$props$meta","meta","renderFactory","noAdd","unset","onRemove","pullAt","field","submitting","FormRadio","labelProps","FormRadio_objectWithoutProperties","FormRadio-labeled","Radio","FormRadio_extends","pr-2","FormHttpBodyEditor","raw","_ref$input","handleUpdateContentType","updateStep","contentType","newHeaders","contentTypeIndex","findIndex","toLowerCase","setHeaders","headerMap","FormHttpBodyEditor_objectSpread","Content-Type","bodyEditorContent","components_FormCodeEditor","components_FormInputMap","FormHttpBodyEditor_typeof","button","components_FormRadio","FormCheckbox","_props$labelPosition","labelPosition","labelClassname","labelStyle","checkboxProps","FormCheckbox_objectWithoutProperties","labelComponent","Checkbox","FormCheckbox_extends","SLModal","Modal_classCallCheck","Modal_possibleConstructorReturn","Modal_getPrototypeOf","handleOpen","onOpen","modalOpen","handleClose","onClose","forceOpen","initialOpen","triggerElem","contentFactory","triggerFactory","triggerButton","cancelButton","confirmButton","_this$props$size","_this$props$contentPr","otherProps","Modal_objectWithoutProperties","modalProps","open","Modal_extends","modalActions","Modal","trigger","Header","Content","Description","Actions","OAuth2TokenFormModal","tokenStore","_this$props$oauth","oauth2","_tokenStore$credentia","credentials","authorizationMethod","_tokenStore$authConfi","authConfig","isValid","isCreatingToken","updateCredentials","updateIsCreatingToken","clearError","_credentials$flow","flow","Modal_SLModal","negative","positive","loading","modal","onSuccess","success","Popup","wide","uniqBy","authUrlOptions","u","authorize_url","accessUrlOptions","access_token_url","redirectUri","stores","oauthTokenStore","userService","projectService","userId","projectId","getOrRegisterInstance","EntityEditorGroup_objectSpread","isOpen","_props$contentClassNa","padded","warning","defaultOpen","_props$actions","tipFactory","onToggle","actionElems","EntityEditorGroup_extends","is-active","is-open","hoverable","p-3","collectionEditorStore","editorId","getEditor","_ref$editor","showEmptyMessage","pathParams","currentStepPathParams","hasParams","notSetCount","newVal","newParams","updateCurrentStepPathParams","components_EntityEditorGroup","featuresToArticles","releasing","versioning","embedding","auth0","/documentation/variables-hubs","custom-css","$.ctx","contract-testing","referencing-other-scenarios","fair-use-billing","run-a-simple-mock-server","run-in-terminal","sending-http-requests","LearnMore","feature","faBook","variables","currentPopulatedCtxVariables","components_LearnMore","newVars","updateCurrentCtxVariables","currentEditor","currentPopulatedEnvVariables","obscuredFields","auth","matches","password","hasVariables","variable","updateVariables","Settings","standalone","currentEnv","modeling","components_FormCheckbox","skipPrism","settings_objectSpread","components_UsedPathParams","components_UsedCtxVariables","components_UsedEnvironmentVariables","components_OAuth2TokenFormModal","_props$ui","uiScope","currentVariables","activeToken","_props$input","tokens","tokenList","Table","tableData","headerRow","Row","HeaderCell","renderBodyRow","access_token","Cell","Dropdown","updateInputWithAuth","useHeader","oauth_access_token","preserveShared","preventDefault","scope","react_timeago_lib_default","date","created_at","minPeriod","textAlign","confirm","remove","Electron","OAuth1SignatureSelector","auth_extends","AuthSelector","AuthTab","renderAws","_input$auth","renderBasicAuth","_this$props2$ui","_input$auth2","showPassword","renderOAuth1","_this$props3$input","_input$auth3","auth_OAuth1SignatureSelector","_this$props4","_this$props4$input","_input$auth4","canUpdateAuth","auth_oauth2","auth_AuthSelector","username","consumerKey","consumerSecret","tokenSecret","nonceLength","signatureMethod","encode","LogicLocation","locations","logic_location_objectWithoutProperties","logic_location_extends","l","CapturesTabItem","captures","captureName","Captures","logicLocations","_ref2$fields","source","_splitLogicPath","splitLogicPath","targetLocation","location","targetPath","_splitLogicPath2","sourceLocation","sourcePath","logic_location","combinePathSelectors","codechoice","libraries","librarychoice","CodeGenerator_objectSpread","selected","head","snippet","_props$headers","_props$body","_props$auth","_props$params","params","_props$schemes","schemes","computedHeaders","postData","paramVals","replacedAuth","replaceVariables","basicAuth","btoa","toUpperCase","replacePathParams","HTTPSnippet","convert","buildSnippet","hasError","vars","connectedSpecs","newUrl","buildQueryString","sub","param","spec","scheme","components_CodeGenerator","HeadersTabItem","headerName","Headers","QueryTabItem","Query","ScriptsTabItem","hasScripts","scriptName","scripts_objectSpread","scenarioId","stepIndex","_ui$activeItem","activeItem","beforeScript","afterScript","handleItemClick","beforeName","afterName","showCheatsheet","rel","ScenarioContractTest","_this$props$method","_this$props$codes","codes","endpoint","_this$props$ui","_this$props$updateUi","activeCode","responseElems","connectedSpec","specId","getResponseSchemaFromOperation","toJS","linkToSpec","local","filePath","toUpper","stepId","ScenarioContractTest_objectSpread","AssertionOpSelector","tests_extends","TestsTabItem","testName","testIcons","assertions","contractTest","op","AssertionList","definedResponseCodes","_props$fields","assertionElems","locationDisabled","expectedDisabled","isNumber","newPath","tests_AssertionOpSelector","charAt","getEndpointFromSpecs","responses","as","components_ScenarioContractTest","collectionId","tests_AssertionList","defaultLogicLocations","Items","currentTab","whitelist","_ref2$auth","authorizationName","bodyName","marginTop","tabular","headers_HeadersTabItem","query_QueryTabItem","tests_TestsTabItem","captures_CapturesTabItem","scripts_ScriptsTabItem","_props$connectedSpecs","_props$autocompleteSc","_props$config2","tabs_headers","tabs_query","settings","tabs_auth","components_FormHttpBodyEditor","tabs_captures","scripts","tabs_objectSpread","code_generation","Segment","_props$step2","_props$ui2","_props$connectedSpecs2","_props$autocompleteSc2","_props$config3","_props$whitelist","tabs_Items","tabs_Content","ConnectedOperationSearch","ConnectedOperationSearch_classCallCheck","ConnectedOperationSearch_possibleConstructorReturn","ConnectedOperationSearch_getPrototypeOf","resetComponent","results","handleResultSelect","result","operations","valueProp","operation","handleSearchChange","protectedExpression","re","escapeRegExp","buildResults","isMatch","summary","operationId","specName","uncontrolledValue","contolledValue","inputVal","FormSearch","minCharacters","onSearchChange","onResultSelect","showResultsOnClick","endpoints","components_ConnectedOperationSearch","Method","Host","hosts","host","HttpEditor","tabWhitelist","first","currentTarget","targetUrl","processed","createURL","currentHost","protocol","currentPath","pathname","currentUrl","renderHeaderElems","_this$props$headerEle","headerElems","handleAddQuery","stepQuery","newQueryIndex","http_objectSpread","","handleOperationSelect","_this$props4$updateHo","updateHostOnSearch","_this$props4$step","createStepFromOperation","pathParamsToCtx","resetStepResults","_this$props5","urlQuery","getQueryParams","removeQueryString","_this$props6","hideMethod","_this$currentTarget2","isEmptyHosts","isEditingPath","input_method","cleanSlashes","input_path","last","trimEnd","input_tabs","RefBuilder","localData","fileFilter","routeDataTargets","initialSource","targets","projectStore","force","currentProjectId","currentFilePath","currentProjectPath","initial","builtRef","confirmed","onComplete","isComplete","pristine","renderConfirm","isUrlLoading","isUrlValid","urlError","initializing","selectedSource","popup","buttonProps","is-confirm","is-simple","is-negative","is-positive","tabIndex","buttons","b","RefBuilder_extends","renderReferenceLink","renderCurrentProject","searchParts","renderTargetSearch","flex-col","renderSourceDropdown","renderFileSearch","flex-1","renderExternal","externalUrl","handleChange","fetchExternalUrl","file","fileQuery","fileResults","loadFiles","setQuery","inputProps","category","showNoResults","renderLocal","routerStore","referenceLink","uri","URI","renderSource","component","sourceOptions","isTargetLoading","loadSpecData","targetResults","targetQuery","fileFormat","language","noResultsMessage","dirty","_this$props7","_this$props7$size","errorMessage","InjectedRefBuilder","refBuilderStore","RefBuilderWrapper","RefBuilder_classCallCheck","RefBuilder_possibleConstructorReturn","RefBuilder_getPrototypeOf","shortid","ref_objectSpread","collection","_props$headerElems","substring","stepRef","inputTab","handleInputTabClick","Message","components_RefBuilder","scenario","script_objectSpread","stepScript","Step","editorElem","input_extends","input_objectSpread","input_script","objType","JSONStringNode","keyName","stopPropagation","JSONNumberNode","JSONNullNode","JSONBooleanNode","truthString","grabNode","theNode","nodeType","aKey","Date","now","JsonTree_JSONObjectNode","JsonTree_JSONArrayNode","JsonTree_JSONStringNode","JsonTree_JSONNumberNode","JsonTree_JSONBooleanNode","JsonTree_JSONNullNode","expandedStateHandlerHOC","_class","_temp","JsonTree_classCallCheck","JsonTree_possibleConstructorReturn","JsonTree_getPrototypeOf","initialExpanded","handleClick","JsonTree_inherits","JsonTree_createClass","renderedChildren","itemString","needsChildNodes","JsonTree_extends","buildChildNodes","childNodes","JSONArrayNode","getChildNodes","getItemString","lenWord","childListStyle","cls","JSONObjectNode","JSONTree","rootNode","DocumentContext","Children","only","childContextTypes","Frame","renderFrameContents","Frame_assertThisInitialized","readyState","win","defaultView","parentView","documentContext_DocumentContext","unmountComponentAtNode","targetProps","clone","HttpBodyViewer","_props$contentType","_props$uiCache","uiCache","_props$uiCacheScope","uiCacheScope","updateUiCache","shouldEncode","noTypeSelector","isImage","isHtml","defaultRenderer","specialCase","dropdownElem","renderer","imgStr","fromCharCode","Uint8Array","components_Frame","width","height","frameBorder","sandbox","JsonTree","wordWrap","InputResultList","sort","Input","ScenarioStats","_ref$items","Statistic","Group","widths","scenario_objectSpread","_props$result","_props$stats","stats","_ui$activeResultTab","activeResultTab","responseContentType","components_ScenarioStats","components_HttpBodyViewer","components_InputResultList","bodyChar","bodyClass","time","menuElem","output_http_objectSpread","logs","headerLines","requestString","assertionClass","expectedElem","pass","output_http_typeof","msg","details","passElem","failedElem","requestName","passCount","fitted","failCount","testTitleElem","output_script_objectSpread","script_typeof","AccordionWrapper","Accordion_classCallCheck","Accordion_possibleConstructorReturn","Accordion_getPrototypeOf","buildPanels","panel","exclusive","panels","isActive","isPanelActive","Accordion_defineProperty","togglePanel","_ui$panels","renderPanel","Accordion","Title","defaultActiveIndex","_nextProps$defaultAct","Accordion_objectWithoutProperties","accordionProps","Accordion_extends","arrayOf","Accordion_objectSpread","BarListItem","_ref$parts","parts","withBorder","is-loading","with-border","part","bgColor","d-n","hide","is-padded","with-bg","bg","border","computePanels","mappedScenarioNames","steps","flattenSteps","scenarioSteps","outputSteps","stepResult","_loop","_steps$index","resultData","stepResultMeta","components_BarListItem","tokenElem","stepToken","maxLength","stepName","skipToken","output_http","mappedNames","components_Accordion","output_extends","output_script","output_ref","ScenarioLog","_props$log","messages","m","log_typeof","ScenarioLogs_objectSpread","defaultActive","_ref$logs","menuElems","filtered","fatal","filter","f","activeLogs","logElems","ScenarioLogs_log","InjectedBasics","_editor$currentStep","currentStep","step_basics","step_extends","InjectedInput","_props$editor","_props$inputProps","_editor$currentStep2","ScenarioEditor_input","currentScenarioId","updateCurrentParsed","InjectedDebug","_ref5$editor","currentResult","currentRunning","components_EditorContentSection","components_ScenarioLogs","InjectedOutput","_ref8$editor","_ref8$outputProps","outputProps","indeterminate","ScenarioEditor_output","ScenarioStepEditor","initCollectionEditor","entity","_id","scenarios","dummy","getCollectionEditor","entityString","original","initEditor","entityType","editPath","embedded","stepPathParams","observable","dummy-0","stopStep","runStep","HttpBlock","_this$props$config","codegen","ScenarioEditor_step","BlockHttp_viewer_extends","AccordionBlock","BlockAccordion_viewer_classCallCheck","BlockAccordion_viewer_possibleConstructorReturn","BlockAccordion_viewer_getPrototypeOf","renderHeader","_this$props$header","renderPanels","accordionId","BlockAccordion_viewer_extends","BlockMap","barList","callout","cardList","hero","jsonSchema","container","accordion","HubBlockHeader","titleElem","_ref$header","hasToken","hasTitle","hasSubtitle","stringToColor","HubBlockContent","_props$contentProps","viewer_HubBlockHeader","anchorElem","anchor","Block_viewer_extends","has-anchor","_props$block2","_props$blockDereferen","isPadded","RenderedBlock","elemConfig","buildBlockClassNames","blockConfig","ScrollWraper","ScrollWrapper_classCallCheck","ScrollWrapper_possibleConstructorReturn","ScrollWrapper_getPrototypeOf","handleScroll","evt","scroll","componentDidMount","targetId","onResize","addEventListener","componentWillUnmount","removeEventListener","buildMetaElems","metaElems","buildActionElems","SortableTreeList_defineProperty","_ref$item","ItemFactory","depth","parentActive","isMuted","isDivider","itemIcon","itemHref","text-active","is-muted","is-divider","is-link","targetClass","Folder","folder","_props$path","_props$currentPath","_props$parent","parent","handleToggleFolder","folderOpenIcon","folderClosedIcon","checkIsActive","checkIsChildActive","SortableTreeList_objectWithoutProperties","childActive","openByDefault","toggledPath","noToggle","folderIcon","iconOnLeft","toggleElem","opacity-35","text-right","mr-3","folderInner","select-none","mb-3 lg:mb-2 text-grey-dark uppercase tracking-wide text-sm lg:text-xs","has-content","hasContent","has-children","is-active text-active","depthClass","child-active","no-toggle","SortableTreeList_Items","SortableTreeList_extends","_props$depth","_props$parent2","SortableTreeList_Folder","SortableTreeList_Item","SortableTreeList","toggled","_this$props$currentPa","_this$props2$data","_this$props2$actions","_this$props2$htmlId","htmlId","_this$props2$currentP","viewer","TreeList--viewer","is-inverted","SortableTreeList_objectSpread","HubSidebar","renderOverlay","role","isMobile-open","showSidebar","isMobile-closed","renderWrapper","sidebarTree","_this$props2$folderOp","_this$props2$folderCl","watchScroll","checkSidebarItemIsActive","checkSidebarChildIsActive","whitelabel","namespace","activePagePath","navHeight","pinned","wrapperElem","pageHeader","offsetHeight","rect","getBoundingClientRect","innerHeight","sidebarStyles","viewer_objectSpread","bottom","intersection","classList","components_SortableTreeList","HubBranding","ScrollWrapper","hoc_extends","scrollProps","scrollWrapper","PageNotFound","GithubSlugger","smoothscroll","polyfill","HubPage","scrollToHash","reset","lastLocation","wrapper","behavior","hasSidebar","crumbs","_store$activePage","activePage","_store$activeSubpage","activeSubpage","_store$activeBlocks","activeBlocks","currentParsedPath","currentRelativePath","_store$entityStore","entityStore","isDereferencing","page","components_PageNotFound","buildTextBlockForPage","pagePath","has-sidebar","PageSidebar_viewer","authRequired","isAuthRequired","isLoggedIn","Cookies","pageStore","lookup","activate","deactivate","Dimmer","Page_viewer","InjectedHubPage","withRouteData","routeData","lib","Page_extends","globalConfig","_props$classNames","computedClassNames","isOnCanvas","canvas","isStandalone","isOutlined","outlined","hasHeader","solo","nested","paddedInner","_ref6$basePath","_ref6$pagePath","_ref6$page","childPath","fullPath","trimStart","baseTheme","_ref7$theme","_ref7$defaultTheme","getConfigVar","_ref$innerClassName","innerClassName","_ref$style","_ref$options","_ref$context","_typeof","_HtmlViewer__WEBPACK_IMPORTED_MODULE_4__","BaseMarkdown","markdown_it__WEBPACK_IMPORTED_MODULE_0__","markdown_it__WEBPACK_IMPORTED_MODULE_0___default","markdown_it_video__WEBPACK_IMPORTED_MODULE_1__","markdown_it_video__WEBPACK_IMPORTED_MODULE_1___default","markdown_it_task_checkbox__WEBPACK_IMPORTED_MODULE_2__","markdown_it_task_checkbox__WEBPACK_IMPORTED_MODULE_2___default","_logging__WEBPACK_IMPORTED_MODULE_3__","_highlight__WEBPACK_IMPORTED_MODULE_4__","escapeHref","unsafe","MarkdownIt","linkify","typographer","lang","grammar","markup","MarkdownItVideo","MarkdownItTaskCheckbox","divWrap","divClass","idPrefix","ulClass","liClass","defaultLinkRender","link_open","idx","renderToken","link","titleIndex","attrIndex","attrs","escapeTitle","isAbsolute","hrefIndex","targetIndex","attrPush"],"mappings":"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","file":"templates/client-containers-Page.73b64b67.js","sourcesContent":["import Prism from 'prismjs/components/prism-core';\n\nimport 'prismjs/components/prism-markup';\nimport 'prismjs/components/prism-markup-templating';\nimport 'prismjs/components/prism-css';\nimport 'prismjs/components/prism-clike';\nimport 'prismjs/components/prism-java';\nimport 'prismjs/components/prism-javascript';\nimport 'prismjs/components/prism-jsx';\nimport 'prismjs/components/prism-json';\nimport 'prismjs/components/prism-bash';\nimport 'prismjs/components/prism-c';\nimport 'prismjs/components/prism-csharp';\nimport 'prismjs/components/prism-cpp';\nimport 'prismjs/components/prism-go';\nimport 'prismjs/components/prism-http';\nimport 'prismjs/components/prism-markdown';\nimport 'prismjs/components/prism-objectivec';\nimport 'prismjs/components/prism-php';\nimport 'prismjs/components/prism-python';\nimport 'prismjs/components/prism-ruby';\nimport 'prismjs/components/prism-sql';\nimport 'prismjs/components/prism-swift';\nimport 'prismjs/components/prism-yaml';\n\nimport 'prismjs/plugins/line-highlight/prism-line-highlight.js';\nimport 'prismjs/plugins/line-numbers/prism-line-numbers.js';\n\nexport default Prism;\n","import React, { createElement } from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport { faLink } from '@fortawesome/pro-solid-svg-icons/faLink';\n\nimport { HTMLReader, sanitizeConfig } from '@core/lang-html';\nimport { Icon } from '@core/ui';\n\nimport Link from '@platform/utils/router/Link';\nimport { getConfigVar } from '@platform/utils/config';\nimport { isHubBuilder } from '@platform/format-hubs/utils';\n\n// Only allow raw HTML in published Hubs\nconst allowRawHTML = isHubBuilder();\n\nconst htmlReader = new HTMLReader();\n\nconst inputFieldTypes = [\n  'text',\n  'email',\n  'password',\n  'number',\n  'range',\n  'date',\n  'time',\n  'datetime-local',\n  'month',\n  'color',\n  'search',\n  'tel',\n  'url',\n  'week',\n];\n\nconst Anchor = ({ id }) => {\n  const query = typeof window !== 'undefined' ? _.get(window, 'location.search') : '';\n\n  return (\n    <Link href={`${query}#${id}`} aria-hidden=\"true\" className=\"anchor\" name={id} id={id}>\n      <Icon icon={faLink} />\n    </Link>\n  );\n};\n\nconst anchoredComponents = {\n  h1: ({ id, children, ...props }) => {\n    return (\n      <h1 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h1>\n    );\n  },\n\n  h2: ({ id, children, ...props }) => {\n    return (\n      <h2 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h2>\n    );\n  },\n\n  h3: ({ id, children, ...props }) => {\n    return (\n      <h3 {...props}>\n        <Anchor id={id} />\n        {children}\n      </h3>\n    );\n  },\n};\n\nclass Script extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { children, ...scriptProps } = this.props;\n\n    let script = document.createElement('script');\n    script = Object.assign(script, scriptProps || {});\n    script.type = 'text/javascript';\n\n    if (children) {\n      script.innerHTML = children;\n    }\n\n    this.instance.appendChild(script);\n  }\n\n  render() {\n    return <div style={{ display: 'none' }} ref={el => (this.instance = el)} />;\n  }\n}\n\nconst HtmlViewer = ({ value, className, context = {}, options = {} } = {}) => {\n  if (_.isNil(value)) return null;\n\n  const classNames = cn('HtmlViewer', className);\n\n  if (typeof window === 'undefined') {\n    return <div className={classNames} dangerouslySetInnerHTML={{ __html: value }} />;\n  }\n\n  const config = {\n    sanitize: !allowRawHTML,\n    react: {\n      createElement,\n      components: {\n        a: ({ children, ...props }) => {\n          const computed = Object.assign({}, props, context.a ? context.a(props) : {});\n\n          return <Link {...computed}>{children}</Link>;\n        },\n        // We need this since rehype-parse doesn't support \"viewBox\"\n        svg: ({ children, ...props }) => {\n          return <svg {...props}>{children}</svg>;\n        },\n        // We need this since rehype-parse doesn't support \"fill-rule\"\n        path: ({ children, ...props }) => {\n          return <path {...props}>{children}</path>;\n        },\n\n        script: ({ children, ...props }) => {\n          return <Script {...props}>{children}</Script>;\n        },\n        // Changing value attribute to defaultValue for input fields to make element controlled\n        input: ({ children, ...props }) => {\n          const { type, value, checked } = props;\n          if (inputFieldTypes.includes(type)) {\n            props.defaultValue = value;\n            delete props.value;\n          }\n          if (['checkbox', 'radio'].includes(type)) {\n            props.defaultChecked = checked;\n            delete props.value;\n          }\n          return <input {...props} />;\n        },\n        textarea: ({ children, ...props }) => {\n          const { value } = props;\n          props.defaultValue = value;\n          delete props.value;\n          return <textarea {...props} />;\n        },\n        select: ({ children, ...props }) => {\n          const { value } = props;\n          props.defaultValue = value;\n          delete props.value;\n          return <select {...props}>{children}</select>;\n        },\n      },\n    },\n  };\n\n  if (options.anchors) {\n    config.react.components = {\n      ...config.react.components,\n      ...anchoredComponents,\n    };\n  }\n\n  return htmlReader.toReact(`<div class=\"${classNames}\">${value}</div>`, config);\n};\n\nexport default HtmlViewer;\n","import * as React from 'react';\n\nexport const reactConfig = {\n  createElement: React.createElement,\n};\n","// import React from 'react';\n// import { asyncComponent } from 'react-async-component';\n\n// import PageLoading from '../PageLoading';\n\nimport CodeMirror from './codeMirror';\n\n// const CodeMirror = asyncComponent({\n//   serverMode: 'defer',\n//   resolve: () => System.import('./codeMirror'),\n//   LoadingComponent: () => <PageLoading inverted={false} />, // Optional\n//   ErrorComponent: ({ error }) => <div>{error.message}</div>, // Optional\n// });\n\n// const CodeMirror = dynamic({\n//   ssr: false,\n\n//   loading: () => <PageLoading inverted={false} />,\n\n//   modules: props => {\n//     const components = {\n//       codeMirrorInstance: import('./codeMirror'),\n//     };\n\n//     return components;\n//   },\n\n//   render: (props, { codeMirrorInstance }) => {\n//     const { render } = props;\n//     return render(codeMirrorInstance);\n//   },\n// });\n\nexport default CodeMirror;\n","export * from './reader';\nexport * from './config';\n","const format = require('rehype-format');\nconst parse = require('rehype-parse');\nconst slug = require('rehype-slug');\nconst stringify = require('rehype-stringify');\nconst react = require('rehype-react');\n\nimport { ILangReader } from '@core/lang';\n\nimport * as Unified from '@core/unified';\nimport * as Unist from '@core/unist';\n\nimport { reactConfig } from './config';\nimport { sanitizeScript } from './sanitizeScript';\n\nconst parseOptions = { fragment: true };\n\ninterface IReactConfig {\n  createElement(): void;\n  components: {};\n}\n\ninterface IToReactConfig {\n  react?: IReactConfig;\n  sanitize?: boolean;\n}\n\nexport class HTMLReader implements ILangReader {\n  public fromLang(html: string): Unist.IParent {\n    return Unified.create()\n      .use(parse)\n      .parse(html);\n  }\n\n  public toLang(data: any): string {\n    return Unified.create()\n      .use(stringify)\n      .stringify(data);\n  }\n\n  public toReact(html: string, config: IToReactConfig = {}): any {\n    const processor = Unified.create().use(parse, parseOptions);\n\n    if (config.sanitize) {\n      processor.use(sanitizeScript);\n    }\n\n    processor\n      .use(stringify)\n      .use(react, Object.assign(reactConfig, config.react))\n      .use(slug);\n\n    return processor.processSync(html).contents;\n  }\n\n  public sanitize(html: string): string {\n    return Unified.create()\n      .use(parse, parseOptions)\n      .use(sanitizeScript)\n      .use(stringify)\n      .use(slug)\n      .processSync(html)\n      .contents.trim();\n  }\n\n  public format(html: string): string {\n    return Unified.create()\n      .use(parse, parseOptions)\n      .use(stringify)\n      .use(format)\n      .processSync(html)\n      .contents.trim();\n  }\n}\n","export * from './unified';\n","const unified = require('unified');\n\nexport const create = () => {\n  return unified();\n};\n","import * as Unist from '@core/unist';\n\nfunction getTextContent(node: Unist.IElement) {\n  return node.children.map(child => (child as Unist.IText).value).join('\\n');\n}\n\nfunction transformer(node: Unist.INode) {\n  if (node.type === 'element' && (node as Unist.IElement).tagName === 'script') {\n    if ((node as Unist.IElement).children.length > 0) {\n      node.type = 'comment';\n      (node as Unist.IComment).value = `<script>${getTextContent(node as Unist.IElement)}</script>`;\n    } else {\n      node.type = 'text';\n      (node as Unist.IText).value = '';\n    }\n  } else if ('children' in node && (node as Unist.IParent).children.length > 0) {\n    for (const child of (node as Unist.IParent).children) {\n      transformer(child);\n    }\n  }\n}\n\nexport function sanitizeScript() {\n  return transformer;\n}\n","/* eslint-disable */\n\nimport CodeMirror from 'codemirror';\n\n// global required by json-lint code mirror lib imported below\nimport jsonlint from './jsonlint';\nglobal.jsonlint = jsonlint;\n\n// global required by javascript-lint code mirror lib imported below\n// if (typeof window !== 'undefined') {\n//   import('jshint' /* webpackChunkName: 'jshint' */)\n//     .then(({ JSHINT }) => {\n//       window.JSHINT = JSHINT;\n//       require('codemirror/addon/lint/javascript-lint');\n//     })\n//     .catch(error => {\n//       console.log('Error loading jshint:', error);\n//     });\n// }\n\nimport 'codemirror/addon/display/autorefresh';\n\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/go/go';\nimport 'codemirror/mode/http/http';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/jsx/jsx';\nimport 'codemirror/mode/markdown/markdown';\nimport 'codemirror/mode/perl/perl';\nimport 'codemirror/mode/php/php';\nimport 'codemirror/mode/python/python';\nimport 'codemirror/mode/ruby/ruby';\nimport 'codemirror/mode/shell/shell';\nimport 'codemirror/mode/sql/sql';\nimport 'codemirror/mode/swift/swift';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/diff/diff';\n\nimport 'codemirror/addon/fold/foldcode';\nimport 'codemirror/addon/fold/foldgutter';\nimport 'codemirror/addon/fold/brace-fold';\nimport 'codemirror/addon/fold/xml-fold';\nimport 'codemirror/addon/fold/indent-fold';\nimport 'codemirror/addon/fold/markdown-fold';\n\nimport 'codemirror/addon/hint/show-hint';\nimport './custom-hint';\n\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/match-highlighter';\nimport 'codemirror/addon/search/matchesonscrollbar';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/scroll/annotatescrollbar';\n\nimport 'codemirror/addon/display/placeholder';\nimport 'codemirror/addon/comment/comment';\n\nimport 'codemirror/addon/edit/matchbrackets';\nimport 'codemirror/addon/edit/closebrackets';\n\nimport 'codemirror/addon/lint/lint';\nimport 'codemirror/addon/lint/json-lint';\n\nimport 'codemirror/keymap/sublime';\nimport 'codemirror/keymap/emacs';\nimport 'codemirror/keymap/vim';\n\n// FOR SIMPLEMDE\nimport 'codemirror/addon/edit/continuelist';\nimport 'codemirror/addon/display/fullscreen';\nimport 'codemirror/addon/mode/overlay';\nimport 'codemirror/addon/selection/mark-selection';\nimport 'codemirror/mode/gfm/gfm';\n\nexport default CodeMirror;\n","/* eslint-disable */\n/* Jison generated parser */\n\nvar parser = {\n  trace: function trace() {},\n  yy: {},\n  symbols_: {\n    error: 2,\n    JSONString: 3,\n    STRING: 4,\n    JSONNumber: 5,\n    NUMBER: 6,\n    JSONNullLiteral: 7,\n    NULL: 8,\n    JSONBooleanLiteral: 9,\n    TRUE: 10,\n    FALSE: 11,\n    JSONText: 12,\n    JSONValue: 13,\n    EOF: 14,\n    JSONObject: 15,\n    JSONArray: 16,\n    '{': 17,\n    '}': 18,\n    JSONMemberList: 19,\n    JSONMember: 20,\n    ':': 21,\n    ',': 22,\n    '[': 23,\n    ']': 24,\n    JSONElementList: 25,\n    $accept: 0,\n    $end: 1,\n  },\n  terminals_: {\n    2: 'error',\n    4: 'STRING',\n    6: 'NUMBER',\n    8: 'NULL',\n    10: 'TRUE',\n    11: 'FALSE',\n    14: 'EOF',\n    17: '{',\n    18: '}',\n    21: ':',\n    22: ',',\n    23: '[',\n    24: ']',\n  },\n  productions_: [\n    0,\n    [3, 1],\n    [5, 1],\n    [7, 1],\n    [9, 1],\n    [9, 1],\n    [12, 2],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [13, 1],\n    [15, 2],\n    [15, 3],\n    [20, 3],\n    [19, 1],\n    [19, 3],\n    [16, 2],\n    [16, 3],\n    [25, 1],\n    [25, 3],\n  ],\n  performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {\n    var $0 = $$.length - 1;\n    switch (yystate) {\n      case 1: // replace escaped characters with actual character\n        this.$ = yytext\n          .replace(/\\\\(\\\\|\")/g, '$' + '1')\n          .replace(/\\\\n/g, '\\n')\n          .replace(/\\\\r/g, '\\r')\n          .replace(/\\\\t/g, '\\t')\n          .replace(/\\\\v/g, '\\v')\n          .replace(/\\\\f/g, '\\f')\n          .replace(/\\\\b/g, '\\b');\n\n        break;\n      case 2:\n        this.$ = Number(yytext);\n        break;\n      case 3:\n        this.$ = null;\n        break;\n      case 4:\n        this.$ = true;\n        break;\n      case 5:\n        this.$ = false;\n        break;\n      case 6:\n        return (this.$ = $$[$0 - 1]);\n        break;\n      case 13:\n        this.$ = {};\n        break;\n      case 14:\n        this.$ = $$[$0 - 1];\n        break;\n      case 15:\n        this.$ = [$$[$0 - 2], $$[$0]];\n        break;\n      case 16:\n        this.$ = {};\n        this.$[$$[$0][0]] = $$[$0][1];\n        break;\n      case 17:\n        this.$ = $$[$0 - 2];\n        $$[$0 - 2][$$[$0][0]] = $$[$0][1];\n        break;\n      case 18:\n        this.$ = [];\n        break;\n      case 19:\n        this.$ = $$[$0 - 1];\n        break;\n      case 20:\n        this.$ = [$$[$0]];\n        break;\n      case 21:\n        this.$ = $$[$0 - 2];\n        $$[$0 - 2].push($$[$0]);\n        break;\n    }\n  },\n  table: [\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      12: 1,\n      13: 2,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      1: [3],\n    },\n    {\n      14: [1, 16],\n    },\n    {\n      14: [2, 7],\n      18: [2, 7],\n      22: [2, 7],\n      24: [2, 7],\n    },\n    {\n      14: [2, 8],\n      18: [2, 8],\n      22: [2, 8],\n      24: [2, 8],\n    },\n    {\n      14: [2, 9],\n      18: [2, 9],\n      22: [2, 9],\n      24: [2, 9],\n    },\n    {\n      14: [2, 10],\n      18: [2, 10],\n      22: [2, 10],\n      24: [2, 10],\n    },\n    {\n      14: [2, 11],\n      18: [2, 11],\n      22: [2, 11],\n      24: [2, 11],\n    },\n    {\n      14: [2, 12],\n      18: [2, 12],\n      22: [2, 12],\n      24: [2, 12],\n    },\n    {\n      14: [2, 3],\n      18: [2, 3],\n      22: [2, 3],\n      24: [2, 3],\n    },\n    {\n      14: [2, 4],\n      18: [2, 4],\n      22: [2, 4],\n      24: [2, 4],\n    },\n    {\n      14: [2, 5],\n      18: [2, 5],\n      22: [2, 5],\n      24: [2, 5],\n    },\n    {\n      14: [2, 1],\n      18: [2, 1],\n      21: [2, 1],\n      22: [2, 1],\n      24: [2, 1],\n    },\n    {\n      14: [2, 2],\n      18: [2, 2],\n      22: [2, 2],\n      24: [2, 2],\n    },\n    {\n      3: 20,\n      4: [1, 12],\n      18: [1, 17],\n      19: 18,\n      20: 19,\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 23,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n      24: [1, 21],\n      25: 22,\n    },\n    {\n      1: [2, 6],\n    },\n    {\n      14: [2, 13],\n      18: [2, 13],\n      22: [2, 13],\n      24: [2, 13],\n    },\n    {\n      18: [1, 24],\n      22: [1, 25],\n    },\n    {\n      18: [2, 16],\n      22: [2, 16],\n    },\n    {\n      21: [1, 26],\n    },\n    {\n      14: [2, 18],\n      18: [2, 18],\n      22: [2, 18],\n      24: [2, 18],\n    },\n    {\n      22: [1, 28],\n      24: [1, 27],\n    },\n    {\n      22: [2, 20],\n      24: [2, 20],\n    },\n    {\n      14: [2, 14],\n      18: [2, 14],\n      22: [2, 14],\n      24: [2, 14],\n    },\n    {\n      3: 20,\n      4: [1, 12],\n      20: 29,\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 30,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      14: [2, 19],\n      18: [2, 19],\n      22: [2, 19],\n      24: [2, 19],\n    },\n    {\n      3: 5,\n      4: [1, 12],\n      5: 6,\n      6: [1, 13],\n      7: 3,\n      8: [1, 9],\n      9: 4,\n      10: [1, 10],\n      11: [1, 11],\n      13: 31,\n      15: 7,\n      16: 8,\n      17: [1, 14],\n      23: [1, 15],\n    },\n    {\n      18: [2, 17],\n      22: [2, 17],\n    },\n    {\n      18: [2, 15],\n      22: [2, 15],\n    },\n    {\n      22: [2, 21],\n      24: [2, 21],\n    },\n  ],\n  defaultActions: {\n    16: [2, 6],\n  },\n  parseError: function parseError(str, hash) {\n    throw new Error(str);\n  },\n  parse: function parse(input) {\n    var self = this,\n      stack = [0],\n      vstack = [null], // semantic value stack\n      lstack = [], // location stack\n      table = this.table,\n      yytext = '',\n      yylineno = 0,\n      yyleng = 0,\n      recovering = 0,\n      TERROR = 2,\n      EOF = 1;\n\n    //this.reductionCount = this.shiftCount = 0;\n\n    this.lexer.setInput(input);\n    this.lexer.yy = this.yy;\n    this.yy.lexer = this.lexer;\n    if (typeof this.lexer.yylloc == 'undefined') this.lexer.yylloc = {};\n    var yyloc = this.lexer.yylloc;\n    lstack.push(yyloc);\n\n    if (typeof this.yy.parseError === 'function') this.parseError = this.yy.parseError;\n\n    function popStack(n) {\n      stack.length = stack.length - 2 * n;\n      vstack.length = vstack.length - n;\n      lstack.length = lstack.length - n;\n    }\n\n    function lex() {\n      var token;\n      token = self.lexer.lex() || 1; // $end = 1\n      // if token isn't its numeric value, convert\n      if (typeof token !== 'number') {\n        token = self.symbols_[token] || token;\n      }\n      return token;\n    }\n\n    var symbol,\n      preErrorSymbol,\n      state,\n      action,\n      a,\n      r,\n      yyval = {},\n      p,\n      len,\n      newState,\n      expected;\n    while (true) {\n      // retreive state number from top of stack\n      state = stack[stack.length - 1];\n\n      // use default actions if available\n      if (this.defaultActions[state]) {\n        action = this.defaultActions[state];\n      } else {\n        if (symbol == null) symbol = lex();\n        // read action for current state and first input\n        action = table[state] && table[state][symbol];\n      }\n\n      // handle parse error\n      _handle_error: if (typeof action === 'undefined' || !action.length || !action[0]) {\n        if (!recovering) {\n          // Report error\n          expected = [];\n          for (p in table[state])\n            if (this.terminals_[p] && p > 2) {\n              expected.push(\"'\" + this.terminals_[p] + \"'\");\n            }\n          var errStr = '';\n          if (this.lexer.showPosition) {\n            errStr =\n              'Parse error on line ' +\n              (yylineno + 1) +\n              ':\\n' +\n              this.lexer.showPosition() +\n              '\\nExpecting ' +\n              expected.join(', ') +\n              \", got '\" +\n              this.terminals_[symbol] +\n              \"'\";\n          } else {\n            errStr =\n              'Parse error on line ' +\n              (yylineno + 1) +\n              ': Unexpected ' +\n              (symbol == 1 /*EOF*/\n                ? 'end of input'\n                : \"'\" + (this.terminals_[symbol] || symbol) + \"'\");\n          }\n          this.parseError(errStr, {\n            text: this.lexer.match,\n            token: this.terminals_[symbol] || symbol,\n            line: this.lexer.yylineno,\n            loc: yyloc,\n            expected: expected,\n          });\n        }\n\n        // just recovered from another error\n        if (recovering == 3) {\n          if (symbol == EOF) {\n            throw new Error(errStr || 'Parsing halted.');\n          }\n\n          // discard current lookahead and grab another\n          yyleng = this.lexer.yyleng;\n          yytext = this.lexer.yytext;\n          yylineno = this.lexer.yylineno;\n          yyloc = this.lexer.yylloc;\n          symbol = lex();\n        }\n\n        // try to recover from error\n        while (1) {\n          // check for error recovery rule in this state\n          if (TERROR.toString() in table[state]) {\n            break;\n          }\n          if (state == 0) {\n            throw new Error(errStr || 'Parsing halted.');\n          }\n          popStack(1);\n          state = stack[stack.length - 1];\n        }\n\n        preErrorSymbol = symbol; // save the lookahead token\n        symbol = TERROR; // insert generic error symbol as new lookahead\n        state = stack[stack.length - 1];\n        action = table[state] && table[state][TERROR];\n        recovering = 3; // allow 3 real symbols to be shifted before reporting a new error\n      }\n\n      // this shouldn't happen, unless resolve defaults are off\n      if (action[0] instanceof Array && action.length > 1) {\n        throw new Error(\n          'Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol\n        );\n      }\n\n      switch (action[0]) {\n        case 1: // shift\n          //this.shiftCount++;\n\n          stack.push(symbol);\n          vstack.push(this.lexer.yytext);\n          lstack.push(this.lexer.yylloc);\n          stack.push(action[1]); // push state\n          symbol = null;\n          if (!preErrorSymbol) {\n            // normal execution/no error\n            yyleng = this.lexer.yyleng;\n            yytext = this.lexer.yytext;\n            yylineno = this.lexer.yylineno;\n            yyloc = this.lexer.yylloc;\n            if (recovering > 0) recovering--;\n          } else {\n            // error just occurred, resume old lookahead f/ before error\n            symbol = preErrorSymbol;\n            preErrorSymbol = null;\n          }\n          break;\n\n        case 2: // reduce\n          //this.reductionCount++;\n\n          len = this.productions_[action[1]][1];\n\n          // perform semantic action\n          yyval.$ = vstack[vstack.length - len]; // default to $$ = $1\n          // default location, uses first token for firsts, last for lasts\n          yyval._$ = {\n            first_line: lstack[lstack.length - (len || 1)].first_line,\n            last_line: lstack[lstack.length - 1].last_line,\n            first_column: lstack[lstack.length - (len || 1)].first_column,\n            last_column: lstack[lstack.length - 1].last_column,\n          };\n          r = this.performAction.call(\n            yyval,\n            yytext,\n            yyleng,\n            yylineno,\n            this.yy,\n            action[1],\n            vstack,\n            lstack\n          );\n\n          if (typeof r !== 'undefined') {\n            return r;\n          }\n\n          // pop off stack\n          if (len) {\n            stack = stack.slice(0, -1 * len * 2);\n            vstack = vstack.slice(0, -1 * len);\n            lstack = lstack.slice(0, -1 * len);\n          }\n\n          stack.push(this.productions_[action[1]][0]); // push nonterminal (reduce)\n          vstack.push(yyval.$);\n          lstack.push(yyval._$);\n          // goto new state = table[STATE][NONTERMINAL]\n          newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n          stack.push(newState);\n          break;\n\n        case 3: // accept\n          return true;\n      }\n    }\n\n    return true;\n  },\n};\n/* Jison generated lexer */\nvar lexer = (function() {\n  var lexer = {\n    EOF: 1,\n    parseError: function parseError(str, hash) {\n      if (this.yy.parseError) {\n        this.yy.parseError(str, hash);\n      } else {\n        throw new Error(str);\n      }\n    },\n    setInput: function(input) {\n      this._input = input;\n      this._more = this._less = this.done = false;\n      this.yylineno = this.yyleng = 0;\n      this.yytext = this.matched = this.match = '';\n      this.conditionStack = ['INITIAL'];\n      this.yylloc = {\n        first_line: 1,\n        first_column: 0,\n        last_line: 1,\n        last_column: 0,\n      };\n      return this;\n    },\n    input: function() {\n      var ch = this._input[0];\n      this.yytext += ch;\n      this.yyleng++;\n      this.match += ch;\n      this.matched += ch;\n      var lines = ch.match(/\\n/);\n      if (lines) this.yylineno++;\n      this._input = this._input.slice(1);\n      return ch;\n    },\n    unput: function(ch) {\n      this._input = ch + this._input;\n      return this;\n    },\n    more: function() {\n      this._more = true;\n      return this;\n    },\n    less: function(n) {\n      this._input = this.match.slice(n) + this._input;\n    },\n    pastInput: function() {\n      var past = this.matched.substr(0, this.matched.length - this.match.length);\n      return (past.length > 20 ? '...' : '') + past.substr(-20).replace(/\\n/g, '');\n    },\n    upcomingInput: function() {\n      var next = this.match;\n      if (next.length < 20) {\n        next += this._input.substr(0, 20 - next.length);\n      }\n      return (next.substr(0, 20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, '');\n    },\n    showPosition: function() {\n      var pre = this.pastInput();\n      var c = new Array(pre.length + 1).join('-');\n      return pre + this.upcomingInput() + '\\n' + c + '^';\n    },\n    next: function() {\n      if (this.done) {\n        return this.EOF;\n      }\n      if (!this._input) this.done = true;\n\n      var token, match, tempMatch, index, col, lines;\n      if (!this._more) {\n        this.yytext = '';\n        this.match = '';\n      }\n      var rules = this._currentRules();\n      for (var i = 0; i < rules.length; i++) {\n        tempMatch = this._input.match(this.rules[rules[i]]);\n        if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n          match = tempMatch;\n          index = i;\n          if (!this.options.flex) break;\n        }\n      }\n      if (match) {\n        lines = match[0].match(/\\n.*/g);\n        if (lines) this.yylineno += lines.length;\n        this.yylloc = {\n          first_line: this.yylloc.last_line,\n          last_line: this.yylineno + 1,\n          first_column: this.yylloc.last_column,\n          last_column: lines\n            ? lines[lines.length - 1].length - 1\n            : this.yylloc.last_column + match[0].length,\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.yyleng = this.yytext.length;\n        this._more = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(\n          this,\n          this.yy,\n          this,\n          rules[index],\n          this.conditionStack[this.conditionStack.length - 1]\n        );\n        if (this.done && this._input) this.done = false;\n        if (token) return token;\n        else return;\n      }\n      if (this._input === '') {\n        return this.EOF;\n      } else {\n        this.parseError(\n          'Lexical error on line ' +\n            (this.yylineno + 1) +\n            '. Unrecognized text.\\n' +\n            this.showPosition(),\n          {\n            text: '',\n            token: null,\n            line: this.yylineno,\n          }\n        );\n      }\n    },\n    lex: function lex() {\n      var r = this.next();\n      if (typeof r !== 'undefined') {\n        return r;\n      } else {\n        return this.lex();\n      }\n    },\n    begin: function begin(condition) {\n      this.conditionStack.push(condition);\n    },\n    popState: function popState() {\n      return this.conditionStack.pop();\n    },\n    _currentRules: function _currentRules() {\n      return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n    },\n    topState: function() {\n      return this.conditionStack[this.conditionStack.length - 2];\n    },\n    pushState: function begin(condition) {\n      this.begin(condition);\n    },\n  };\n  lexer.options = {};\n  lexer.performAction = function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n    var YYSTATE = YY_START;\n    switch ($avoiding_name_collisions) {\n      case 0:\n        /* skip whitespace */\n        break;\n      case 1:\n        return 6;\n        break;\n      case 2:\n        yy_.yytext = yy_.yytext.substr(1, yy_.yyleng - 2);\n        return 4;\n        break;\n      case 3:\n        return 17;\n        break;\n      case 4:\n        return 18;\n        break;\n      case 5:\n        return 23;\n        break;\n      case 6:\n        return 24;\n        break;\n      case 7:\n        return 22;\n        break;\n      case 8:\n        return 21;\n        break;\n      case 9:\n        return 10;\n        break;\n      case 10:\n        return 11;\n        break;\n      case 11:\n        return 8;\n        break;\n      case 12:\n        return 14;\n        break;\n      case 13:\n        return 'INVALID';\n        break;\n    }\n  };\n  lexer.rules = [\n    /^(?:\\s+)/,\n    /^(?:(-?([0-9]|[1-9][0-9]+))(\\.[0-9]+)?([eE][-+]?[0-9]+)?\\b)/,\n    /^(?:\"(?:\\\\[\\\\\"bfnrt/]|\\\\u[a-fA-F0-9]{4}|[^\\\\\\0-\\x09\\x0a-\\x1f\"])*\")/,\n    /^(?:\\{)/,\n    /^(?:\\})/,\n    /^(?:\\[)/,\n    /^(?:\\])/,\n    /^(?:,)/,\n    /^(?::)/,\n    /^(?:true\\b)/,\n    /^(?:false\\b)/,\n    /^(?:null\\b)/,\n    /^(?:$)/,\n    /^(?:.)/,\n  ];\n  lexer.conditions = {\n    INITIAL: {\n      rules: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],\n      inclusive: true,\n    },\n  };\n\n  return lexer;\n})();\nparser.lexer = lexer;\n\nexport default parser;\n","// adapted from the official javascript-hint addon\n\n/* eslint-disable */\n\nimport CodeMirror from 'codemirror';\n\nlet Pos = CodeMirror.Pos;\n\nfunction arrayContains(arr, item) {\n  if (!Array.prototype.indexOf) {\n    let i = arr.length;\n    while (i--) {\n      if (arr[i] === item) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return arr.indexOf(item) != -1;\n}\n\nfunction scriptHint(editor, keywords, getToken, options) {\n  // Find the token at the cursor\n  let cur = editor.getCursor();\n  let token = getToken(editor, cur);\n  if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n  token.state = CodeMirror.innerMode(editor.getMode(), token.state).state;\n\n  // If it's not a 'word-style' token, ignore the token.\n  if (!/^[\\w$_]*$/.test(token.string)) {\n    token = {\n      start: cur.ch,\n      end: cur.ch,\n      string: '',\n      state: token.state,\n      type: token.string == '.' ? 'property' : null,\n    };\n  } else if (token.end > cur.ch) {\n    token.end = cur.ch;\n    token.string = token.string.slice(0, cur.ch - token.start);\n  }\n\n  let tprop = token;\n  // If it is a property, find out what it is a property of.\n  while (tprop.type == 'property') {\n    tprop = getToken(editor, Pos(cur.line, tprop.start));\n    if (tprop.string != '.') return;\n    tprop = getToken(editor, Pos(cur.line, tprop.start));\n    if (!context) var context = [];\n    context.push(tprop);\n  }\n  return {\n    list: getCompletions(token, context, keywords, options),\n    from: Pos(cur.line, token.start),\n    to: Pos(cur.line, token.end),\n  };\n}\n\nfunction javascriptHint(editor, options) {\n  return scriptHint(\n    editor,\n    [],\n    function(e, cur) {\n      return e.getTokenAt(cur);\n    },\n    options\n  );\n}\nCodeMirror.registerHelper('hint', 'javascript', javascriptHint);\n\nfunction forAllProps(obj, callback) {\n  for (const name in obj) {\n    if (name === 'prototype') {\n      continue;\n    }\n\n    let displayText;\n    if (obj[name] && obj[name].prototype && obj[name].prototype.displayText) {\n      displayText = obj[name].prototype.displayText;\n    }\n    callback(name, displayText);\n  }\n}\n\nfunction getCompletions(token, context, keywords, options) {\n  let found = [],\n    start = token.string,\n    global = (options && options.globalScope) || window;\n  function maybeAdd(str, displayText) {\n    if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str))\n      found.push({ text: str, displayText });\n  }\n  function gatherCompletions(obj) {\n    forAllProps(obj, maybeAdd);\n  }\n\n  if (context && context.length) {\n    // If this is a property, see if it belongs to some object we can\n    // find in the current environment.\n    let obj = context.pop(),\n      base;\n    if (obj.type && obj.type.indexOf('variable') === 0) {\n      if (options && options.additionalContext) base = options.additionalContext[obj.string];\n      if (!options || options.useGlobalScope !== false) base = base || global[obj.string];\n    } else if (obj.type == 'string') {\n      base = '';\n    } else if (obj.type == 'atom') {\n      base = 1;\n    } else if (obj.type == 'function') {\n      if (\n        global.jQuery != null &&\n        (obj.string == '$' || obj.string == 'jQuery') &&\n        typeof global.jQuery == 'function'\n      )\n        base = global.jQuery();\n      else if (global._ != null && obj.string == '_' && typeof global._ == 'function')\n        base = global._();\n    }\n    while (base != null && context.length) base = base[context.pop().string];\n    if (base != null) gatherCompletions(base);\n  } else {\n    if (!options || options.useGlobalScope !== false) gatherCompletions(global);\n  }\n  return found;\n}\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport { init, SimpleMDE } from '@stoplight/simplemde';\n\nimport { Renderer } from '@platform/utils/markdown';\n\nimport MarkdownViewer from '../MarkdownViewer';\n\nlet inited = false;\n\nclass SimpleMdEditor extends React.Component {\n  static propTypes = {\n    value: PropTypes.string,\n    className: PropTypes.string,\n    placeholder: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    spellChecker: PropTypes.bool,\n    hideToolbar: PropTypes.bool,\n    extraKeys: PropTypes.array,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewOn: _.isUndefined(props.preview) ? true : props.preview,\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this.props;\n    this.id = id || 'simplemde-editor-0';\n  }\n\n  componentDidMount() {\n    this.createEditor();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.value !== this.simplemde.value()) {\n      this.simplemde.value(nextProps.value);\n    }\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.props.preview && this.props.preview !== nextProps.preview) {\n      setTimeout(() => this.createEditor(), 0);\n    }\n  }\n\n  togglePreview = () => {\n    this.setState({ previewOn: !this.state.previewOn });\n  };\n\n  createEditor() {\n    const { codeMirrorInstance, extraKeys, onChange, hideToolbar, ...options } = this.props;\n\n    if (!inited) {\n      init({\n        codeMirrorInstance,\n        marked: Renderer,\n      });\n\n      inited = true;\n    }\n\n    const defaultOptions = {\n      element: document.getElementById(this.id),\n      initialValue: this.props.value,\n      status: false,\n      // latest codemirror throwing error w spell checker\n      // not worth fixing since we're getting rid of simplemde anyways\n      spellChecker: false,\n      toolbar: hideToolbar\n        ? null\n        : [\n            'bold',\n            'italic',\n            'heading-1',\n            'heading-2',\n            'heading-3',\n            '|',\n            'quote',\n            'code',\n            'unordered-list',\n            'ordered-list',\n            '|',\n            'link',\n            'image',\n            '|',\n            {\n              name: 'preview',\n              action: () => {\n                this.togglePreview();\n              },\n              className: 'fa fa-eye',\n              title: 'Toggle Preview',\n            },\n          ],\n    };\n\n    this.simplemde = new SimpleMDE(Object.assign({}, defaultOptions, options));\n\n    if (extraKeys) {\n      // https://codemirror.net/doc/manual.html#keymaps\n      this.simplemde.codemirror.setOption('extraKeys', extraKeys);\n    }\n\n    this.simplemde.codemirror.on('change', () => {\n      onChange(this.simplemde.value());\n    });\n\n    this.simplemde.codemirror.on('blur', () => {\n      onChange(this.simplemde.value(), { immediate: true });\n    });\n\n    this.simplemde.codemirror.setOption('theme', 'default');\n  }\n\n  renderEditor() {\n    const { fill, className } = this.props;\n\n    return (\n      <div\n        className={cn('SimpleMDE flex flex-col h-full w-full pos-a', className, {\n          'fill-space': fill,\n        })}\n      >\n        <textarea id={this.id} />\n      </div>\n    );\n  }\n\n  renderPreview() {\n    return (\n      <MarkdownViewer\n        className=\"SimpleMDE-markdown ov-s\"\n        value={this.props.value || 'preview will show here'}\n        context={this.props.context}\n      />\n    );\n  }\n\n  render() {\n    const { fill, hideToolbar } = this.props;\n\n    return (\n      <div\n        className={cn('SimpleMDE-wrapper flex h-full', {\n          'fill-space': fill,\n          'hide-toolbar': hideToolbar,\n        })}\n      >\n        <div\n          className={cn('SimpleMDE-editor no-preview-fallback flex-1 pos-r', {\n            'w-full': !this.state.previewOn,\n            'w-50': this.state.previewOn,\n          })}\n        >\n          {this.renderEditor()}\n        </div>\n\n        {this.state.previewOn && (\n          <div className=\"SimpleMDE-preview flex-1 w-50 pos-r\">{this.renderPreview()}</div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default SimpleMdEditor;\n","import WebworkerPromise from 'webworker-promise';\n\nexport const createWorker = worker => {\n  return new WebworkerPromise(worker);\n};\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"95512a2fd2cc4165d85f.worker.js\");\n};","import React from 'react';\nimport { inject } from 'mobx-react';\nimport _ from 'lodash';\n\nconst JsonPathCacheContainer = (props = {}) => BaseComponent => {\n  const { cacheKey, cacheKeyProp, path, pathProp, pure = true } = props;\n\n  class JsonPathCache extends React.Component {\n    componentWillMount() {\n      const { jsonPathContainerData = {} } = this.props;\n      const { store, cacheKey, path } = jsonPathContainerData;\n\n      // register if it does not already have an id\n      store.register({\n        cacheKey,\n        path,\n      });\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const data = this.props.jsonPathContainerData || {};\n      const nextData = nextProps.jsonPathContainerData || {};\n\n      const currentKey = data.cacheKey + data.id + data.path;\n      const nextKey = nextData.cacheKey + nextData.id + nextData.path;\n\n      if (currentKey !== nextKey) {\n        nextData.store.register({\n          cacheKey: nextData.cacheKey,\n          id: nextData.id,\n          path: nextData.path,\n        });\n      }\n    }\n\n    // shouldComponentUpdate(nextProps) {\n    //   const data = this.props.jsonPathContainerData || {};\n    //   const nextData = nextProps.jsonPathContainerData || {};\n\n    //   if (pure) {\n    //     return data.cache !== nextData.cache;\n    //   }\n\n    //   return true;\n    // }\n\n    render() {\n      const { jsonPathContainerData = {}, ...baseProps } = this.props;\n      const { store, cacheKey, path, updateCache } = jsonPathContainerData;\n\n      const cache = store.getCache({ cacheKey, path }) || {};\n\n      return (\n        <BaseComponent\n          {...baseProps}\n          id={cache.id}\n          cacheKey={cacheKey}\n          cache={cache.data}\n          updated={cache.updated}\n          updateCache={(t, p, v, options) => {\n            updateCache(t, p, v, options);\n            this.forceUpdate();\n          }}\n        />\n      );\n    }\n  }\n\n  let targetExport = JsonPathCache;\n  if (\n    typeof window !== 'undefined' &&\n    typeof localStorage !== 'undefined' &&\n    localStorage.debugRender\n  ) {\n    const debugRender = require('react-render-debugger');\n    targetExport = debugRender(targetExport);\n  }\n\n  return inject(({ jsonPathCache }, props) => {\n    const ck = cacheKey || _.get(props, cacheKeyProp);\n    const p = path || _.get(props, pathProp);\n\n    return {\n      jsonPathContainerData: {\n        store: jsonPathCache,\n        cacheKey: ck,\n        path: p,\n        cache: jsonPathCache.getCache({ cacheKey: ck, path: p }),\n        updateCache: jsonPathCache.updateCacheFactory({ cacheKey: ck, basePath: p }),\n      },\n    };\n  })(targetExport);\n};\n\nexport default JsonPathCacheContainer;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Loader } from 'semantic-ui-react';\n\nexport default ({ className = undefined, children = null, text = 'Loading', ...extraProps }) => {\n  return (\n    <div className={cn('PageLoading', className)} style={{ padding: 50 }}>\n      <Loader inline=\"centered\" size=\"big\" active inverted {...extraProps}>\n        {children || text}\n      </Loader>\n    </div>\n  );\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Button } from 'semantic-ui-react';\n\nimport { Link } from '@platform/utils/router';\nimport { isExternalLink } from '@platform/utils/url';\n\nimport HubSearch from '../HubSearch';\n\nconst BlockAction = ({ action, onChangeData, basePath, store, theme = {}, className }) => {\n  const { type = 'none', name, content, route = {} } = action;\n\n  let to = route.path;\n  if (!isExternalLink(to)) {\n    to = store.buildViewPath(to);\n  }\n\n  let actionElem = null;\n\n  const actionBgStyle = _.get(theme, ['background'], {});\n  const actionTextStyle = _.get(theme, ['text'], {});\n\n  switch (type) {\n    case 'button':\n      actionElem = (\n        <Link to={to}>\n          <Button\n            primary\n            size=\"large\"\n            content={name || 'Button text'}\n            style={{ ...actionBgStyle, ...actionTextStyle }}\n          />\n        </Link>\n      );\n      break;\n    case 'html':\n      actionElem = <div dangerouslySetInnerHTML={{ __html: content }} />;\n      break;\n    case 'search':\n      actionElem = <HubSearch />;\n      break;\n    default:\n      break;\n  }\n\n  return (\n    <div className={cn(`HubBlockAction HubBlockAction--${type}`, className)}>{actionElem}</div>\n  );\n};\n\nexport default BlockAction;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Renderer } from '@platform/utils/markdown';\n\nimport BlockAction from '../BlockAction/viewer';\n\nconst BarItem = props => {\n  const { child = {}, basePath, editor, theme = {}, childIndex } = props;\n  const { title, content, actions = [], relativePath } = child;\n\n  const childTextStyle = _.get(theme, ['styles', 'children', childIndex, 'text'], {});\n\n  return (\n    <div className=\"BarListBlock-child flex justify-center\">\n      <div className=\"BarListBlock-content flex items-center\">\n        <div className=\"BarListBlock-main w-1/3 pr-10\">\n          <div className=\"BarListBlock-title\" style={childTextStyle}>\n            {title}\n          </div>\n          <div className=\"BarListBlock-actions\">\n            {_.map(actions, (action, actionIndex) => {\n              const actionTheme = _.get(theme, [\n                'styles',\n                'children',\n                childIndex,\n                'actions',\n                actionIndex,\n              ]);\n              return (\n                <BlockAction\n                  className=\"pt-4\"\n                  key={actionIndex}\n                  action={action}\n                  basePath={basePath}\n                  store={editor}\n                  theme={actionTheme}\n                />\n              );\n            })}\n          </div>\n        </div>\n\n        {content ? (\n          <div\n            className=\"BarListBlock-body w-2/3\"\n            dangerouslySetInnerHTML={{ __html: Renderer(content, {}, { basePath, relativePath }) }}\n            style={childTextStyle}\n          />\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nconst BlockBarList = props => {\n  const { WrapperFactory, data = {}, basePath, relativePath, editor, theme = {} } = props;\n\n  const contentElem = _.map(data.children, (child, key) => {\n    const childBgStyle = _.get(theme, ['styles', 'children', key, 'background'], {});\n\n    return (\n      <div key={key} className=\"BarListBlock\" style={childBgStyle}>\n        <BarItem\n          child={child}\n          childIndex={key}\n          basePath={basePath}\n          relativePath={relativePath}\n          editor={editor}\n          theme={theme}\n        />\n      </div>\n    );\n  });\n\n  return (\n    <WrapperFactory {...props} contentElem={contentElem} className=\"flex flex-col justify-center\" />\n  );\n};\n\nexport default BlockBarList;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport MarkdownViewer from '@platform/components/MarkdownViewer';\n\nconst BlockCallout = props => {\n  const { WrapperFactory, data = {}, editor } = props;\n  const { type = 'info', title, body } = data;\n\n  const contentElem = [\n    <div key=\"b\" className=\"flex-1\">\n      {title ? <div className=\"HubBlock-content-title\">{title}</div> : null}\n      {body ? (\n        <MarkdownViewer\n          className=\"HubBlock-content-body\"\n          value={body || ''}\n          context={{\n            a({ href, title, target, children }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      ) : null}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      headerElem={null}\n      contentClassName=\"flex\"\n      contentElem={contentElem}\n      className={`CalloutBlock--${type}`}\n    />\n  );\n};\n\nexport default BlockCallout;\n","export const defaultColor = '#000000';\nexport const defaultBackgroundColor = '#FAFAFA';\n\nexport const defaultTheme = {\n  styles: {\n    base: {\n      text: {\n        color: defaultColor,\n      },\n      background: {\n        backgroundColor: defaultBackgroundColor,\n      },\n    },\n  },\n};\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Link } from '@platform/utils/router';\n\nimport { computeTheme } from '../../utils';\n\nimport { defaultTheme } from './index';\n\nconst CardChild = props => {\n  const { child = {}, store, theme = {}, childIndex } = props;\n\n  const {\n    image = '//react.semantic-ui.com/assets/images/wireframe/image.png',\n    title,\n    content,\n    route = {},\n  } = child;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const cardBgStyle = _.get(computedTheme, ['styles', 'card', childIndex, 'background'], {});\n  const cardTextStyle = _.get(computedTheme, ['styles', 'card', childIndex, 'text'], {});\n\n  return (\n    <Link\n      className=\"CardListBlock-child flex items-center\"\n      to={store.buildViewPath(route.path)}\n      style={cardBgStyle}\n    >\n      <div className=\"CardListBlock-image\">\n        <img src={image} />\n      </div>\n\n      <div className=\"CardListBlock-content flex-1\">\n        <div className=\"CardListBlock-title font-bold\" style={cardTextStyle}>\n          {title}\n        </div>\n        <div className=\"CardListBlock-body\" style={cardTextStyle}>\n          {content}\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nconst BlockCardList = props => {\n  const { WrapperFactory, data = {}, theme = {}, header = {}, basePath, store } = props;\n\n  const { children = [] } = data;\n  const { title, subtitle } = header;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const baseBgStyle = _.get(computedTheme, 'styles.base.background', {});\n  const baseTextStyle = _.get(computedTheme, 'styles.base.text', {});\n\n  const contentElem = [\n    <div key=\"h\" className=\"CardListBlock-header\">\n      {title ? (\n        <div className=\"HubBlock-content-title\" style={baseTextStyle}>\n          {title}\n        </div>\n      ) : null}\n\n      {subtitle ? (\n        <div className=\"HubBlock-content-body\" style={baseTextStyle}>\n          {subtitle}\n        </div>\n      ) : null}\n    </div>,\n\n    <div key=\"c\" className=\"CardListBlock-cards flex items-center justify-center flex-wrap\">\n      {_.map(children, (child, key) => (\n        <CardChild\n          key={key}\n          child={child}\n          childIndex={key}\n          basePath={basePath}\n          store={store}\n          theme={computedTheme}\n        />\n      ))}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      headerElem={null}\n      contentProps={{ style: baseBgStyle }}\n      contentElem={contentElem}\n      className=\"flex flex-col justify-center\"\n    />\n  );\n};\n\nexport default BlockCardList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport _ from 'lodash';\n\nimport Prism from '@platform/utils/highlight';\nimport { safeParse, safeStringify } from '@platform/utils/json';\n\nclass Highlight extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    innerHTML: PropTypes.bool,\n    immediate: PropTypes.bool,\n    mode: PropTypes.string,\n    style: PropTypes.object,\n    content: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    children: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    style: {},\n    innerHTML: false,\n    immediate: false,\n    lineNumbers: true,\n  };\n\n  componentDidMount() {\n    this.highlightCode();\n  }\n\n  componentDidUpdate() {\n    this.highlightCode();\n  }\n\n  highlightCode = () => {\n    if (this.node) {\n      const nodes = this.node.querySelectorAll('code');\n      if (nodes.length > 0) {\n        for (let i = 0; i < nodes.length; i++) {\n          try {\n            Prism.highlightElement(nodes[i]);\n          } catch (error) {\n            console.error('Error with Prism.highlightElement', error);\n          }\n        }\n      }\n    }\n  };\n\n  getDataLines = () => {\n    const { highlightRange } = this.props;\n\n    let dataLines = [];\n\n    if (highlightRange) {\n      if (_.isArray(highlightRange)) {\n        _.forOwn(highlightRange, lineRange => {\n          let dataLine = lineRange.from;\n\n          if (lineRange.from !== lineRange.to) {\n            dataLine = `${lineRange.from}-${lineRange.to}`;\n          }\n\n          if (dataLine) {\n            dataLines.push(dataLine);\n          }\n        });\n      } else if (typeof highlightRange === 'string') {\n        dataLines = [highlightRange];\n      }\n    }\n\n    return dataLines.join(',');\n  };\n\n  getPrettyJson = () => {\n    const { content, children, immediate } = this.props;\n\n    const target = children || content;\n\n    let pretty = safeStringify(safeParse(target, target));\n\n    if (immediate && pretty) {\n      try {\n        pretty = Prism.highlight(pretty, Prism.languages.json);\n      } catch (error) {\n        console.error('Error with Prism.highlight', error);\n      }\n    }\n\n    return pretty;\n  };\n\n  render() {\n    const { className, mode, lineNumbers, immediate, innerHTML, style } = this.props;\n\n    // Check if it's json, if it is, make sure it's indented.\n    // Else just pass the response to the highlighter\n    const pretty = this.getPrettyJson();\n\n    // Get the extra highlighted lines\n    const dataLines = this.getDataLines();\n\n    const codeClassNames = cn(className, `language-${mode || 'json'}`);\n    const preClassNames = cn({\n      'line-numbers': lineNumbers,\n    });\n\n    let code = null;\n    if (immediate) {\n      if (pretty) {\n        code = (\n          <pre className={preClassNames} data-line={dataLines}>\n            <code dangerouslySetInnerHTML={{ __html: pretty }} className={codeClassNames} />\n          </pre>\n        );\n      }\n    } else if (innerHTML) {\n      code = (\n        <div>\n          <div dangerouslySetInnerHTML={{ __html: pretty }} className={codeClassNames} />\n        </div>\n      );\n    } else {\n      code = (\n        <pre className={preClassNames} data-line={dataLines}>\n          <code className={codeClassNames}>{pretty}</code>\n        </pre>\n      );\n    }\n\n    return (\n      <div\n        className={cn('Highlight', { 'line-numbers': lineNumbers })}\n        style={style}\n        ref={node => {\n          this.node = node;\n        }}\n      >\n        {code}\n      </div>\n    );\n  }\n}\n\nexport default Highlight;\n","import React from 'react';\nimport Highlight from '@platform/components/Highlight';\n\nconst CodeBlock = props => {\n  const { id, WrapperFactory, data = '', config = {} } = props;\n  const { mode, lineNumbers, highlightRange } = config;\n\n  const contentElem = (\n    <Highlight\n      id={id}\n      content={data}\n      mode={mode}\n      lineNumbers={lineNumbers}\n      highlightRange={highlightRange}\n      immediate\n    />\n  );\n\n  return <WrapperFactory {...props} contentElem={contentElem} />;\n};\n\nexport default CodeBlock;\n","export const defaultColor = '#000000';\nexport const defaultBackgroundColor = '#FAFAFA';\n\nexport const defaultTheme = {\n  styles: {\n    base: {\n      text: {\n        color: defaultColor,\n      },\n      background: {\n        backgroundColor: defaultBackgroundColor,\n      },\n    },\n  },\n};\n","import React from 'react';\nimport _ from 'lodash';\n\nimport BlockAction from '../BlockAction/viewer';\n\nimport { defaultTheme } from './index';\nimport { computeTheme } from '../../utils';\n\nconst BlockHero = props => {\n  const { WrapperFactory, data = {}, theme = {}, basePath, editor } = props;\n  const { title, body, actions = [] } = data;\n\n  const computedTheme = computeTheme({ theme, defaultTheme });\n  const baseBgStyle = _.get(computedTheme, 'styles.base.background');\n  const baseTextStyle = _.get(computedTheme, 'styles.base.text');\n\n  const contentElem = [\n    <div key=\"t\" className=\"HubBlock-content-title\" style={baseTextStyle}>\n      {title}\n    </div>,\n\n    <div key=\"b\" className=\"HubBlock-content-body\" style={baseTextStyle}>\n      {body}\n    </div>,\n\n    <div key=\"a\" className=\"HubBlock-content-actions text-center\">\n      {_.map(actions, (action, actionIndex) => {\n        const actionTheme = _.get(computedTheme, ['styles', 'actions', actionIndex]);\n\n        return (\n          <BlockAction\n            key={actionIndex}\n            action={action}\n            basePath={basePath}\n            store={editor}\n            theme={actionTheme}\n          />\n        );\n      })}\n    </div>,\n  ];\n\n  return (\n    <WrapperFactory\n      {...props}\n      className=\"flex flex-col justify-center\"\n      headerElem={null}\n      contentClassName=\"flex flex-col items-center\"\n      contentProps={{ style: baseBgStyle }}\n      contentElem={contentElem}\n    />\n  );\n};\n\nexport default BlockHero;\n","import React from 'react';\nimport _ from 'lodash';\nimport HtmlViewer from '@platform/components/HtmlViewer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\nimport { getConfigVar } from '@platform/utils/config';\n\nconst HtmlBlock = props => {\n  const { WrapperFactory, config = {}, data = '', editor } = props;\n\n  let contentClassName;\n  if (!config.plain) {\n    contentClassName = 'MarkdownViewer markdown-body';\n  }\n\n  let contentElem;\n  if (!_.isEmpty(data)) {\n    const err = _.get(data, '__error');\n    if (err) {\n      contentElem = <ErrorMessage error={err} />;\n    } else {\n      contentElem = (\n        <HtmlViewer\n          value={\n            _.isObject(data) ? 'block.data must be a string for html blocks' : data || 'no content'\n          }\n          context={{\n            a({ href, title, target, children }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      );\n    }\n  }\n\n  return (\n    <WrapperFactory {...props} contentClassName={contentClassName} contentElem={contentElem} />\n  );\n};\n\nexport default HtmlBlock;\n","import React from 'react';\nimport { Image } from 'semantic-ui-react';\n\nconst ImageBlock = props => {\n  const { WrapperFactory, header = {}, data = '', config = {} } = props;\n\n  const style = {};\n  if (config.maxWidth) {\n    style.maxWidth = `${String(config.maxWidth)}px`;\n  }\n  if (config.maxHeight) {\n    style.maxHeight = `${String(config.maxHeight)}px`;\n  }\n\n  const contentElem = (\n    <div className={config.centered ? 'justify-center text-center' : ''}>\n      {header.title ? <div className=\"ImageBlock-title\">{header.title}</div> : null}\n\n      <Image\n        src={data}\n        alt={header.title || header.subtitle}\n        centered={config.centered}\n        fluid={config.fluid}\n        bordered={config.bordered}\n        style={style}\n      />\n\n      {header.subtitle ? <div className=\"ImageBlock-subtitle\">{header.subtitle}</div> : null}\n    </div>\n  );\n\n  return <WrapperFactory {...props} headerElem={null} contentElem={contentElem} />;\n};\n\nexport default ImageBlock;\n","import React from 'react';\nimport _ from 'lodash';\nimport { alert } from '@platform/utils/alert';\nimport cn from 'classnames';\nimport copy from 'copy-to-clipboard';\nimport pluralize from 'pluralize';\nimport PropTypes from 'prop-types';\n\nimport { faCaretDown } from '@fortawesome/pro-solid-svg-icons/faCaretDown';\nimport { faCaretRight } from '@fortawesome/pro-solid-svg-icons/faCaretRight';\nimport { faCopy } from '@fortawesome/pro-solid-svg-icons/faCopy';\n\nimport { Button, Icon } from '@core/ui';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\nimport { dereferenceSchema, isSchemaViewerEmpty } from '@platform/utils/schemas';\n\nimport mergeAllOf from 'json-schema-merge-allof';\n\nimport MarkdownViewer from '../MarkdownViewer';\nimport ErrorMessage from '../ErrorMessage';\n\nconst isCombiner = prop => {\n  return prop.anyOf || prop.oneOf ? true : false;\n};\n\nconst pickValidations = prop => {\n  const validations = {};\n  if (prop.enum && prop.enum.join) {\n    validations['Allowed Values'] = prop.enum.join(', ');\n  } else if (prop.enum) {\n    validations['Allowed Values'] = prop.enum;\n  } else if (prop.items && !_.isEmpty(prop.items.enum)) {\n    validations['Allowed Values'] = prop.items.enum.join(', ');\n  }\n\n  _.merge(\n    validations,\n    _.omit(\n      prop,\n      'title',\n      'description',\n      'type',\n      'enum',\n      'properties',\n      'items',\n      'additionalProperties',\n      '$ref',\n      '_active',\n      '_isOpen',\n      'required',\n      'xml',\n      'patternProperties',\n      '__inheritedFrom',\n      '__error'\n    )\n  );\n\n  return validations;\n};\n\nconst PropValidations = ({ className, prop }) => {\n  if (!isCombiner(prop)) {\n    const validations = pickValidations(prop);\n\n    const elems = [];\n    for (const k in validations) {\n      if (!Object.prototype.hasOwnProperty.call(validations, k)) {\n        continue;\n      }\n\n      let v = validations[k];\n\n      let type = typeof v;\n\n      if (k === 'default' && _.includes(['object', 'boolean'], type)) {\n        v = safeStringify(v);\n\n        type = typeof v;\n      }\n\n      if (type === 'object') {\n        continue;\n      } else if (type === 'boolean') {\n        elems.push(\n          <div key={k} className={className}>\n            <b>{k}:</b> {v.toString()}\n          </div>\n        );\n      } else {\n        elems.push(\n          <div key={k} className={className}>\n            <b>{k}:</b> {v}\n          </div>\n        );\n      }\n    }\n\n    if (elems.length) {\n      return elems;\n    }\n  }\n\n  return null;\n};\n\nconst validationText = prop => {\n  if (!isCombiner(prop)) {\n    const validationCount = Object.keys(pickValidations(prop)).length;\n\n    if (validationCount) {\n      return `${validationCount} ${pluralize('validation', validationCount)}`;\n    }\n  }\n\n  return '';\n};\n\nconst getProps = ({ parsed = {} }) => {\n  const target = parsed.items || parsed;\n\n  let props = target.properties || {};\n  if (target.patternProperties) {\n    if (props) {\n      props = _.merge(target.patternProperties, props);\n    } else {\n      props = target.patternProperties;\n    }\n  }\n\n  return props;\n};\n\nconst renderProp = ({\n  schemas,\n  level,\n  parentName,\n  rowElems,\n  propName,\n  prop,\n  required,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n  hideRoot,\n}) => {\n  const position = rowElems.length;\n  const name = propName;\n  const rowKey = jsonPath;\n\n  if (!prop) {\n    rowElems.push(\n      <div key={position} className={`text-negative py-2 JSV-row--${level}`}>\n        Could not render prop. Is it valid? If it is a $ref, does the $ref exist?\n      </div>\n    );\n    return rowElems;\n  }\n\n  let propType;\n  let childPropType;\n  let isBasic = false;\n  let expandable = false;\n  const expanded = _.has(expandedRows, rowKey)\n    ? expandedRows[rowKey]\n    : expandedRows.all || level <= defaultExpandedDepth;\n\n  if (prop.items) {\n    propType = prop.type;\n    if (prop.items.anyOf) {\n      childPropType = 'anyOf';\n    } else if (prop.items.oneOf) {\n      childPropType = 'oneOf';\n    } else if (prop.items.type) {\n      childPropType = prop.items.type;\n    }\n\n    propType = prop.type;\n    isBasic = true;\n\n    if (\n      prop.items.properties ||\n      prop.items.patternProperties ||\n      prop.items.oneOf ||\n      prop.items.anyOf\n    ) {\n      expandable = true;\n    }\n  } else if (prop.oneOf) {\n    propType = 'oneOf';\n    expandable = !_.isEmpty(prop.oneOf);\n  } else if (prop.anyOf) {\n    propType = 'anyOf';\n    expandable = !_.isEmpty(prop.anyOf);\n  } else {\n    propType = prop.type;\n    isBasic = prop.properties || prop.patternProperties || propType === 'object';\n\n    if (prop.properties || prop.patternProperties) {\n      expandable = true;\n    }\n  }\n\n  if (jsonPath === 'root') expandable = false;\n\n  let types = [];\n  if (_.isString(propType)) {\n    types = [propType];\n  } else {\n    types = propType;\n  }\n\n  let typeElems = [];\n  if (!_.isEmpty(types)) {\n    typeElems = types.reduce((acc, type, i) => {\n      acc.push(\n        <span key={i} className={`sl--${type}`}>\n          {type === 'array' && childPropType && childPropType !== 'array'\n            ? `array[${childPropType}]`\n            : type}\n        </span>\n      );\n\n      if (types[i + 1]) {\n        acc.push(\n          <span key={`${i}-sep`} className=\"c-muted\">\n            {' or '}\n          </span>\n        );\n      }\n\n      return acc;\n    }, []);\n  } else if (prop.$ref) {\n    typeElems.push(\n      <span key=\"prop-ref\" className=\"sl--ref\">\n        {`{${prop.$ref}}`}\n      </span>\n    );\n  } else if (prop.__error || isBasic) {\n    typeElems.push(\n      <span key=\"no-types\" className=\"c-negative\">\n        {prop.__error || 'ERROR_NO_TYPE'}\n      </span>\n    );\n  }\n\n  let requiredElem;\n\n  const vt = validationText(prop);\n  let showVt = !expanded && vt;\n\n  if (required || vt) {\n    requiredElem = (\n      <div>\n        {showVt ? <span className=\"JSV-validations text-muted\">{vt}</span> : null}\n        {showVt && required ? <span className=\"text-muted\"> + </span> : null}\n        {required ? <span className=\"JSV-required font-bold\">required</span> : null}\n      </div>\n    );\n  }\n\n  const showInheritedFrom = !hideInheritedFrom && !_.isEmpty(prop.__inheritedFrom);\n\n  if (!(hideRoot && jsonPath === 'root')) {\n    rowElems.push(\n      <div\n        key={position}\n        className={cn(`JSV-row JSV-row--${level} flex relative py-2`, {\n          'cursor-pointer': vt || expandable,\n          'is-expanded': expanded,\n          'is-required': required,\n          'has-validations': vt,\n        })}\n        onClick={() => {\n          if (vt || expandable) {\n            toggleExpandRow(rowKey, !expanded);\n          }\n        }}\n      >\n        {expandable ? (\n          <div className=\"JSV-rowExpander w-4 -ml-6 flex justify-center mt-1\">\n            <Icon icon={expanded ? faCaretDown : faCaretRight} />\n          </div>\n        ) : null}\n\n        <div className=\"flex-1\">\n          <div className=\"flex items-baseline\">\n            {name && name !== 'root' ? <div className=\"mr-3\">{name}</div> : null}\n\n            {!_.isEmpty(typeElems) && (\n              <div\n                className={cn('JSV-rowType', {\n                  'JSV-namelessType': !name,\n                })}\n              >\n                {typeElems}\n              </div>\n            )}\n          </div>\n\n          {!_.isEmpty(prop.description) ? (\n            <MarkdownViewer className=\"text-muted text-sm\" value={prop.description} />\n          ) : null}\n        </div>\n\n        {requiredElem || showInheritedFrom || expanded ? (\n          <div className=\"text-right text-sm pr-3 max-w-sm\">\n            {requiredElem}\n\n            {showInheritedFrom ? (\n              <div className=\"text-muted\">{`$ref:${prop.__inheritedFrom.name}`}</div>\n            ) : null}\n\n            {expanded && <PropValidations className=\"text-muted\" prop={prop} />}\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n\n  const properties = getProps({ parsed: prop });\n  const requiredElems = prop.items ? prop.items.required : prop.required;\n  const commonProps = {\n    schemas,\n    rowElems,\n    toggleExpandRow,\n    expandedRows,\n    defaultExpandedDepth,\n    forApiDocs,\n    parentName: name,\n    props: properties,\n    hideInheritedFrom,\n    jsonPath,\n    required: requiredElems || [],\n  };\n\n  if (expanded || jsonPath === 'root') {\n    if (properties && Object.keys(properties).length) {\n      rowElems = renderProps({\n        ...commonProps,\n        props: properties,\n        level: level + 1,\n      });\n    } else if (prop.items) {\n      if (prop.items.oneOf) {\n        rowElems = renderCombiner({\n          ...commonProps,\n          props: prop.items.oneOf,\n          level: level + 1,\n          defaultType: prop.items.type,\n        });\n      } else if (prop.items.anyOf) {\n        rowElems = renderCombiner({\n          ...commonProps,\n          props: prop.items.anyOf,\n          level: level + 1,\n          defaultType: prop.items.type,\n        });\n      }\n    } else if (prop.oneOf) {\n      rowElems = renderCombiner({\n        ...commonProps,\n        props: prop.oneOf,\n        level: level + 1,\n        defaultType: prop.type,\n      });\n    } else if (prop.anyOf) {\n      rowElems = renderCombiner({\n        ...commonProps,\n        props: prop.anyOf,\n        level: level + 1,\n        defaultType: prop.type,\n      });\n    }\n  }\n\n  return rowElems;\n};\n\nconst renderProps = ({\n  schemas,\n  level,\n  parentName,\n  rowElems,\n  props,\n  required,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n}) => {\n  for (const h in props) {\n    if (!Object.prototype.hasOwnProperty.call(props, h)) {\n      continue;\n    }\n\n    rowElems = renderProp({\n      schemas,\n      level,\n      parentName,\n      rowElems,\n      toggleExpandRow,\n      expandedRows,\n      defaultExpandedDepth,\n      forApiDocs,\n      propName: h,\n      prop: props[h],\n      required: _.includes(required, h),\n      hideInheritedFrom,\n      jsonPath: `${jsonPath}.${h}`,\n    });\n  }\n  return rowElems;\n};\n\nconst renderRowDivider = ({ key, level, text }) => {\n  return (\n    <div key={`${key}-d`} className={`JSV-divider--${level} h-10 flex items-center`}>\n      <div className=\"c-muted pr-3 uppercase text-sm\">{text}</div>\n      <div className=\"h-px bg-grey-light flex-1 mr-4\" />\n    </div>\n  );\n};\n\nconst renderCombiner = ({\n  schemas,\n  level,\n  parentName,\n  defaultType,\n  rowElems,\n  props,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n}) => {\n  for (const e in props) {\n    if (!Object.prototype.hasOwnProperty.call(props, e)) {\n      continue;\n    }\n\n    const elem = props[e];\n\n    if (!_.has(elem, 'type') && defaultType) {\n      _.set(elem, 'type', defaultType);\n    }\n\n    const key = `${parentName}-c-${level}-${e}`;\n\n    const nextLevel = level === 0 && (elem.properties || elem.items) ? 1 : level;\n    const commonProps = {\n      schemas,\n      parentName,\n      rowElems,\n      toggleExpandRow,\n      expandedRows,\n      defaultExpandedDepth,\n      level: nextLevel,\n      forApiDocs,\n      hideInheritedFrom,\n      jsonPath: `${jsonPath}.${e}`,\n    };\n\n    if (elem.properties) {\n      if (!elem.type) {\n        elem.type = 'object';\n      }\n      rowElems = renderProp({ ...commonProps, prop: elem });\n    } else if (elem.items) {\n      if (!elem.type) {\n        elem.type = 'array';\n      }\n      rowElems = renderProp({ ...commonProps, prop: elem });\n    } else {\n      rowElems = renderSchema({\n        ...commonProps,\n        schema: elem,\n        name: elem.properties || elem.items ? key : null,\n      });\n    }\n\n    if (props[parseInt(e) + 1]) {\n      rowElems.push(renderRowDivider({ key, level, text: 'or' }));\n    }\n  }\n\n  return rowElems;\n};\n\nconst renderSchema = ({\n  schemas,\n  schema,\n  level,\n  name,\n  rowElems,\n  toggleExpandRow,\n  expandedRows,\n  defaultExpandedDepth,\n  forApiDocs,\n  hideInheritedFrom,\n  jsonPath,\n  hideRoot,\n}) => {\n  let parsed = schema;\n\n  if (!parsed) {\n    return rowElems;\n  }\n\n  parsed = safeParse(parsed);\n  if (_.isEmpty(parsed)) {\n    return rowElems;\n  }\n\n  let nextLevel = level;\n  const commonProps = {\n    schemas,\n    rowElems,\n    toggleExpandRow,\n    expandedRows,\n    defaultExpandedDepth,\n    forApiDocs,\n    parentName: name,\n    propName: name,\n    required: _.includes(parsed.required || [], name),\n    hideInheritedFrom,\n    jsonPath,\n    hideRoot,\n  };\n\n  if (parsed.properties) {\n    const prop = {\n      ...parsed,\n      type: 'object',\n      description: parsed.description,\n    };\n\n    if (!hideInheritedFrom && parsed.__inheritedFrom) {\n      Object.assign(prop, _.pick(parsed, '__inheritedFrom'));\n    }\n\n    rowElems = renderProp({\n      ...commonProps,\n      level,\n      prop,\n    });\n  } else if (parsed.items) {\n    return renderProp({\n      ...commonProps,\n      level: nextLevel,\n      prop: parsed,\n    });\n  } else if (parsed.oneOf) {\n    return renderCombiner({\n      ...commonProps,\n      level: nextLevel,\n      props: parsed.oneOf,\n      defaultType: parsed.type,\n    });\n  } else if (parsed.anyOf) {\n    return renderCombiner({\n      ...commonProps,\n      level: nextLevel,\n      props: parsed.anyOf,\n      defaultType: parsed.type,\n    });\n  } else if (parsed.type) {\n    return renderProp({\n      ...commonProps,\n      level: nextLevel,\n      prop: parsed,\n    });\n  }\n\n  return rowElems;\n};\n\nclass JsonSchemaViewer extends React.Component {\n  static propTypes = {\n    name: PropTypes.string,\n    schemas: PropTypes.object,\n    schema: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    limitPropertyCount: PropTypes.number,\n    hideRoot: PropTypes.bool,\n    expanded: PropTypes.bool,\n\n    emptyText: PropTypes.string,\n    emptyClass: PropTypes.string,\n  };\n\n  state = {\n    showExtra: false,\n    expandedRows: {\n      all: false,\n    },\n    showCopied: false,\n  };\n\n  render() {\n    const {\n      name,\n      schema,\n      dereferencedSchema,\n      schemas = {},\n      limitPropertyCount,\n      hideRoot,\n      expanded,\n      defaultExpandedDepth = 1,\n      emptyText,\n      emptyClass = '',\n      forApiDocs,\n      hideInheritedFrom,\n    } = this.props;\n\n    const emptyElem = <div className=\"u-none c-muted\">{emptyText || 'No schema defined.'}</div>;\n\n    // an empty array or object is still a valid response, schema is ONLY really empty when a combiner type has no information\n    if (isSchemaViewerEmpty(schema)) {\n      return <div className={`${emptyClass}`}>{emptyElem}</div>;\n    }\n\n    let parsed = dereferencedSchema || schema;\n\n    try {\n      if (typeof parsed === 'string') {\n        parsed = safeParse(parsed);\n      }\n\n      if (!dereferencedSchema || _.isEmpty(dereferencedSchema)) {\n        parsed = dereferenceSchema(parsed, { definitions: schemas }, hideInheritedFrom);\n      }\n    } catch (e) {\n      console.error('JsonSchemaViewer dereference error', e);\n      return (\n        <ErrorMessage\n          error={`There is an error in your ${name} schema definition.`}\n          className=\"m-3\"\n        />\n      );\n    }\n\n    if (!parsed || !Object.keys(parsed).length) {\n      return emptyElem;\n    }\n\n    let rowElems;\n\n    const { expandedRows, showCopied } = this.state;\n    expandedRows.all = expanded;\n\n    try {\n      // resolve all allOfs\n      parsed = mergeAllOf(parsed, {\n        resolvers: {\n          defaultResolver: function(values, path, mergeSchemas, options) {\n            // Handle merging unknown properties\n            return _.merge(...values);\n          },\n        },\n      });\n\n      rowElems = renderSchema({\n        schemas,\n        expandedRows,\n        defaultExpandedDepth,\n        forApiDocs,\n        schema: parsed,\n        level: hideRoot && (parsed.type === 'object' || parsed.hasOwnProperty('allOf')) ? -1 : 0,\n        name: 'root',\n        rowElems: [],\n        toggleExpandRow: this.toggleExpandRow,\n        hideInheritedFrom,\n        jsonPath: 'root',\n        hideRoot,\n      });\n    } catch (e) {\n      console.error('JSV:error', e);\n      rowElems = <ErrorMessage error={e.message} className=\"m-3\" />;\n    }\n\n    const { showExtra } = this.state;\n    const propOverflowCount = rowElems.length - limitPropertyCount;\n\n    if (limitPropertyCount) {\n      if (!showExtra && propOverflowCount > 0) {\n        rowElems = _.dropRight(rowElems, propOverflowCount);\n      }\n    }\n\n    if (_.isEmpty(rowElems)) {\n      return emptyElem;\n    }\n\n    return (\n      <div className=\"JSV us-t u-schemaColors\">\n        {rowElems}\n\n        {showExtra || propOverflowCount > 0 ? (\n          <div\n            className={cn('JSV-toggleExtra', { 'is-on': showExtra })}\n            onClick={this.toggleShowExtra}\n          >\n            {showExtra ? 'collapse' : `...show ${propOverflowCount} more properties`}\n          </div>\n        ) : null}\n\n        <div className=\"JSV-copyToClipboard\">\n          <Button\n            disabled={showCopied}\n            title=\"Copy to clipboard\"\n            className={cn('mt-1/2 mr-1/2', { 'pr-1': !showCopied })}\n            icon={showCopied || faCopy}\n            onClick={this.copy}\n            transparent\n          >\n            {showCopied && 'Copied!'}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  toggleShowExtra = () => {\n    const { showExtra } = this.state;\n    this.setState({ showExtra: showExtra ? false : true });\n  };\n\n  toggleExpandRow = (rowKey, expanded) => {\n    const { expandedRows } = this.state;\n    const update = {};\n    update[rowKey] = expanded;\n    this.setState({ expandedRows: Object.assign({}, expandedRows, update) });\n  };\n\n  copy = () => {\n    try {\n      copy(JSON.stringify(this.props.schema, undefined, 2));\n      this.setState({ showCopied: true });\n      setTimeout(() => this.setState({ showCopied: false }), 2000);\n    } catch (e) {\n      alert.error(`Cannot copy to clipboard: ${e.message}`);\n    }\n  };\n}\n\nexport default JsonSchemaViewer;\n","import React from 'react';\nimport JsonSchemaViewer from '@platform/components/JsonSchemaViewer';\n\nclass JsonSchemaBlock extends React.Component {\n  getSchema = () => {\n    const { data = {}, dereferencedBlock = {} } = this.props;\n    return dereferencedBlock.data || data;\n  };\n\n  render = () => {\n    const { WrapperFactory, config = {} } = this.props;\n    const schema = this.getSchema();\n\n    const contentElem = (\n      <JsonSchemaViewer\n        schema={schema}\n        dereferencedSchema={schema}\n        hideRoot={config.hideRoot}\n        hideInheritedFrom\n        defaultExpandedDepth={config.expandedDepth || 0}\n      />\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  };\n}\n\nexport default JsonSchemaBlock;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport Block from '../Block/viewer';\n\nconst RefBlock = props => {\n  const { WrapperFactory, data = {}, block = {}, dereferencedBlock = {}, editor, parsed } = props;\n\n  const blockId = _.replace(data.$ref, '#/blocks/', '');\n  const refBlock = _.find(editor.connectedBlocks, { id: blockId }) || {};\n  const refBlockDeref = _.cloneDeep(_.get(parsed, ['blocks', blockId], {}));\n\n  refBlock.input = _.unionBy(block.input, refBlock.input, 'name');\n  refBlockDeref.input = _.unionBy(dereferencedBlock.input, refBlockDeref.input, 'name');\n\n  const contentElem = <Block {...props} block={refBlock} dereferencedBlock={refBlockDeref} />;\n\n  return <WrapperFactory contentElem={contentElem} />;\n};\n\nexport default observer(RefBlock);\n","import React from 'react';\nimport { inject } from 'mobx-react';\nimport _ from 'lodash';\nimport { registerLogger } from '@platform/utils/logging';\nconst log = registerLogger('components', 'JsonPathCacheParentContainer');\n\nconst JsonPathCacheParentContainer = (props = {}) => BaseComponent => {\n  const {\n    cacheKey,\n    cacheKeyProp,\n    basePath,\n    basePathProp,\n    path,\n    pathProp,\n    children,\n    childrenProp,\n  } = props;\n\n  class JsonPathCacheParent extends React.Component {\n    componentWillMount() {\n      this.registerChildren(this.props);\n    }\n\n    componentWillReceiveProps(nextProps) {\n      const data = this.props.jsonPathContainerData || {};\n      const nextData = nextProps.jsonPathContainerData || {};\n\n      if (\n        !_.isEqual(data.cacheKey, nextData.cacheKey) ||\n        !_.isEqual(data.basePath, nextData.basePath) ||\n        !_.isEqual(data.path, nextData.path) ||\n        !_.isEqual(_.size(data.children), _.size(nextData.children))\n      ) {\n        this.registerChildren(nextProps);\n      }\n    }\n\n    // sets up the cache for all the child blocks, so that we have their keys in\n    // advance to use\n    registerChildren(props) {\n      const { jsonPathContainerData = {} } = props;\n      const { store, cacheKey, basePath, path, children } = jsonPathContainerData;\n\n      store.registerChildren({\n        cacheKey,\n        basePath,\n        path,\n        children,\n      });\n    }\n\n    render() {\n      const { jsonPathContainerData = {}, ...baseProps } = this.props;\n      const { store, cacheKey, basePath, path } = jsonPathContainerData;\n\n      const childCacheIds = store.getChildrenCacheIds({ cacheKey, basePath, path });\n\n      log.debug(`passing childCacheIds to ${BaseComponent.displayName}`, childCacheIds, {\n        cacheKey,\n        basePath,\n        path,\n      });\n\n      return <BaseComponent {...baseProps} childCacheIds={childCacheIds} />;\n    }\n  }\n\n  return inject(({ jsonPathCache }, props) => {\n    const ck = cacheKey || _.get(props, cacheKeyProp);\n    const bp = basePath || _.get(props, basePathProp);\n    const p = path || _.get(props, pathProp);\n    const c = children || _.get(props, childrenProp);\n\n    return {\n      jsonPathContainerData: {\n        store: jsonPathCache,\n        cacheKey: ck,\n        basePath: bp,\n        path: p,\n        children: c,\n      },\n    };\n  })(JsonPathCacheParent);\n};\n\nexport default JsonPathCacheParentContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport Block from '../Block/viewer';\n\nconst log = registerLogger('components', 'HubBlockList');\n\nclass HubBlockList extends React.Component {\n  static propTypes = {\n    store: PropTypes.object.isRequired,\n    blocks: PropTypes.array,\n    blockDereferenced: PropTypes.array,\n    parentPath: PropTypes.array, // json path to parent in tree\n    basePath: PropTypes.string, // base url path\n    relativePath: PropTypes.string, // relative url path (everything between basePath and the page we are on)\n    cache: PropTypes.object,\n    updateCache: PropTypes.func,\n    blockProps: PropTypes.object, // props to pass onto underlying blocks\n  };\n\n  blockPath = index => {\n    return this.props.parentPath.concat(['blocks', index]);\n  };\n\n  renderBlock = ({ id, block, index }) => {\n    const {\n      store,\n      blocks = [],\n      blocksDereferenced = [],\n      basePath,\n      relativePath,\n      blockProps = {},\n      slugger,\n    } = this.props;\n\n    const blockLength = _.size(blocks);\n    const isLast = parseInt(index) >= blockLength - 1;\n\n    return (\n      <Block\n        {...blockProps}\n        key={index}\n        id={id}\n        editor={store} // DEPRECATED\n        store={store}\n        block={block}\n        blockDereferenced={blocksDereferenced[index]}\n        blockIndex={index}\n        blockPath={this.blockPath(index)}\n        isLast={isLast}\n        isSolo={blockLength <= 1}\n        basePath={basePath}\n        relativePath={relativePath}\n        slugger={slugger}\n      />\n    );\n  };\n\n  render() {\n    const {\n      className,\n      blocks = [],\n      childCacheIds = [],\n      parentPath,\n      basePath,\n      relativePath,\n      blockProps,\n    } = this.props;\n\n    log.debug('Render', { blocks, parentPath, basePath, relativePath, blockProps });\n\n    let contentElems = [];\n\n    _.forEach(blocks, (block, index) => {\n      const id = childCacheIds[index];\n      contentElems.push(this.renderBlock({ id, block, index }));\n    });\n\n    return <div className={cn('HubBlockList', className)}>{contentElems}</div>;\n  }\n}\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'store.id',\n  basePathProp: 'parentPath',\n  path: ['blocks'],\n  childrenProp: 'blocks',\n})(HubBlockList);\n","import _ from 'lodash';\n\nexport const getActiveTab = props => {\n  const { data, cache = {}, childCacheIds = [], blockPath = [] } = props;\n\n  const { children = [] } = data;\n  let activeIndex = Math.max(_.indexOf(childCacheIds, cache.activeTabId || 0), 0);\n  const activeTab = children[activeIndex] || {};\n\n  return {\n    id: childCacheIds[activeIndex],\n    index: activeIndex,\n    path: blockPath.concat(['data', 'children', activeIndex]),\n    ...activeTab,\n  };\n};\n\nexport const handleChangeTab = ({ id, updateCache }) => {\n  updateCache('set', ['activeTabId'], id);\n};\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\nimport { Menu } from 'semantic-ui-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport BlockList from '../BlockList/viewer';\n\nimport { getActiveTab, handleChangeTab } from './index';\n\nclass TabsBlock extends React.Component {\n  getActiveTab = () => {\n    return getActiveTab(this.props);\n  };\n\n  handleChangeTab = (e, { name }) => {\n    const { updateCache } = this.props;\n    handleChangeTab({ id: name, updateCache });\n  };\n\n  renderTabs = () => {\n    const { data = {}, childCacheIds, cache = {} } = this.props;\n    const { children = [] } = data;\n\n    if (!childCacheIds) {\n      return null;\n    }\n\n    const leftItems = [];\n\n    const tabs = _.map(children, (tab, index) => {\n      const id = childCacheIds[index];\n\n      return (\n        <Menu.Item\n          key={id}\n          name={id}\n          content={tab.title}\n          className=\"HubBlock-tab hover:text-active\"\n          active={cache.activeTabId ? id === cache.activeTabId : Number(index) === 0}\n          onClick={this.handleChangeTab}\n        />\n      );\n    });\n\n    const rightItems = [];\n\n    return leftItems.concat(tabs, rightItems);\n  };\n\n  render() {\n    const {\n      WrapperFactory,\n      editor,\n      cache,\n      updateCache,\n      basePath,\n      relativePath,\n      isNested,\n      slugger,\n    } = this.props;\n\n    const activeTab = this.getActiveTab();\n    const { blocks = [] } = activeTab;\n\n    const contentElem = [];\n    contentElem.push(\n      <Menu\n        key=\"ti\"\n        attached=\"top\"\n        className=\"HubBlock-tabs\"\n        secondary={!isNested}\n        pointing={!isNested}\n        size={isNested ? 'tiny' : undefined}\n      >\n        {this.renderTabs()}\n      </Menu>\n    );\n\n    if (activeTab.id) {\n      contentElem.push(\n        <div key=\"tc\" className=\"HubBlock-tab-content\">\n          <BlockList\n            store={editor}\n            blocks={blocks}\n            parentPath={activeTab.path}\n            basePath={basePath}\n            relativePath={relativePath}\n            cache={cache}\n            updateCache={updateCache}\n            blockProps={{ isNested: true }}\n            slugger={slugger}\n          />\n        </div>\n      );\n    }\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  }\n}\n\nTabsBlock.displayName = 'HubTabsBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(TabsBlock));\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\n\nimport BlockList from '../BlockList/viewer';\n\nclass ContainerBlock extends React.Component {\n  render() {\n    const {\n      WrapperFactory,\n      editor,\n      cache,\n      updateCache,\n      basePath,\n      relativePath,\n      data,\n      blockPath,\n      slugger,\n    } = this.props;\n\n    const contentElem = [];\n    contentElem.push(\n      <div key=\"tc\" className=\"HubBlock-tab-content\">\n        <BlockList\n          store={editor}\n          blocks={data.blocks || []}\n          parentPath={blockPath.concat('data')}\n          basePath={basePath}\n          relativePath={relativePath}\n          cache={cache}\n          updateCache={updateCache}\n          blockProps={{ isNested: true }}\n          slugger={slugger}\n        />\n      </div>\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  }\n}\n\nContainerBlock.displayName = 'HubContainerBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(ContainerBlock));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport MarkdownViewer from '@platform/components/MarkdownViewer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\n\nimport { safeStringify } from '@platform/utils/json';\n\nconst TextBlock = props => {\n  const { WrapperFactory, header, data, editor } = props;\n\n  const { token, title } = header || {};\n\n  let headerElem;\n  if (token || title) {\n    headerElem = (\n      <div className=\"TextBlock-header\">\n        <div className=\"flex flex-wrap items-center\">\n          {token ? (\n            <div className={`TextBlock-header-token token--${_.toLower(token)}`}>{token}</div>\n          ) : null}\n\n          {title ? <h1 className=\"TextBlock-header-title wb-bw\">{title}</h1> : null}\n        </div>\n      </div>\n    );\n  }\n\n  let contentElem;\n\n  // Don't render if undefined or null\n  if (!_.isNil(data)) {\n    // Only render data as object if it contains an error\n    if (typeof data === 'object') {\n      if (data.__error) {\n        contentElem = <ErrorMessage error={data.__error} />;\n      }\n    } else {\n      contentElem = (\n        <MarkdownViewer\n          value={data}\n          context={{\n            a({ href }) {\n              const props = {};\n\n              // pass internal paths through the store's buildViewPath function\n              if (editor && (_.startsWith(href, '/') || _.startsWith(href, '#'))) {\n                props.href = editor.buildViewPath(href);\n              }\n\n              return props;\n            },\n          }}\n        />\n      );\n    }\n  }\n\n  return <WrapperFactory {...props} headerElem={headerElem} contentElem={contentElem} />;\n};\n\nexport default TextBlock;\n","import React from 'react';\nimport _ from 'lodash';\n\nfunction customizer(objValue, othValue) {\n  if (_.isFunction(objValue) || _.isFunction(othValue)) {\n    return true;\n  }\n}\n\n// Use skipFunctions with care! It's easy to create subtle bugs.\nfunction deepCompare({ skipFunctions, debug } = {}) {\n  return WrappedComponent => {\n    return class extends React.Component {\n      componentWillMount = () => {\n        if (debug) {\n          console.log('deepCompare.componentWillMount', this.props);\n        }\n      };\n\n      shouldComponentUpdate = nextProps => {\n        let same;\n        if (skipFunctions) {\n          same = _.isEqualWith(this.props, nextProps, customizer);\n        } else {\n          same = _.isEqual(this.props, nextProps);\n        }\n\n        if (debug) {\n          console.log('deepCompare.shouldComponentUpdate?', !same, this.props, nextProps);\n        }\n\n        return !same;\n      };\n\n      render = () => {\n        return <WrappedComponent {...this.props} />;\n      };\n    };\n  };\n}\n\nexport default deepCompare;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { shallowEqual } from '../json';\n\nfunction pureCompare({ skipFunctions = true, debug } = {}) {\n  return WrappedComponent => {\n    return class extends React.Component {\n      componentWillMount = () => {\n        if (debug) {\n          console.log('pureCompare.componentWillMount', this.props);\n        }\n      };\n\n      shouldComponentUpdate = nextProps => {\n        const same = shallowEqual(this.props, nextProps);\n\n        if (debug) {\n          console.log('pureCompare.shouldComponentUpdate?', !same, this.props, nextProps);\n          const props = _.uniq(_.keys(this.props).concat(_.keys(nextProps)));\n          for (const p of props) {\n            if (this.props[p] === nextProps[p]) {\n              console.log(p, 'isEqual');\n            } else {\n              console.log(p, 'isNotEqual', this.props[p], nextProps[p]);\n            }\n          }\n          console.log('pureCompare.shouldComponentUpdate.end');\n        }\n\n        return !same;\n      };\n\n      render = () => {\n        return <WrappedComponent {...this.props} />;\n      };\n    };\n  };\n}\n\nexport default pureCompare;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport { deepCompare } from '@platform/utils/hoc';\nimport { Label } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\nimport FormDropdown from '../FormDropdown';\n\n// import './styles.styl';\n\nclass FormSelect extends React.Component {\n  onChange = (e, option) => {\n    const { input = {}, onChange } = this.props;\n\n    if (input.onChange) {\n      input.onChange(onChange ? onChange(option.value, option) : option.value, option);\n    } else if (onChange) {\n      onChange(option.value, option);\n    }\n  };\n\n  render() {\n    const {\n      value,\n      input = {},\n      big,\n      size,\n      loc,\n      defaultValue = '',\n      className = '',\n      label,\n      tip,\n      required,\n      fluid,\n      options = [],\n      multiple,\n      allowAdditions,\n      search,\n      placeholder,\n      inline,\n      disabled,\n      readOnly,\n    } = this.props;\n\n    if (!_.isEmpty(input)) {\n      console.warn(\"Depricating prop 'input' in <FormSelect />\");\n    }\n\n    const classNames = ['FormSelect'];\n\n    if (big || ((size && size === 'big') || size === 'large')) {\n      classNames.push('is-big');\n    } else if (size) {\n      classNames.push(`is-${size}`);\n    }\n\n    if (loc) {\n      classNames.push(`is-${loc}`);\n    }\n\n    let v = input.value || value || defaultValue;\n    let computedOptions = options;\n    if (multiple) {\n      // remove null / undefined values, and always make sure current values are part of options\n      // use without instead of compact to keep zero values\n      v = _.without(_.isArray(v) ? v : [v], false, null, '', undefined, NaN);\n      computedOptions = _.uniq(\n        computedOptions.concat(\n          _.map(v, v2 => ({\n            text: v2,\n            value: v2,\n          }))\n        )\n      );\n    }\n\n    let labelElem;\n    let isFixedWidth;\n\n    if (_.isObject(label)) {\n      isFixedWidth = label.className === 'Label-fw';\n\n      labelElem = <Label {...label} className={cn(label.className, 'flex-1')} />;\n    } else {\n      labelElem = <FormInputLabel inline={inline} label={label} required={required} tip={tip} />;\n    }\n\n    return (\n      <div\n        className={cn(\n          'FormSelect',\n          className,\n          isFixedWidth ? 'flex items-center' : 'flex',\n          inline ? 'is-inline items-center' : 'flex-col'\n        )}\n      >\n        {labelElem}\n\n        <div className=\"flex-1\">\n          <FormDropdown\n            selection\n            fluid={fluid}\n            options={computedOptions}\n            multiple={multiple}\n            allowAdditions={allowAdditions}\n            search={search}\n            placeholder={placeholder}\n            disabled={disabled}\n            readOnly={readOnly}\n            {...input}\n            className={classNames.join(' ')}\n            value={v}\n            onChange={this.onChange}\n            clearSearchOnSelect\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default deepCompare()(FormSelect);\n","import React from 'react';\nimport _ from 'lodash';\n\nconst defaultConvertToTarget = value => value;\nconst defaultConvertFromTarget = value => value;\n\nconst DebounceContainer = (props = {}) => BaseComponent => {\n  const {\n    convertForTarget = defaultConvertToTarget,\n    convertFromTarget = defaultConvertFromTarget,\n    targetPropName = 'value',\n  } = props;\n\n  class Debouncer extends React.Component {\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        value: convertForTarget(props.value, props),\n        externalValue: props.value,\n      };\n\n      this.persistChange = _.debounce(this.persistChange, 1000);\n    }\n\n    componentWillUpdate(nextProps, nextState) {\n      this.onExternalValueChange(nextProps, nextState);\n    }\n\n    componentWillUnmount() {\n      if (this.persistChange) {\n        this.persistChange.flush();\n      }\n    }\n\n    onExternalValueChange = (props, state) => {\n      if (state.internal) {\n        state.internal = false;\n      } else if (!_.isEqual(props.value, state.externalValue)) {\n        state.value = convertForTarget(props.value, props);\n        state.externalValue = props.value;\n      }\n    };\n\n    _persistChange = (value, options) => {\n      const { onChange } = this.props;\n\n      const nextVal = convertFromTarget(value, Object.assign({}, this.props));\n\n      this.setState({\n        value,\n        internal: true,\n        externalValue: nextVal,\n      });\n\n      if (onChange) {\n        onChange({ value: nextVal, options });\n      }\n    };\n\n    persistChange = (value, options) => {\n      this._persistChange(value, options);\n    };\n\n    onChange = (value, options = {}) => {\n      this.setState({\n        value,\n        internal: true,\n      });\n\n      if (options.immediate) {\n        this._persistChange(value, options);\n      } else {\n        this.persistChange(value, options);\n      }\n    };\n\n    render() {\n      const { value } = this.state || {};\n\n      const computedProps = {\n        [targetPropName]: value,\n      };\n\n      return <BaseComponent {...this.props} {...computedProps} onChange={this.onChange} />;\n    }\n  }\n\n  return Debouncer;\n};\n\nexport default DebounceContainer;\n","import React from 'react';\n\nimport DebounceContainer from '../DebounceContainer';\n\nlet CodeMirror;\nif (typeof window !== 'undefined' && window.localStorage) {\n  CodeMirror = require('../CodeMirror').default;\n}\n\nlet SimpleMDE;\nif (typeof window !== 'undefined' && window.localStorage) {\n  SimpleMDE = require('./editor').default;\n}\n\nconst SimpleMDEWrapper = props => {\n  return SimpleMDE ? (\n    <SimpleMDE codeMirrorInstance={CodeMirror} minHeight=\"0px\" {...props} />\n  ) : null;\n};\n\nexport default DebounceContainer()(SimpleMDEWrapper);\n\n// import React from 'react';\n// import dynamic from 'next/dynamic';\n\n// import DebounceContainer from '../DebounceContainer';\n// import PageLoading from '../PageLoading';\n// import CodeMirror from '../CodeMirror';\n\n// const SimpleMDE = dynamic(import('./editor'), { ssr: false, loading: () => <PageLoading /> });\n\n// const SimpleMDEWrapper = props => {\n//   return (\n//     <CodeMirror\n//       render={codeMirrorInstance => {\n//         return <SimpleMDE codeMirrorInstance={codeMirrorInstance} minHeight=\"0px\" {...props} />;\n//       }}\n//     />\n//   );\n// };\n\n// export default DebounceContainer()(SimpleMDEWrapper);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport SimpleMdEditor from '../SimpleMdEditor';\n\nconst log = registerLogger('components', 'MarkdownEditor');\n\nlog.info('Load');\n\nclass MarkdownEditor extends React.Component {\n  static propTypes = {\n    value: PropTypes.string,\n    className: PropTypes.string,\n    placeholder: PropTypes.string,\n    onChange: PropTypes.func.isRequired,\n    preview: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    spellCheck: PropTypes.bool,\n    toolbarHidden: PropTypes.bool,\n    toolbarOnFocus: PropTypes.bool,\n    size: PropTypes.oneOf(['large', 'medium', 'small']),\n  };\n\n  onChange = value => {\n    this.props.onChange(value);\n  };\n\n  render() {\n    const {\n      id,\n      className,\n      borderless,\n      size,\n      value = '',\n      preview = false,\n      onChange,\n      ...editorProps\n    } = this.props;\n\n    log.debug('Render', { value });\n\n    return (\n      <div\n        className={cn('MarkdownEditor', className, {\n          [`is-${size}`]: size,\n          'is-borderless': borderless,\n        })}\n      >\n        <SimpleMdEditor\n          id={id}\n          placeholder=\"Write markdown here...\"\n          value={value}\n          onChange={({ value: newValue }) => {\n            if (value !== newValue) {\n              onChange(newValue);\n            }\n          }}\n          preview={preview}\n          {...editorProps}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MarkdownEditor;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button } from 'semantic-ui-react';\n\nimport FormInput from '../FormInput';\nimport FormSelect from '../FormSelect';\nimport MarkdownEditor from '../MarkdownEditor';\n\nconst typeOptions = [\n  { text: 'HTTP', value: 'http' },\n  { text: 'Script', value: 'script' },\n  { text: 'Reference', value: 'ref' },\n  // {text: 'Lambda', value: 'lambda'},\n];\n\nfunction StepTypeSelector({ typeWhitelist, ...extraProps }) {\n  const options = [];\n  for (const o of typeOptions) {\n    if (_.isEmpty(typeWhitelist) || typeWhitelist[o.value]) {\n      options.push(o);\n    }\n  }\n\n  return (\n    <FormSelect options={options} defaultValue=\"http\" placeholder=\"choose one\" {...extraProps} />\n  );\n}\n\nconst createScriptFromHTTP = (before, after) => {\n  let script = '';\n\n  if (!_.isEmpty(before)) {\n    const beforeReg = new RegExp('// COPIED FROM BEFORE SCRIPT');\n    if (!beforeReg.test(before)) {\n      script = '// COPIED FROM BEFORE SCRIPT \\n';\n    }\n\n    script = `${script} ${before} \\n`;\n  }\n\n  if (!_.isEmpty(after)) {\n    const afterReg = new RegExp('// COPIED FROM AFTER SCRIPT');\n    if (!afterReg.test(after)) {\n      script = `${script} \\n // COPIED FROM AFTER SCRIPT \\n`;\n    }\n\n    script = `${script} ${after} \\n`;\n  }\n\n  return script;\n};\n\nconst StepBasics = props => {\n  const { ui, updateUi, step = {}, onChange, typeWhitelist = [], readOnly } = props;\n\n  return (\n    <div className=\"StepBasics\">\n      <div className=\"flex\">\n        <div className=\"StepBasics-docs\">\n          <Button\n            basic={!ui.docsOpen}\n            secondary={ui.docsOpen || !_.isEmpty(step.description)}\n            icon=\"book\"\n            onClick={() => {\n              updateUi('set', 'docsOpen', !ui.docsOpen);\n            }}\n          />\n        </div>\n\n        <StepTypeSelector\n          typeWhitelist={typeWhitelist}\n          disabled={readOnly}\n          value={step.type}\n          onChange={value => {\n            if (value === step.type) {\n              return;\n            }\n\n            const before = _.get(step, 'before.script', '');\n            const after = _.get(step, 'after.script', '');\n            const script = _.get(step, 'input.script', '');\n\n            if (step.type === 'script' && value !== 'script' && !_.isEmpty(script)) {\n              let newAfterScript = script;\n              if (!_.isEmpty(after)) {\n                newAfterScript = `${after} \\n ${script}`;\n              }\n\n              onChange('set', ['after', 'script'], newAfterScript);\n            }\n\n            onChange('set', ['type'], value);\n            switch (value) {\n              case 'http':\n                onChange('set', ['input'], { method: 'get', url: '' });\n                break;\n              case 'script':\n                onChange('set', ['input'], {\n                  script: createScriptFromHTTP(before, after),\n                });\n                onChange('unset', ['before']);\n                onChange('unset', ['after']);\n                break;\n              case 'ref':\n                onChange('set', ['input'], { ref: '' });\n                onChange('unset', ['before', 'assertions']);\n                onChange('unset', ['after', 'assertions']);\n                break;\n              default:\n                break;\n            }\n          }}\n        />\n\n        <FormInput\n          className=\"flex-1 ml-2\"\n          placeholder=\"step name\"\n          input={{\n            value: _.get(step, 'name', ''),\n            onChange(e) {\n              onChange('set', ['name'], e.target.value);\n            },\n            readOnly,\n          }}\n          fluid\n        />\n      </div>\n\n      {ui.docsOpen ? (\n        <div className=\"mt-4\">\n          <MarkdownEditor\n            className=\"StepBasics-notes\"\n            placeholder=\"Optional step notes...\"\n            value={_.get(step, 'description', '')}\n            readOnly={readOnly}\n            onChange={markdownVal => {\n              onChange('set', ['description'], markdownVal);\n            }}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }) => ({\n  ...appStore.injectUi('basics-step'),\n}))(observer(StepBasics));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { Icon } from 'semantic-ui-react';\nimport cn from 'classnames';\n\nconst EditorContentSection = props => {\n  const { title, canToggle = true, children, ui, updateUi } = props;\n\n  const classNames = cn('EditorContentSection', {\n    'can-toggle': canToggle,\n    'is-closed': ui.isClosed,\n  });\n\n  return (\n    <div className={classNames}>\n      {title ? (\n        <div\n          className=\"EditorContentSection-header flex items-center\"\n          onClick={() => {\n            if (canToggle) {\n              updateUi('set', 'isClosed', !ui.isClosed);\n            }\n          }}\n        >\n          <div className=\"EditorContentSection-title flex-1\">\n            <div className=\"EditorContentSection-title-inner\">\n              <Icon name={`caret ${ui.isClosed ? 'right' : 'down'}`} />\n              {title}\n              <Icon name={`caret ${ui.isClosed ? 'left' : 'down'}`} />\n            </div>\n          </div>\n        </div>\n      ) : null}\n\n      {!ui.isClosed ? <div className=\"EditorContentSection-content\">{children}</div> : null}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`${id}:EditorContentSection`),\n}))(observer(EditorContentSection));\n","let workerInstance;\n\nif (typeof window !== 'undefined') {\n  const createWorker = require('../workers').createWorker;\n  const worker = require('./lineNumbers.worker.js');\n  workerInstance = createWorker(worker());\n}\n\nexport default workerInstance;\n","export const modeObjs = {\n  c: 'text/x-csrc',\n  cpp: 'text/x-c++src',\n  csharp: 'text/x-csharp',\n  css: 'text/css',\n  go: 'text/x-go',\n  html: 'text/html',\n  http: 'message/http',\n  java: 'text/x-java',\n  js: 'text/javascript',\n  json: 'application/json',\n  jsx: 'text/jsx',\n  markdown: 'text/x-markdown',\n  objectivec: 'text/x-objectivec',\n  perl: 'text/x-perl',\n  php: 'text/x-php',\n  python: 'text/x-python',\n  ruby: 'text/x-ruby',\n  scala: 'text/x-scala',\n  shell: 'text/x-sh',\n  sql: 'text/x-sql',\n  swift: 'text/x-swift',\n  xml: 'application/xml',\n  yaml: 'text/x-yaml',\n};\n\nexport const modeOptions = [\n  { text: 'C', value: 'c' },\n  { text: 'C++', value: 'cpp' },\n  { text: 'C#', value: 'csharp' },\n  { text: 'CSS', value: 'css' },\n  { text: 'Go', value: 'go' },\n  { text: 'HTML', value: 'html' },\n  { text: 'HTTP', value: 'http' },\n  { text: 'Java', value: 'java' },\n  { text: 'JavaScript', value: 'js' },\n  { text: 'JSON', value: 'json' },\n  { text: 'JSX', value: 'jsx' },\n  { text: 'Markdown', value: 'markdown' },\n  { text: 'Objective-C', value: 'objectivec' },\n  { text: 'Perl', value: 'perl' },\n  { text: 'PHP', value: 'php' },\n  { text: 'Python', value: 'python' },\n  { text: 'Ruby', value: 'ruby' },\n  { text: 'Scala', value: 'scala' },\n  { text: 'Shell', value: 'shell' },\n  { text: 'SQL', value: 'sql' },\n  { text: 'Swift', value: 'swift' },\n  { text: 'XML', value: 'xml' },\n  { text: 'YAML', value: 'yaml' },\n];\n","import Browser from 'bowser';\n\nexport const currentBrowser = Browser;\n\nexport const check = ({ browsers = {}, userAgent } = {}) => {\n  return Browser.check(browsers, userAgent);\n};\n\nexport const browser = ({ userAgent } = {}) => {\n  return Browser._detect(userAgent);\n};\n\n/**\n * Minimum browser version supported\n * If a browser is not listed then all its versions are supported\n * To test this, just change the minimum version to one higher than yours\n */\nexport const supportedBrowsers = () => {\n  return {\n    chrome: '50',\n    firefox: '45',\n    msie: '12', // IE 12 doesn't exist so we aren't supporting and IE versions\n    msedge: '14',\n    safari: '10',\n    opera: '32',\n  };\n};\n\nexport const isSupportedBrowser = ({ userAgent } = {}) => {\n  const re = new RegExp('electron', 'i');\n  const isElectron = re.test(userAgent);\n\n  return isElectron || !Browser.isUnsupportedBrowser(supportedBrowsers(), userAgent);\n};\n","/* eslint-disable */\n\n// adapted from\n// https://github.com/JedWatson/react-codemirror/blob/930600810e5ceb4ad426a66098ecf1404d9e32c3/src/Codemirror.js\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\nimport _ from 'lodash';\n\nimport LineNumberWorker from '@platform/utils/json/lineNumbers-worker';\n\nconst findDOMNode = ReactDOM.findDOMNode;\n\nfunction normalizeLineEndings(str) {\n  if (!str) return str;\n  return str.replace(/\\r\\n|\\r/g, '\\n');\n}\n\nconst setterFunc = () => {};\n_.set(setterFunc, 'prototype.displayText', 'set(key: String, val: any) OR set(val: any)');\n\nconst getterFunc = () => {};\n_.set(getterFunc, 'prototype.displayText', 'get(key: String) OR get()');\n\nconst buildRequest = (root, scopes) => {\n  let displayText;\n\n  if (!root && scopes.step) {\n    displayText = 'input    : The HTTP request this step will send.';\n  } else if (scopes.proxy) {\n    displayText =\n      'request  : The incoming HTTP request, before it is proxied to your upstream URL.';\n  } else {\n    displayText =\n      'request  : The incoming HTTP request. Only applicable when triggering the collection from URL.';\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n\n    method: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    url: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    body: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    headers: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    set: setterFunc,\n    get: getterFunc,\n  };\n\n  return obj;\n};\n\nconst buildResponse = (root, scopes) => {\n  let displayText;\n\n  if (!root && scopes.step) {\n    displayText = 'output   : The HTTP response returned from the request sent in this step.';\n  } else if (scopes.proxy) {\n    displayText = 'response : The HTTP response. This is sent back to the downstream consumer.';\n  } else {\n    displayText =\n      'response : The HTTP response. Only applicable when triggering the collection from URL.';\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n\n    status: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    body: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    headers: {\n      get: getterFunc,\n      set: setterFunc,\n    },\n    set: setterFunc,\n    get: getterFunc,\n  };\n\n  return obj;\n};\n\nconst buildDoubleDollar = scopes => {\n  let displayText;\n  let envDisplayText;\n\n  if (scopes.proxy) {\n    displayText = '$$       : Properties and functions to work with the current HTTP request.';\n    envDisplayText = \"env      : The instance's current environment properties.\";\n  } else {\n    displayText = '$$       : Properties and functions to work with the current collection run.';\n    envDisplayText = \"env      : The collection's current environment properties.\";\n  }\n\n  const obj = {\n    prototype: {\n      displayText,\n    },\n    env: {\n      prototype: {\n        displayText: envDisplayText,\n      },\n      get: getterFunc,\n      set: setterFunc,\n    },\n    request: buildRequest(true, scopes),\n    response: buildResponse(true, scopes),\n  };\n\n  return obj;\n};\n\nconst buildSingleDollar = scopes => {\n  let displayText;\n\n  const obj = {\n    prototype: {\n      displayText: '$        : Properties and functions to work with the current scenario.',\n    },\n\n    ctx: {\n      prototype: {\n        displayText:\n          'ctx      : The scenario context. Store temporary values here. They can be accessed in subsequent steps.',\n      },\n\n      get: getterFunc,\n      set: setterFunc,\n    },\n  };\n\n  return obj;\n};\n\nconst buildInput = scopes => {\n  let obj = {};\n\n  if (scopes.http) {\n    obj = buildRequest(false, scopes);\n  }\n\n  return obj;\n};\n\nconst buildOutput = scopes => {\n  let obj = {};\n\n  if (scopes.http) {\n    obj = buildResponse(false, scopes);\n  }\n\n  return obj;\n};\n\nconst buildGlobalScope = scopes => {\n  const globalScope = {\n    $$: buildDoubleDollar(scopes),\n    $: buildSingleDollar(scopes),\n  };\n\n  if (scopes.step) {\n    const input = buildInput(scopes);\n    if (!_.isEmpty(input)) {\n      globalScope.input = input;\n    }\n\n    const output = buildOutput(scopes);\n    if (!_.isEmpty(output)) {\n      globalScope.output = output;\n    }\n\n    if (scopes.conductor) {\n      globalScope.tests = {\n        prototype: {\n          displayText:\n            \"tests    : Set this object's properties to true or false to add assertions.\",\n        },\n      };\n    }\n  }\n\n  // helpers\n  globalScope.SL = {\n    prototype: {\n      displayText: 'SL       : Various helper functions.',\n    },\n\n    specs: {\n      prototype: {\n        displayText: 'specs : Functions to work with connected API specifications.',\n      },\n\n      buildResponse: {\n        prototype: {\n          displayText:\n            'buildResponse(method: String, url: String, statusCode: Number, contentType: String, exampleKey?: String) response',\n        },\n      },\n    },\n  };\n\n  // lodash\n  globalScope._ = {\n    prototype: {\n      displayText: '_        : Lodash library functions.',\n    },\n\n    // ..._, // DANGER, this causes ALL of lodash to be loaded into our bundle\n  };\n\n  return globalScope;\n};\n\nfunction buildOptions(props) {\n  const newOptions = props.options || {};\n\n  if (!_.isEmpty(props.autocompleteScopes)) {\n    const { autocompleteScopes } = props;\n\n    _.set(newOptions, ['extraKeys', 'Ctrl-Space'], 'autocomplete');\n    _.set(newOptions, ['extraKeys', \"'.'\"], cm => {\n      setTimeout(() => {\n        cm.execCommand('autocomplete');\n      }, 100);\n      return props.codeMirrorInstance.Pass; // tell CodeMirror we didn't handle the key\n    });\n\n    newOptions.hintOptions = {\n      completeSingle: false,\n      globalScope: buildGlobalScope(autocompleteScopes),\n    };\n  }\n\n  return newOptions;\n}\n\nclass CodeMirrorComponent extends React.Component {\n  static displayName = 'CodeMirror';\n\n  static propTypes = {\n    className: PropTypes.any,\n    codeMirrorInstance: PropTypes.func,\n    defaultValue: PropTypes.string,\n    onChange: PropTypes.func,\n    onFocusChange: PropTypes.func,\n    onScroll: PropTypes.func,\n    options: PropTypes.object,\n    path: PropTypes.string,\n    value: PropTypes.string,\n    preserveScrollPosition: PropTypes.bool,\n    scopes: PropTypes.object,\n  };\n\n  static defaultProps = {\n    preserveScrollPosition: false,\n  };\n\n  state = {\n    isFocused: false,\n  };\n\n  currentHighlightLineNumbers = null;\n\n  getCodeMirrorInstance = () => {\n    return this.props.codeMirrorInstance;\n  };\n\n  componentWillMount() {\n    this.highlightLines = _.debounce(this.highlightLines, 500, {\n      leading: true,\n    });\n  }\n\n  componentDidMount() {\n    const { highlightPath, highlightRange, value, defaultValue } = this.props;\n\n    var textareaNode = findDOMNode(this.refs.textarea);\n    var codeMirrorInstance = this.getCodeMirrorInstance();\n    this.codeMirror = codeMirrorInstance.fromTextArea(textareaNode, buildOptions(this.props));\n    this.codeMirror.on('change', this.codemirrorValueChanged);\n    this.codeMirror.on('focus', this.focusChanged.bind(this, true));\n    this.codeMirror.on('blur', this.focusChanged.bind(this, false));\n    this.codeMirror.on('scroll', this.scrollChanged);\n    this.codeMirror.setValue(defaultValue || value || '');\n\n    if (highlightPath) {\n      this.highlightLines(value, highlightPath, { focus: true });\n    }\n\n    if (highlightRange) {\n      this.highlightLineNumbers(highlightRange);\n    }\n  }\n\n  componentWillUnmount() {\n    // is there a lighter-weight way to remove the cm instance?\n    if (this.codeMirror) {\n      this.codeMirror.toTextArea();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (\n      this.codeMirror &&\n      nextProps.value !== undefined &&\n      normalizeLineEndings(this.codeMirror.getValue()) !== normalizeLineEndings(nextProps.value)\n    ) {\n      if (this.props.preserveScrollPosition) {\n        var prevScrollPosition = this.codeMirror.getScrollInfo();\n        this.codeMirror.setValue(nextProps.value);\n        this.codeMirror.scrollTo(prevScrollPosition.left, prevScrollPosition.top);\n      } else {\n        this.codeMirror.setValue(nextProps.value);\n      }\n    }\n\n    if (typeof nextProps.options === 'object') {\n      const options = buildOptions(nextProps);\n      for (var optionName in options) {\n        if (options.hasOwnProperty(optionName)) {\n          this.codeMirror.setOption(optionName, options[optionName]);\n        }\n      }\n    }\n\n    // if the highlightPath has changed, we need to recalculate\n    if (nextProps.highlightPath && !_.isEqual(this.props.highlightPath, nextProps.highlightPath)) {\n      this.highlightLines(nextProps.value, nextProps.highlightPath, { focus: true });\n    }\n\n    // if the highlightRange has changed, we need to recalculate\n    if (\n      nextProps.highlightRange &&\n      !_.isEqual(this.props.highlightRange, nextProps.highlightRange)\n    ) {\n      this.unHighlightLineNumbers(this.props.highlightRange);\n      this.highlightLineNumbers(nextProps.highlightRange);\n    }\n  }\n\n  highlightLines(data, propPath, opts = {}) {\n    if (_.isEmpty(propPath)) {\n      return;\n    }\n\n    const { focus } = opts;\n\n    LineNumberWorker.postMessage({ data, propPath })\n      .then(lineNumbers => {\n        if (!lineNumbers || _.get(lineNumbers, 'error')) {\n          // can't highlight if we can't parse the JSON in the first place\n          return;\n        }\n        const highlightStart = _.get(lineNumbers, 'from', 0);\n        const highlightEnd = _.get(lineNumbers, 'to', 0);\n\n        if (focus) {\n          const y = this.codeMirror.charCoords({ line: highlightStart - 1, ch: 0 }, 'local').top;\n          this.codeMirror.scrollTo(null, Math.max(y - 33, 0));\n        }\n\n        if (_.isEqual(this.currentHighlightLineNumbers, lineNumbers)) {\n          // if line numbers have not changed, we're set!\n          return;\n        }\n\n        if (this.currentHighlightLineNumbers) {\n          const prevHighlightStart = this.currentHighlightLineNumbers.from;\n          const prevHighlightEnd = this.currentHighlightLineNumbers.to;\n          this.unHighlightLineNumbers([{ from: prevHighlightStart, to: prevHighlightEnd }]);\n        }\n\n        this.highlightLineNumbers([{ from: highlightStart, to: highlightEnd }]);\n\n        this.currentHighlightLineNumbers = lineNumbers;\n      })\n      .catch(e => {\n        console.error('LineNumberWorker:error', { error: e, data, propPath });\n      });\n  }\n\n  unHighlightLineNumbers = lineNumbers => {\n    _.forEach(lineNumbers, lineNumber => {\n      this.codeMirror.eachLine(Math.max(lineNumber.from - 1, 0), lineNumber.to, line => {\n        this.codeMirror.removeLineClass(line, 'wrap', 'CodeMirror-highlightedText');\n      });\n    });\n  };\n\n  highlightLineNumbers = lineNumbers => {\n    _.forEach(lineNumbers, lineNumber => {\n      this.codeMirror.eachLine(Math.max(lineNumber.from - 1, 0), lineNumber.to, line => {\n        this.codeMirror.addLineClass(line, 'wrap', 'CodeMirror-highlightedText');\n      });\n    });\n  };\n\n  getCodeMirror = () => {\n    return this.codeMirror;\n  };\n\n  focus = () => {\n    if (this.codeMirror) {\n      this.codeMirror.focus();\n    }\n  };\n\n  focusChanged = focused => {\n    const { onFocusChange } = this.props;\n\n    this.setState({\n      isFocused: focused,\n    });\n\n    onFocusChange && onFocusChange(this.getCodeMirror().doc.getValue(), focused);\n  };\n\n  scrollChanged = cm => {\n    const { onScroll } = this.props;\n    onScroll && onScroll(cm.getScrollInfo());\n  };\n\n  codemirrorValueChanged = (doc, change) => {\n    const { highlightPath, onChange } = this.props;\n\n    const value = doc.getValue();\n\n    this.highlightLines(value, highlightPath);\n\n    if (onChange && change.origin !== 'setValue') {\n      onChange(value, change);\n    }\n  };\n\n  render() {\n    const { path, value, className } = this.props;\n    const { isFocused } = this.state;\n\n    var editorClassName = cn('ReactCodeMirror', className, {\n      'ReactCodeMirror--focused': isFocused,\n    });\n\n    return (\n      <div className={editorClassName}>\n        <textarea ref=\"textarea\" name={path} defaultValue={value} autoComplete=\"off\" />\n      </div>\n    );\n  }\n}\n\nexport default CodeMirrorComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { modeObjs } from '@platform/utils/codeMirror';\n// import { asyncComponent } from 'react-async-component';\nimport { registerLogger } from '@platform/utils/logging';\nimport { currentBrowser } from '@platform/utils/browser';\n\n// import PageLoading from '../PageLoading';\nimport ErrorBoundary from '../ErrorBoundary';\n\nimport Editor from './editor';\n\nconst log = registerLogger('components', 'CodeEditor');\n\n// NOTE: we have been using \"name\" as a unique identifier.. we are transitioning to use \"id\"\n\nlet CodeMirror;\nif (typeof window !== 'undefined' && window.localStorage) {\n  CodeMirror = require('../CodeMirror').default;\n}\n// const Editor = asyncComponent({\n//   serverMode: 'defer',\n//   resolve: () => System.import('./editor'),\n//   LoadingComponent: () => <PageLoading inverted={false} />, // Optional\n//   ErrorComponent: ({ error }) => <div>{error.message}</div>, // Optional\n// });\n\nclass CodeEditor extends React.Component {\n  static propTypes = {\n    id: PropTypes.string,\n    name: PropTypes.string, // DEPRECATED\n    mode: PropTypes.string,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.object, PropTypes.array]),\n    keyMap: PropTypes.string,\n    lineWrapping: PropTypes.bool,\n    lineNumbers: PropTypes.bool,\n    readOnly: PropTypes.bool,\n    placeholder: PropTypes.string,\n    lint: PropTypes.bool,\n    tabSize: PropTypes.number,\n    highlightLines: PropTypes.object,\n    preserveScrollPosition: PropTypes.bool,\n    noDebounce: PropTypes.bool,\n    theme: PropTypes.string,\n    autoRefresh: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  };\n\n  static defaultProps = {\n    mode: 'json',\n    keyMap: 'sublime',\n    lineWrapping: true,\n    lineNumbers: true,\n    readOnly: false,\n    placeholder: 'Type here...',\n    lint: true,\n    tabSize: 2,\n  };\n\n  state = {\n    lastBroadcastedValue: null,\n    broadcasting: false,\n  };\n\n  checkId(props) {\n    if (!props.id && !props.name) {\n      log.warn(\n        'CodeEditor requires that an id or name be passed in (note that name is deprecated)'\n      );\n    }\n  }\n\n  componentWillMount() {\n    this.checkId(this.props);\n    if (!this.props.noDebounce) {\n      this.onChange = _.debounce(this.onChange, 500, {\n        leading: true,\n      });\n    }\n  }\n\n  onChange = (val, change) => {\n    this.setState({\n      lastBroadcastedValue: val,\n      broadcasting: true,\n    });\n\n    if (this.props.onChange) {\n      this.props.onChange(val, change);\n    }\n  };\n\n  componentWillUpdate(nextProps, nextState) {\n    this.checkId(nextProps);\n    nextState.broadcasting = false;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const shouldUpdate =\n      this.props.id !== nextProps.id ||\n      this.props.name !== nextProps.name ||\n      (!nextState.broadcasting && nextState.lastBroadcastedValue !== nextProps.value);\n\n    nextState.broadcasting = false;\n\n    return shouldUpdate;\n  }\n\n  parseValue = value => {\n    const { mode = 'json' } = this.props;\n\n    let val = value;\n    if (mode === 'json') {\n      if (typeof value === 'string') {\n        try {\n          val = JSON.parse(value);\n        } catch (e) {}\n      }\n\n      if (typeof val === 'object') {\n        val = JSON.stringify(val, null, 2);\n      }\n    } else {\n      val = value;\n    }\n\n    if (val && typeof val !== 'string') {\n      val = JSON.stringify(val, null, 2);\n    }\n\n    return val || '';\n  };\n\n  renderEditor = codeMirrorInstance => {\n    const {\n      mode = 'json',\n      value,\n      keyMap,\n      tabSize,\n      lineWrapping,\n      lineNumbers,\n      readOnly,\n      placeholder,\n      lint,\n      autocompleteScopes,\n      preserveScrollPosition,\n      highlightPath,\n      highlightRange,\n      onFocus,\n      onBlur,\n      theme,\n      autoRefresh,\n    } = this.props;\n\n    const modeObj = modeObjs[mode] || mode;\n    let fullPlaceholder = placeholder;\n    if (!_.isEmpty(autocompleteScopes)) {\n      fullPlaceholder = `${placeholder} Press ctrl + spacebar to show autocomplete list.`;\n    }\n\n    return (\n      <Editor\n        codeMirrorInstance={codeMirrorInstance}\n        value={this.parseValue(value)}\n        onChange={this.onChange}\n        onFocusChange={(v, focused) => {\n          if (focused && onFocus) {\n            onFocus(v);\n          } else if (!focused && onBlur) {\n            onBlur(v);\n          }\n        }}\n        highlightPath={highlightPath}\n        highlightRange={highlightRange}\n        autocompleteScopes={autocompleteScopes}\n        preserveScrollPosition={preserveScrollPosition}\n        options={{\n          mode: modeObj,\n          keyMap,\n          tabSize,\n          lineWrapping,\n          lineNumbers,\n          readOnly,\n          autoRefresh,\n          // disable in safari, because it locks the browser for large strings\n          lint: currentBrowser.safari ? false : lint,\n          theme: theme || 'default',\n          placeholder: fullPlaceholder,\n          extraKeys: {\n            'Alt-F': 'findPersistent',\n          },\n          styleSelectedText: true,\n          matchBrackets: true,\n          autoCloseBrackets: true,\n          highlightSelectionMatches: true,\n          foldGutter: true,\n          gutters: ['CodeMirror-lint-markers', 'CodeMirror-linenumbers', 'CodeMirror-foldgutter'],\n        }}\n      />\n    );\n  };\n\n  render() {\n    const { autogrow, maxLines, className = '', styles = {}, noFill } = this.props;\n\n    const classes = ['CodeEditor'];\n    if (!noFill) {\n      classes.push('fill-space');\n    }\n    if (autogrow) {\n      classes.push('autogrow');\n    }\n    if (maxLines) {\n      classes.push(`autogrow-${maxLines}`);\n    }\n    if (className) {\n      classes.push(className);\n    }\n\n    return (\n      <ErrorBoundary>\n        <div className={classes.join(' ')} style={styles.root || {}}>\n          {CodeMirror ? this.renderEditor(CodeMirror) : null}\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default CodeEditor;\n","import React from 'react';\n\nimport FormInputLabel from '../FormInputLabel';\nimport CodeEditor from '../CodeEditor';\n\nconst FormCodeEditor = props => {\n  const { id, label, tip, required, mode = 'json', className = '', input, ...extraProps } = props;\n\n  return (\n    <div className={`FormCodeEditor ${className}`}>\n      <FormInputLabel label={label} tip={tip} required={required} />\n\n      <CodeEditor id={id} mode={mode} autogrow noFill {...input} {...extraProps} />\n    </div>\n  );\n};\n\nexport default FormCodeEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { Button } from 'semantic-ui-react';\n\nimport FormInput from '../FormInput';\n\n// NOTE: cloneDeep is needed in the _.set, _unset below to\n// not break shouldComponentUpdate in other components\n\nclass FormInputMap extends React.Component {\n  static propTypes = {\n    fields: PropTypes.object,\n    className: PropTypes.string,\n    handleUpdate: PropTypes.func.isRequired,\n    noAdd: PropTypes.bool,\n    noUnset: PropTypes.bool, // don't unset value if empty fields array (just set to empty array)\n    renderFactory: PropTypes.func,\n    size: PropTypes.string,\n  };\n\n  state = {\n    externalFields: '',\n    fields: [],\n  };\n\n  componentWillMount() {\n    if (!_.isEmpty(this.props.fields)) {\n      this.onExternalValueChange(this.props, this.state);\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    this.onExternalValueChange(nextProps, nextState);\n  }\n\n  convertExternalValue = (externalFields = {}) => {\n    const fields = [];\n\n    if (externalFields) {\n      _.map(externalFields, (value, name) => {\n        if (_.isArray(value)) {\n          fields.push({\n            name,\n            value,\n            type: 'array',\n          });\n        } else if (_.isPlainObject(value)) {\n          fields.push({\n            name,\n            ...value,\n          });\n        } else {\n          fields.push({\n            name,\n            value,\n          });\n        }\n      });\n    }\n\n    return fields;\n  };\n\n  onExternalValueChange = (props, state) => {\n    if (state.internal) {\n      this.setState({\n        internal: false,\n      });\n    } else if (!_.isEqual(props.fields, state.externalFields)) {\n      this.setState({\n        externalFields: props.fields,\n        fields: this.convertExternalValue(props.fields),\n      });\n    }\n  };\n\n  onChange = fields => {\n    const externalFields = {};\n    for (const i of fields) {\n      const { name, ...extra } = i;\n\n      if (extra.type === 'array') {\n        externalFields[name] = _.chain(extra.value)\n          .split(',')\n          .map(_.trim)\n          .compact()\n          .value();\n      } else if (_.size(extra) <= 1 && extra.hasOwnProperty('value')) {\n        externalFields[i.name] = extra.value || '';\n      } else {\n        externalFields[name] = extra;\n      }\n    }\n\n    this.setState({\n      internal: true,\n      externalFields,\n      fields,\n    });\n\n    if (!this.props.noUnset && _.isEmpty(externalFields)) {\n      this.props.handleUpdate('unset', []);\n    } else {\n      this.props.handleUpdate('set', [], externalFields);\n    }\n  };\n\n  render() {\n    const {\n      className = '',\n      addText = 'Add',\n      namePlaceholder = '',\n      valuePlaceholder = '',\n      meta = {},\n      renderFactory,\n      noAdd,\n      readOnly,\n      size,\n    } = this.props;\n\n    let contentElem;\n    if (_.isEmpty(this.state.fields) && renderFactory) {\n      contentElem = <div className=\"c-muted\">none</div>;\n    } else if (renderFactory) {\n      contentElem = renderFactory({\n        fields: this.state.fields,\n        onChange: (t, p, v) => {\n          const fields = _.cloneDeep(this.state.fields);\n\n          switch (t) {\n            case 'set':\n              _.set(fields, p, v);\n              break;\n            case 'unset':\n              _.unset(fields, p);\n              break;\n          }\n\n          this.onChange(fields);\n        },\n        onRemove: index => {\n          const fields = _.cloneDeep(this.state.fields);\n          _.pullAt(fields, index);\n          this.onChange(fields);\n        },\n      });\n    } else {\n      contentElem = this.state.fields.map((field, index) => {\n        return (\n          <div key={index} className=\"mt-3\">\n            <div className=\"flex items-center\">\n              <FormInput\n                id={`FormInputMapKey-${index}`}\n                input={{\n                  value: field.name,\n                  onChange: (e, { value }) => {\n                    const fields = _.cloneDeep(this.state.fields);\n                    _.set(fields, [index, 'name'], value);\n                    this.onChange(fields);\n                  },\n                }}\n                disabled={meta.submitting}\n                placeholder={namePlaceholder}\n                className=\"flex-1 mr-2\"\n                readOnly={readOnly}\n                size={size}\n                fluid\n              />\n\n              <b>:</b>\n\n              <FormInput\n                id={`FormInputMapValue-${index}`}\n                input={{\n                  value: field.value,\n                  onChange: (e, { value }) => {\n                    const fields = _.cloneDeep(this.state.fields);\n                    _.set(fields, [index, 'value'], value);\n                    this.onChange(fields);\n                  },\n                }}\n                disabled={meta.submitting}\n                placeholder={valuePlaceholder}\n                className=\"flex-1 ml-2\"\n                readOnly={readOnly}\n                size={size}\n                fluid\n              />\n              {readOnly ? null : (\n                <div className=\"ml-3\">\n                  <Button\n                    icon=\"trash\"\n                    size={size}\n                    onClick={() => {\n                      const fields = _.cloneDeep(this.state.fields);\n                      _.pullAt(fields, index);\n                      this.onChange(fields);\n                    }}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      });\n    }\n\n    return (\n      <div className={`FormInputList ${className}`}>\n        {noAdd || readOnly ? null : (\n          <Button\n            onClick={() => {\n              const fields = _.cloneDeep(this.state.fields);\n              fields.push({ name: '', value: '' });\n              this.onChange(fields);\n            }}\n            basic\n            disabled={readOnly}\n            size={size}\n          >\n            {addText}\n          </Button>\n        )}\n\n        {contentElem}\n      </div>\n    );\n  }\n}\n\nexport default FormInputMap;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Radio } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\n\nconst FormRadio = props => {\n  const {\n    checked,\n    onChange,\n    className = '',\n    label,\n    tip,\n    required,\n    labelProps,\n    ...extraProps\n  } = props;\n\n  return (\n    <div\n      className={cn('FormRadio flex', className, {\n        'FormRadio-labeled': label,\n      })}\n    >\n      <Radio\n        className={cn({ 'pr-2': label })}\n        checked={checked}\n        onChange={onChange}\n        {...extraProps}\n      />\n\n      <FormInputLabel label={label} tip={tip} required={required} {...labelProps} />\n    </div>\n  );\n};\n\nexport default FormRadio;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormCodeEditor from '../FormCodeEditor';\nimport FormInputMap from '../FormInputMap';\nimport FormRadio from '../FormRadio';\nimport FormDropdown from '../FormDropdown';\n\nconst FormHttpBodyEditor = ({ id, className = '', input = {}, handleUpdate, readOnly }) => {\n  const handleUpdateContentType = (updateStep, headers = {}, contentType) => {\n    const newHeaders = _.map(headers, (value, name) => ({ name, value }));\n    const contentTypeIndex = _.findIndex(newHeaders, val => {\n      return val.name.toLowerCase() === 'content-type';\n    });\n\n    if (contentTypeIndex >= 0) {\n      let setHeaders = false;\n      if (contentType) {\n        newHeaders[contentTypeIndex].value = contentType;\n        setHeaders = true;\n      } else if (newHeaders.length === 1) {\n        updateStep('unset', ['input', 'headers']);\n      } else {\n        _.pullAt(newHeaders, contentTypeIndex);\n        setHeaders = true;\n      }\n\n      if (setHeaders) {\n        const headerMap = {};\n        for (const h of newHeaders) {\n          headerMap[h.name] = h.value;\n        }\n        updateStep('set', ['input', 'headers'], headerMap);\n      }\n    } else if (contentType) {\n      updateStep('set', ['input', 'headers'], {\n        ...headers,\n        'Content-Type': contentType,\n      });\n    }\n  };\n\n  const headers = input.headers || {};\n  const contentType = headers['content-type'] || headers['Content-Type'];\n  const paramContentTypes = ['application/x-www-form-urlencoded', 'multipart/form-data'];\n\n  let raw;\n  if (!_.includes(paramContentTypes, contentType)) {\n    raw = true;\n  }\n\n  let mode = 'text';\n  if (!_.isEmpty(contentType)) {\n    if (contentType.match(/json/)) {\n      mode = 'json';\n    } else if (contentType.match(/xml/)) {\n      mode = 'xml';\n    } else if (contentType.match(/html/)) {\n      // mode = 'html'; // we don't have the html ace editor stuff loaded right now\n    }\n  }\n\n  let bodyEditorContent;\n  if (raw) {\n    bodyEditorContent = (\n      <FormCodeEditor\n        id={id}\n        readOnly={readOnly}\n        input={{\n          value: input.body || '',\n          onChange(value) {\n            handleUpdate('set', ['input', 'body'], value);\n          },\n        }}\n        mode={mode}\n      />\n    );\n  } else {\n    bodyEditorContent = (\n      <FormInputMap\n        id={id}\n        fields={typeof input.body === 'object' ? input.body : {}}\n        handleUpdate={(t, p, v) => handleUpdate(t, ['input', 'body'].concat(p), v)}\n        addText=\"Add Property\"\n        namePlaceholder=\"param name\"\n        valuePlaceholder=\"param value\"\n        readOnly={readOnly}\n        size=\"tiny\"\n      />\n    );\n  }\n\n  return (\n    <div className={`FormHttpBodyEditor ${className}`}>\n      <div className=\"flex mb-6 items-center\">\n        <FormDropdown\n          className=\"mr-6\"\n          text={contentType || 'no content type'}\n          button\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n          options={[\n            { text: 'no content type', value: null },\n            { text: 'Text (text/plain)', value: 'text/plain' },\n            { text: 'JSON (application/json)', value: 'application/json' },\n            { text: 'Javascript (application/javascript)', value: 'application/javascript' },\n            { text: 'XML (application/xml)', value: 'application/xml' },\n            { text: 'XML (text/xml)', value: 'text/xml' },\n            { text: 'HTML (text/html)', value: 'text/html' },\n          ]}\n          onChange={(e, { value }) => {\n            handleUpdateContentType(handleUpdate, input.headers, value);\n          }}\n        />\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"raw\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            checked={raw}\n            onClick={(e, { value }) => handleUpdateContentType(handleUpdate, input.headers, value)}\n            disabled={readOnly}\n          />\n        </div>\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"x-www-form-urlencoded\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            value=\"application/x-www-form-urlencoded\"\n            checked={contentType === 'application/x-www-form-urlencoded'}\n            onClick={(e, { value }) => handleUpdateContentType(handleUpdate, input.headers, value)}\n            disabled={readOnly}\n          />\n        </div>\n\n        <div className=\"mr-6\">\n          <FormRadio\n            label=\"form-data\"\n            labelProps={{ className: 'text-sm font-normal' }}\n            name=\"contentType\"\n            value=\"multipart/form-data\"\n            checked={contentType === 'multipart/form-data'}\n            onClick={(e, { value }) => handleUpdateContentType(handleUpdate, input.headers, value)}\n            disabled={readOnly}\n          />\n        </div>\n      </div>\n\n      {bodyEditorContent}\n    </div>\n  );\n};\n\nexport default FormHttpBodyEditor;\n","import React from 'react';\nimport cn from 'classnames';\nimport { Checkbox } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\n\nconst FormCheckbox = props => {\n  const {\n    checked,\n    onChange,\n    label,\n    labelPosition = 'left',\n    labelClassname,\n    labelStyle,\n    tip,\n    required,\n    className = '',\n    inline,\n    checkboxProps,\n    inverted,\n    transparent,\n    ...extraProps\n  } = props;\n\n  const labelComponent = (\n    <FormInputLabel\n      inline={inline}\n      label={label}\n      tip={tip}\n      required={required}\n      className={labelClassname}\n      style={labelStyle}\n      inverted={inverted || transparent}\n    />\n  );\n\n  return (\n    <div\n      className={cn(\n        'FormCheckbox',\n        className,\n        'flex',\n        inline ? 'is-inline items-center' : 'flex-col',\n        {\n          transparent,\n        }\n      )}\n    >\n      {labelPosition === 'left' && labelComponent}\n\n      <Checkbox\n        checked={checked ? true : false}\n        onChange={(name, e) => {\n          if (onChange) onChange(e.checked);\n        }}\n        {...checkboxProps}\n        {...extraProps}\n      />\n\n      {labelPosition === 'right' && labelComponent}\n    </div>\n  );\n};\n\nexport default FormCheckbox;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Button, Modal } from 'semantic-ui-react';\n\nexport default class SLModal extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { modalOpen: props.initialOpen };\n  }\n\n  handleOpen = e => {\n    this.props.onOpen ? this.props.onOpen() : null;\n\n    this.setState({\n      modalOpen: true,\n    });\n  };\n\n  handleClose = () => {\n    if (this.props.onClose) this.props.onClose();\n\n    if (!this.props.forceOpen) {\n      this.setState({\n        modalOpen: false,\n      });\n    }\n  };\n\n  render() {\n    const {\n      className = '',\n      title,\n      content,\n      contentFactory,\n      forceOpen,\n      triggerFactory,\n      triggerButton,\n      cancelButton,\n      confirmButton,\n      size = 'small',\n      contentProps = {},\n      ...otherProps\n    } = this.props;\n\n    const modalProps = _.omit(otherProps, ['initialOpen']);\n    const { modalOpen } = this.state;\n\n    const open = modalOpen || forceOpen;\n\n    let triggerElem;\n    if (triggerButton) {\n      triggerElem = (\n        <Button\n          {...triggerButton}\n          onClick={e => {\n            triggerButton.onClick ? triggerButton.onClick(e, this) : this.handleOpen(e);\n          }}\n        />\n      );\n    } else if (triggerFactory) {\n      triggerElem = triggerFactory({ handleOpen: this.handleOpen });\n    }\n\n    const modalActions = [];\n\n    if (cancelButton) {\n      modalActions.push(\n        <Button\n          key=\"modal-cancelButton\"\n          {...cancelButton}\n          onClick={e => {\n            cancelButton.onClick ? cancelButton.onClick(e, this) : this.handleClose(e);\n          }}\n        />\n      );\n    }\n\n    if (confirmButton) {\n      modalActions.push(\n        <Button\n          key=\"modal-confirmButton\"\n          {...confirmButton}\n          onClick={e => {\n            confirmButton.onClick ? confirmButton.onClick(e, this) : this.handleClose(e);\n          }}\n        />\n      );\n    }\n\n    return (\n      <Modal\n        {...modalProps}\n        className={className}\n        trigger={triggerElem}\n        open={open || false}\n        onClose={this.handleClose}\n        size={size}\n        style={{ top: '10%' }}\n      >\n        {title && <Modal.Header>{title}</Modal.Header>}\n\n        <Modal.Content {...contentProps}>\n          <Modal.Description>{open ? contentFactory(this) : content}</Modal.Description>\n        </Modal.Content>\n\n        {modalActions.length > 0 && <Modal.Actions>{modalActions}</Modal.Actions>}\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport cn from 'classnames';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Popup, Icon } from 'semantic-ui-react';\n\nimport { authUrlOptions, accessUrlOptions } from '@platform/utils/authorization';\nimport { alert } from '@platform/utils/alert';\n\nimport ErrorMessage from '../ErrorMessage';\nimport Modal from '../Modal';\nimport FormInput from '../FormInput';\nimport FormSelect from '../FormSelect';\n\nclass OAuth2TokenFormModal extends React.Component {\n  render() {\n    const { readOnly, tokenStore, className, oauth2 = {} } = this.props;\n\n    const {\n      credentials = {},\n      authorizationMethod,\n      authConfig = {},\n      isValid,\n      isCreatingToken,\n      getToken,\n      updateCredentials,\n      updateIsCreatingToken,\n      error,\n      clearError,\n    } = tokenStore;\n\n    const { flow = 'accessCode' } = credentials;\n\n    return (\n      <Modal\n        title=\"Get Access Token\"\n        size=\"tiny\"\n        triggerButton={{ secondary: true, content: 'Get Access Token', size: 'tiny' }}\n        cancelButton={{\n          negative: true,\n          content: 'Cancel',\n        }}\n        onClose={() => {\n          updateIsCreatingToken(false);\n          clearError();\n        }}\n        confirmButton={{\n          positive: true,\n          disabled: isCreatingToken || !isValid,\n          loading: isCreatingToken,\n          content: 'Get Access Token',\n          onClick: (e, modal) => {\n            clearError();\n\n            getToken({\n              onSuccess: () => {\n                modal.handleClose();\n                alert.success('Access Token Created.');\n              },\n            });\n          },\n        }}\n        contentFactory={() => (\n          <div className={cn('text-sm', className)}>\n            {error && (\n              <ErrorMessage\n                className=\"mb-6\"\n                error=\"Error getting access token, check the developer console for more details.\"\n              />\n            )}\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormInput\n                  value={_.get(credentials, 'name', '')}\n                  placeholder=\"My OAuth token\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'name', value);\n                  }}\n                  label={{\n                    content: 'Token Name',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>\n            )}\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormSelect\n                  value={flow}\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'flow', value);\n                  }}\n                  options={[\n                    {\n                      text: 'Authorization Code',\n                      value: 'accessCode',\n                    },\n                    {\n                      text: 'Implicit',\n                      value: 'implicit',\n                    },\n                    {\n                      text: 'Password Credentials',\n                      value: 'password',\n                    },\n                    {\n                      text: 'Client Credentials',\n                      value: 'application',\n                    },\n                  ]}\n                  label={{\n                    content: 'Grant Type',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  inline\n                  fluid\n                />\n              </div>\n            )}\n\n            {flow === 'password' && [\n              <div className=\"mb-2\" key=\"username\">\n                <FormInput\n                  value={_.get(credentials, 'username', '')}\n                  placeholder=\"username\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'username', value);\n                  }}\n                  label={{\n                    content: 'Username*',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>,\n\n              <div className=\"mb-2\" key=\"password\">\n                <FormInput\n                  type=\"password\"\n                  value={_.get(credentials, 'password', '')}\n                  placeholder=\"****************************************\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'password', value);\n                  }}\n                  label={{\n                    content: 'Password*',\n                    basic: true,\n                    className: 'Label-fw',\n                  }}\n                  fluid\n                />\n              </div>,\n            ]}\n\n            <div className=\"mb-2\">\n              <FormInput\n                value={_.get(credentials, 'client_id', '')}\n                placeholder=\"12345123451234512345\"\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'client_id', value);\n                }}\n                label={{\n                  content: 'Client ID*',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                fluid\n              />\n            </div>\n\n            <div className=\"mb-2\">\n              <FormInput\n                type=\"password\"\n                value={_.get(credentials, 'client_secret', '')}\n                placeholder=\"****************************************\"\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'client_secret', value);\n                }}\n                label={{\n                  content: 'Client Secret*',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                fluid\n              />\n            </div>\n\n            {!readOnly && (\n              <div className=\"mb-2\">\n                <FormInput\n                  value={_.get(credentials, 'scope', '')}\n                  placeholder=\"scope1, scope2\"\n                  onChange={(e, { value }) => {\n                    updateCredentials('set', 'scope', value);\n                  }}\n                  label={{\n                    basic: true,\n                    className: 'Label-fw',\n                    children: (\n                      <div>\n                        Scopes (optional)\n                        <span className=\"FormInputTip\">\n                          <Popup\n                            trigger={<Icon name=\"question\" size=\"small\" />}\n                            content=\"Seperate scopes by a comma. Ex &quot;scope1, scope2&quot;\"\n                            size=\"small\"\n                            wide=\"very\"\n                          />\n                        </span>\n                      </div>\n                    ),\n                  }}\n                  fluid\n                />\n              </div>\n            )}\n\n            {(flow === 'accessCode' || flow === 'authorizationCode' || flow === 'implicit') &&\n              // on readOnly we want to hide the drop down options and still make the entry editable\n              (readOnly ? (\n                <div className=\"mb-2\">\n                  <FormInput\n                    value={_.get(credentials, 'authorize_url', '')}\n                    placeholder=\"https://provider.com/oauth/authorize\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'authorize_url', value);\n                    }}\n                    label={{\n                      content: 'Authorize URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    fluid\n                  />\n                </div>\n              ) : (\n                <div className=\"mb-2\">\n                  <FormSelect\n                    value={_.get(credentials, 'authorize_url', '')}\n                    placeholder=\"https://provider.com/oauth/authorize\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'authorize_url', value);\n                    }}\n                    label={{\n                      content: 'Authorize URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    options={_.uniqBy(\n                      _.concat(authUrlOptions.map(u => ({ text: u, value: u })), [\n                        { text: credentials.authorize_url, value: credentials.authorize_url },\n                      ]),\n                      'value'\n                    )}\n                    inline\n                    fluid\n                  />\n                </div>\n              ))}\n\n            {flow !== 'implicit' &&\n              // on readOnly we want to hide the drop down options and still make the entry editable\n              (readOnly ? (\n                <div className=\"mb-2\">\n                  <FormInput\n                    value={_.get(credentials, 'access_token_url', '')}\n                    placeholder=\"https://provider.com/oauth/access_token\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'access_token_url', value);\n                    }}\n                    label={{\n                      content: 'Access Token URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    fluid\n                  />\n                </div>\n              ) : (\n                <div className=\"mb-2\">\n                  <FormSelect\n                    value={_.get(credentials, 'access_token_url', '')}\n                    placeholder=\"https://provider.com/oauth/access_token\"\n                    onChange={(e, { value }) => {\n                      updateCredentials('set', 'access_token_url', value);\n                    }}\n                    label={{\n                      content: 'Access Token URL*',\n                      basic: true,\n                      className: 'Label-fw',\n                    }}\n                    options={_.uniqBy(\n                      _.concat(accessUrlOptions.map(u => ({ text: u, value: u })), [\n                        { text: credentials.access_token_url, value: credentials.access_token_url },\n                      ]),\n                      'value'\n                    )}\n                    inline\n                    fluid\n                  />\n                </div>\n              ))}\n\n            {(flow === 'accessCode' || flow === 'authorizationCode' || flow === 'implicit') &&\n              !readOnly && (\n                <div className=\"mb-4\">\n                  <FormInput\n                    value={authConfig.redirectUri}\n                    label={{\n                      basic: true,\n                      className: 'Label-fw',\n                      children: (\n                        <div>\n                          Callback URL{' '}\n                          <span className=\"FormInputTip\">\n                            <Popup\n                              trigger={<Icon name=\"question\" size=\"small\" />}\n                              content=\"Enter this in the application settings of your API provider.\"\n                              size=\"small\"\n                              wide=\"very\"\n                            />\n                          </span>\n                        </div>\n                      ),\n                    }}\n                    readOnly\n                    fluid\n                  />\n                </div>\n              )}\n\n            <div className=\"mb-2\">\n              <FormSelect\n                value={authorizationMethod}\n                onChange={(e, { value }) => {\n                  updateCredentials('set', 'authorization_method', value);\n                }}\n                label={{\n                  content: 'Client Authentication',\n                  basic: true,\n                  className: 'Label-fw',\n                }}\n                options={[\n                  {\n                    text: 'Send as Basic Auth header',\n                    value: 'header',\n                  },\n                  {\n                    text: 'Send client credentials in body',\n                    value: 'body',\n                  },\n                ]}\n                inline\n                fluid\n              />\n            </div>\n          </div>\n        )}\n        onOpen={() => {\n          if (!_.isEmpty(oauth2.credentials)) {\n            updateCredentials('set', [], oauth2.credentials || {});\n          }\n        }}\n      />\n    );\n  }\n}\n\nexport default inject(stores => {\n  const { oauthTokenStore, userService, projectService } = stores;\n\n  const userId = _.get(userService, 'authorizedUser.id');\n  const projectId = _.get(projectService, 'current.id');\n\n  const tokenStore = oauthTokenStore.getOrRegisterInstance(userId, projectId);\n\n  return {\n    tokenStore,\n  };\n})(observer(OAuth2TokenFormModal));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Icon, Button, Popup } from 'semantic-ui-react';\n\nconst EntityEditorGroup = props => {\n  const {\n    id,\n    name,\n    className = '',\n    children,\n    contentFactory,\n    contentClassName = '',\n    padded,\n    active,\n    warning,\n    error,\n    subtitle,\n    defaultOpen,\n    ui,\n    updateUi,\n    actions = [],\n    tipFactory,\n    onToggle,\n    forceOpen,\n  } = props;\n\n  let isOpen;\n  if (onToggle) {\n    if (forceOpen) {\n      isOpen = true;\n    }\n  } else if (ui.open || (!ui.hasOwnProperty('open') && (defaultOpen || ui.forceOpen))) {\n    // should be open if the user said it should be, by default it is, or if\n    // it was originally forcedOpen and the user has not closed it\n    isOpen = true;\n  }\n\n  const actionElems = _.map(actions, (action, index) => {\n    return (\n      <div className=\"EntityEditorGroup-action\" key={index}>\n        <Button basic compact size=\"mini\" {...action} />\n      </div>\n    );\n  });\n\n  return (\n    <div\n      id={id}\n      className={cn('EntityEditorGroup', className, {\n        'is-active': active,\n        'is-open': isOpen,\n      })}\n    >\n      <div\n        className=\"EntityEditorGroup-header flex items-center\"\n        onClick={e => {\n          if (isOpen && _.get(e, 'target.tagName', '').toLowerCase() === 'button') {\n            return;\n          }\n\n          updateUi('set', ['open'], !isOpen);\n\n          if (onToggle) {\n            onToggle(!isOpen);\n          }\n        }}\n      >\n        <div className=\"EntityEditorGroup-toggle\">\n          <Icon name={cn('caret', isOpen ? 'down' : 'right')} />\n        </div>\n\n        <div className=\"EntityEditorGroup-name\">{name}</div>\n\n        {!_.isEmpty(subtitle) ? <div className=\"EntityEditorGroup-subtitle\">{subtitle}</div> : null}\n\n        <div className=\"EntityEditorGroup-actions flex items-center\">{actionElems}</div>\n\n        {active ? (\n          <div className=\"EntityEditorGroup-status c-positive\">\n            <Icon name=\"check\" />\n          </div>\n        ) : null}\n\n        {warning ? (\n          <div className=\"EntityEditorGroup-status c-warning\">\n            <Icon name=\"exclamation circle\" />\n          </div>\n        ) : null}\n\n        {error ? (\n          <div className=\"EntityEditorGroup-status c-error\">\n            <Icon name=\"exclamation circle\" />\n          </div>\n        ) : null}\n\n        <div className=\"flex-1\" />\n\n        {tipFactory ? (\n          <Popup\n            trigger={\n              <div>\n                <Icon className=\"c-muted\" name=\"question circle\" />\n              </div>\n            }\n            size=\"small\"\n            position=\"top center\"\n            hoverable\n            wide\n          >\n            {tipFactory()}\n          </Popup>\n        ) : null}\n      </div>\n\n      <div className=\"EntityEditorGroup-content\">\n        <div className={cn(contentClassName, { 'p-3': padded })}>\n          {isOpen ? children || contentFactory() : null}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id, forceOpen }) => ({\n  ...appStore.injectUi(`EntityEditorGroup-${id}`, {\n    forceOpen,\n  }),\n}))(observer(EntityEditorGroup));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\n\nfunction UsedPathParams({ name, editor = {}, className = '', showEmptyMessage }) {\n  const pathParams = editor.currentStepPathParams;\n  const hasParams = !_.isEmpty(pathParams);\n\n  if (!hasParams && !showEmptyMessage) return null;\n\n  let subtitle;\n  let active;\n  let warning;\n  let notSetCount = 0;\n\n  _.forEach(pathParams, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} path ${pluralize('param', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  let contents;\n  if (hasParams) {\n    contents = _.map(pathParams, (value, key) => {\n      return (\n        <FormInput\n          key={key}\n          value={_.isUndefined(value) ? '' : `${value}`}\n          className=\"EntityEditorGroup-input\"\n          placeholder=\"value\"\n          onChange={e => {\n            const newVal = safeParse(e.target.value, e.target.value);\n            const newParams = _.cloneDeep(pathParams);\n            _.set(newParams, key, _.isObject(newVal) && _.isEmpty(newVal) ? '' : newVal);\n            editor.updateCurrentStepPathParams(newParams);\n          }}\n          label={{ content: key, basic: true, className: 'Label-fw' }}\n          fluid\n        />\n      );\n    });\n  } else if (showEmptyMessage) {\n    contents = <div className=\"p-4\">{showEmptyMessage}</div>;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-path-params\"\n      className={`PathParamEditor ${className}`}\n      name={name || 'Path Params'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      contentFactory={() => <div>{contents}</div>}\n    />\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(UsedPathParams));\n","import React from 'react';\nimport cn from 'classnames';\n\nimport { faBook } from '@fortawesome/pro-solid-svg-icons/faBook';\n\nimport { Icon } from '@core/ui';\n\nimport { Link } from '@platform/utils/router';\n\nconst featuresToArticles = {\n  releasing: '/platform/versioning/releases',\n  versioning: '/platform/versioning/versions',\n  embedding: '/documentation/embed-your-hub',\n  auth0: '/documentation/authorizations/auth0',\n  '/documentation/variables-hubs': '/documentation/variables-hubs',\n  'custom-css': '/documentation/design/custom-css',\n  '$.ctx': '/testing/using-variables/context',\n  'contract-testing': '/testing/leveraging-openapi/contract-testing',\n  'referencing-other-scenarios': '/testing/referencing-other-scenarios',\n  'fair-use-billing': '/platform/getting-started/billing#fair-use-billing-policy',\n  'run-a-simple-mock-server': '/mocking/introduction#run-a-simple-mock-server',\n  'run-in-terminal': '/testing/running-tests/in-the-terminal',\n  'sending-http-requests': '/modeling/modeling-with-openapi/sending-http-requests',\n};\n\nconst LearnMore = props => {\n  const { className, feature, children } = props;\n\n  if (!feature || !featuresToArticles[feature]) {\n    return null;\n  }\n\n  const to = 'https://docs.stoplight.io' + (featuresToArticles[feature] || '');\n\n  return (\n    <Link className={cn('truncate', className)} to={to}>\n      {children ? (\n        children\n      ) : (\n        <span>\n          <Icon className=\"text-sm\" icon={faBook} />\n          <span className=\"ml-1\">Learn More</span>\n        </span>\n      )}\n    </Link>\n  );\n};\n\nexport default LearnMore;\n","import React from 'react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { inject, observer } from 'mobx-react';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\nimport LearnMore from '../LearnMore';\n\nfunction UsedCtxVariables({ name, editor = [], className = '' }) {\n  const variables = editor.currentPopulatedCtxVariables;\n\n  if (_.isEmpty(variables)) {\n    return null;\n  }\n\n  let subtitle;\n  let notSetCount = 0;\n  let active;\n  let warning;\n  _.forEach(variables, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} ${pluralize('variable', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-ctx\"\n      className={`CtxVariableEditor ${className}`}\n      name={name || '$.ctx'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      tipFactory={() => (\n        <div>\n          $.ctx makes it easy to pass data between steps. These inputs will display the last $.ctx\n          values saved in this scenario. You can also edit them and re-run this step for easy\n          debugging.\n          <br />\n          <LearnMore className=\"mt-2 d-b\" feature=\"$.ctx\" />\n        </div>\n      )}\n      contentFactory={() => (\n        <div>\n          {_.map(variables, (v, k) => {\n            return (\n              <FormInput\n                key={k}\n                value={safeStringify(v, 0)}\n                className=\"EntityEditorGroup-input\"\n                placeholder=\"value\"\n                onChange={e => {\n                  const newVal = safeParse(e.target.value, e.target.value);\n                  const newVars = _.cloneDeep(variables);\n                  _.set(newVars, k, _.isObject(newVal) && _.isEmpty(newVal) ? '' : newVal);\n                  editor.updateCurrentCtxVariables(newVars);\n                }}\n                label={{ content: k, basic: true, className: 'Label-fw' }}\n                fluid\n              />\n            );\n          })}\n        </div>\n      )}\n    />\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(UsedCtxVariables));\n","import React from 'react';\nimport _ from 'lodash';\nimport pluralize from 'pluralize';\nimport { inject, observer } from 'mobx-react';\nimport { safeStringify, safeParse } from '@platform/utils/json';\n\nimport EntityEditorGroup from '../EntityEditorGroup';\nimport FormInput from '../FormInput';\n\nconst UsedEnvironmentVariables = props => {\n  const { name, currentEditor, className, showEmptyMessage } = props;\n\n  const variables = currentEditor.currentPopulatedEnvVariables;\n\n  // prepare list of env variables which should be obscured\n  const obscuredFields = [];\n  const auth = _.get(currentEditor, 'currentStep.data.input.auth', {});\n  if (auth.type === 'basic') {\n    const matches = auth.password.match(/{\\$\\$\\.env\\.(.+)}/);\n    if (matches) {\n      obscuredFields.push(matches[1]);\n    }\n  }\n\n  const hasVariables = !_.isEmpty(variables);\n\n  if (!hasVariables && !showEmptyMessage) return null;\n\n  const newVars = _.cloneDeep(variables);\n  let subtitle;\n  let notSetCount = 0;\n  let active;\n  let warning;\n\n  _.forEach(variables, v => {\n    if (_.isUndefined(v) || (typeof v === 'string' && _.isEmpty(v))) {\n      notSetCount += 1;\n    }\n  });\n\n  if (notSetCount > 0) {\n    warning = true;\n    subtitle = `${notSetCount} ${pluralize('variable', notSetCount)} not set`;\n  } else {\n    active = true;\n  }\n\n  let contents;\n\n  if (hasVariables) {\n    contents = _.map(variables, (variable, key) => {\n      return (\n        <FormInput\n          key={key}\n          value={safeStringify(variable, 0)}\n          className=\"EntityEditorGroup-input\"\n          placeholder=\"value\"\n          type={_.includes(obscuredFields, key) ? 'password' : 'text'}\n          onChange={(e, { value }) => {\n            let newVal = safeParse(value, value);\n\n            if (_.isObject(newVal) && _.isEmpty(newVal)) {\n              newVal = '';\n            }\n\n            _.set(newVars, key, newVal);\n\n            currentEditor.updateVariables(newVars);\n          }}\n          label={{ content: key, basic: true, className: 'Label-fw' }}\n          fluid\n        />\n      );\n    });\n  } else if (showEmptyMessage) {\n    contents = <div className=\"p-4\">{showEmptyMessage}</div>;\n  }\n\n  return (\n    <EntityEditorGroup\n      id=\"used-env\"\n      className={`EnvVariableEditor ${className}`}\n      name={name || '$$.env'}\n      active={active}\n      warning={warning}\n      subtitle={subtitle}\n      forceOpen={warning}\n      defaultOpen\n      contentFactory={() => <div>{contents}</div>}\n    />\n  );\n};\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const currentEditor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    currentEditor,\n  };\n})(observer(UsedEnvironmentVariables));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport FormCheckbox from '@platform/components/FormCheckbox';\nimport OAuth2TokenFormModal from '@platform/components/OAuth2TokenFormModal';\nimport UsedPathParams from '@platform/components/UsedPathParams';\nimport UsedCtxVariables from '@platform/components/UsedCtxVariables';\nimport UsedEnvironmentVariables from '@platform/components/UsedEnvironmentVariables';\nimport LearnMore from '@platform/components/LearnMore';\n\nconst Settings = props => {\n  const { editorId, standalone, currentEnv, updateVariables, oauth2, modeling } = props;\n\n  const elems = [];\n\n  if (standalone) {\n    elems.push(\n      <FormCheckbox\n        key=\"skipPrism\"\n        className=\"mt-4\"\n        checked={currentEnv.skipPrism}\n        onChange={() => {\n          updateVariables({\n            ...currentEnv,\n            skipPrism: !currentEnv.skipPrism,\n          });\n        }}\n        label=\"Send requests directly from the browser (CORS must be enabled)\"\n        labelPosition=\"left\"\n        labelStyle={{ color: 'black' }}\n        tip={\n          <div>\n            Disabling this option will proxy HTTP requests through Prism in order to bypass Cross\n            Origin Resource Sharing (CORS). <LearnMore feature=\"sending-http-requests\" />\n          </div>\n        }\n        inline\n      />\n    );\n  }\n\n  elems.push(\n    <UsedPathParams key=\"1\" editorId={editorId} name=\"Path Params\" className=\"text-sm mt-4\" />\n  );\n\n  if (!modeling) {\n    elems.push(\n      <UsedCtxVariables key=\"2\" editorId={editorId} name=\"$.ctx\" className=\"text-sm mt-4\" />\n    );\n  }\n\n  elems.push(\n    <UsedEnvironmentVariables\n      key=\"3\"\n      editorId={editorId}\n      name=\"$$.env\"\n      className=\"text-sm mt-4\"\n      showEmptyMessage=\"No $$.env variables are being used in this request.\"\n    />\n  );\n\n  if (oauth2) {\n    elems.push(\n      <div key=\"4\" className=\"mt-4\">\n        <OAuth2TokenFormModal oauth2={oauth2} readOnly />\n      </div>\n    );\n  }\n\n  return elems;\n};\n\nexport default Settings;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport copy from 'copy-to-clipboard';\nimport TimeAgo from 'react-timeago';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Table, Popup, Dropdown } from 'semantic-ui-react';\n\nimport { alert } from '@platform/utils/alert';\n\nimport OAuth2TokenFormModal from '../../../../OAuth2TokenFormModal';\nimport EntityEditorGroup from '../../../../EntityEditorGroup';\n\nimport { updateInputWithAuth } from '@platform/utils/authorization';\n\nconst OAuth2 = props => {\n  const {\n    ui = {},\n    uiScope,\n    updateUi,\n\n    userId,\n    handleUpdate,\n    currentVariables,\n    activeToken,\n    input = {},\n    config = {},\n    editor,\n    tokenStore,\n  } = props;\n\n  const tokens = tokenStore.tokenList;\n\n  return (\n    <div>\n      <OAuth2TokenFormModal oauth2={config.oauth2} />\n\n      <EntityEditorGroup\n        id=\"oath-Tokens\"\n        className=\"text-sm mt-6\"\n        name=\"Tokens\"\n        active={activeToken}\n        error={!activeToken}\n        forceOpen={!activeToken}\n        subtitle={!activeToken ? 'No active token' : null}\n        contentFactory={() =>\n          !_.isEmpty(tokens) ? (\n            <div className=\"p-4\">\n              <Table\n                basic=\"very\"\n                tableData={tokens}\n                compact=\"very\"\n                headerRow={\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>Name</Table.HeaderCell>\n                    <Table.HeaderCell>Value</Table.HeaderCell>\n                    <Table.HeaderCell>Scope</Table.HeaderCell>\n                    <Table.HeaderCell>Created At</Table.HeaderCell>\n                    <Table.HeaderCell />\n                  </Table.Row>\n                }\n                renderBodyRow={(token, index) => {\n                  const active = activeToken === token.access_token;\n\n                  return (\n                    <Table.Row key={index}>\n                      <Table.Cell className=\"oauth-add\">\n                        <Dropdown\n                          className={active ? 'active-token' : null}\n                          trigger={\n                            <div\n                              disabled={true}\n                              className={cn(\n                                'text-sm px-2 py-1/2 text-white rounded',\n                                active\n                                  ? 'bg-green cursor-default'\n                                  : 'bg-blue cursor-pointer hover:opacity-100 opacity-85'\n                              )}\n                            >\n                              {active ? 'Active' : 'Set Active'}\n                            </div>\n                          }\n                        >\n                          <Dropdown.Menu>\n                            <Dropdown.Item\n                              text=\"Add To Headers\"\n                              onClick={() => {\n                                handleUpdate(\n                                  'set',\n                                  ['input'],\n                                  updateInputWithAuth(\n                                    input,\n                                    {\n                                      access_token: token.access_token,\n                                      useHeader: true,\n                                      type: 'oauth2',\n                                    },\n                                    currentVariables\n                                  )\n                                );\n\n                                if (editor) {\n                                  editor.updateVariables(\n                                    { oauth_access_token: token.access_token },\n                                    { preserveShared: true }\n                                  );\n                                }\n\n                                alert.success('Access token added to headers.');\n                              }}\n                            />\n                            <Dropdown.Item\n                              text=\"Add To Query\"\n                              onClick={() => {\n                                handleUpdate(\n                                  'set',\n                                  ['input'],\n                                  updateInputWithAuth(\n                                    input,\n                                    {\n                                      access_token: token.access_token,\n                                      type: 'oauth2',\n                                    },\n                                    currentVariables\n                                  )\n                                );\n\n                                if (editor) {\n                                  editor.updateVariables(\n                                    { oauth_access_token: token.access_token },\n                                    { preserveShared: true }\n                                  );\n                                }\n\n                                alert.success('Access token added to query.');\n                              }}\n                            />\n                          </Dropdown.Menu>\n                        </Dropdown>\n                      </Table.Cell>\n                      <Table.Cell>{token.name}</Table.Cell>\n                      <Table.Cell>\n                        <Popup\n                          size=\"mini\"\n                          trigger={\n                            <a\n                              href=\"#\"\n                              onClick={e => {\n                                e.preventDefault();\n                                copy(token.access_token);\n                                updateUi('set', uiScope.concat(['copy']), 'Copied!');\n                              }}\n                            >\n                              {`****${token.access_token.slice(-4)}`}{' '}\n                            </a>\n                          }\n                          content={ui.copy}\n                          onClose={() =>\n                            updateUi(\n                              'set',\n                              uiScope.concat(['copy']),\n                              'Click to copy token value to clipboard'\n                            )\n                          }\n                          onOpen={() =>\n                            updateUi(\n                              'set',\n                              uiScope.concat(['copy']),\n                              'Click to copy token value to clipboard'\n                            )\n                          }\n                          inverted\n                        />\n                      </Table.Cell>\n                      <Table.Cell>{token.scope}</Table.Cell>\n                      <Table.Cell>\n                        <TimeAgo date={token.created_at} minPeriod={60} />\n                      </Table.Cell>\n                      <Table.Cell textAlign=\"right\">\n                        <Button\n                          icon=\"trash\"\n                          color=\"red\"\n                          size=\"tiny\"\n                          onClick={() => {\n                            if (!tokenStore) return;\n\n                            const r = window.confirm('Are you sure you want to delete this token?');\n                            if (!r) return;\n\n                            const remove = tokenStore.remove(token.id, {\n                              userId,\n                            });\n\n                            if (window.Electron && remove) {\n                              remove\n                                .then(() => {\n                                  alert.warning('Token removed');\n                                })\n                                .catch(e => {\n                                  alert.error(`Error removing token: ${String(e)}`);\n                                });\n                            }\n                          }}\n                        />\n                      </Table.Cell>\n                    </Table.Row>\n                  );\n                }}\n              />\n            </div>\n          ) : (\n            <div className=\"text-sm p-4 text-muted\">You have no tokens</div>\n          )\n        }\n      />\n    </div>\n  );\n};\n\nexport default inject((stores, props) => {\n  const { oauthTokenStore, userService, projectService } = stores;\n\n  const userId = _.get(userService, 'authorizedUser.id');\n  const projectId = _.get(projectService, 'current.id');\n\n  const tokenStore = oauthTokenStore.getOrRegisterInstance(userId, projectId);\n\n  return {\n    tokenStore,\n  };\n})(observer(OAuth2));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Checkbox } from 'semantic-ui-react';\n\nimport { updateInputWithAuth } from '@platform/utils/authorization';\n\nimport FormInput from '../../../../FormInput';\nimport FormCheckbox from '../../../../FormCheckbox';\nimport FormSelect from '../../../../FormSelect';\n\nimport OAuth2 from './oauth2';\n\nconst OAuth1SignatureSelector = props => {\n  return (\n    <FormSelect\n      {...props}\n      header=\"Signature Method\"\n      options={[\n        { text: 'HMAC-SHA1', value: 'HMAC-SHA1' },\n        { text: 'HMAC-SHA256', value: 'HMAC-SHA256' },\n        { text: 'PLAINTEXT', value: 'PLAINTEXT' },\n      ]}\n      defaultValue=\"HMAC-SHA1\"\n      placeholder=\"OAuth1 Signature Method\"\n      size=\"tiny\"\n    />\n  );\n};\n\nconst AuthSelector = props => {\n  return (\n    <FormSelect\n      {...props}\n      options={[\n        { text: 'No Auth', value: 'none' },\n        { text: 'Basic Auth', value: 'basic' },\n        { text: 'Digest Auth', value: 'digest' },\n        { text: 'OAuth 1.0', value: 'oauth1' },\n        { text: 'OAuth 2.0', value: 'oauth2' },\n        { text: 'AWS Signature', value: 'aws' },\n      ]}\n      placeholder=\"Auth Type\"\n      size=\"tiny\"\n    />\n  );\n};\n\nclass AuthTab extends React.Component {\n  renderAws = () => {\n    const { input = {}, handleUpdate, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['accessKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'accessKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Access Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['secretKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'secretKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Secret Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['region']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'region'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'AWS Region',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"for example, `us-east-1`\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['service']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'service'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Service Name',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"for example, `sqs`\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['sessionToken']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'sessionToken'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Session Token',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"optional\"\n            fluid\n          />\n        </div>\n      </div>\n    );\n  };\n\n  renderBasicAuth = () => {\n    const { input = {}, handleUpdate, ui = {}, uiScope, updateUi, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm max-w-md\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['username']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'username'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Username',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <FormInput\n            input={{\n              type: ui.showPassword ? 'text' : 'password',\n              value: _.get(auth, ['password']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'password'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Password',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div>\n          <Checkbox\n            label=\"Show Password\"\n            value={String(ui.showPassword)}\n            onChange={(name, e) => {\n              updateUi('set', uiScope.concat(['showPassword']), e.checked);\n            }}\n            disabled={readOnly}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  renderOAuth1 = () => {\n    const { input = {}, handleUpdate, readOnly } = this.props;\n\n    const { auth = {} } = input;\n\n    return (\n      <div className=\"text-sm max-w-md\">\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['consumerKey']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'consumerKey'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Consumer Key',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['consumerSecret']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'consumerSecret'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Consumer Secret',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['token']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'token'], value);\n              },\n              readOnly,\n            }}\n            label={{ content: 'Token', basic: true, className: 'Label-fw' }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['tokenSecret']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'tokenSecret'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Token Secret',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormInput\n            input={{\n              value: _.get(auth, ['nonceLength']),\n              onChange(e, { value }) {\n                handleUpdate('set', ['input', 'auth', 'nonceLength'], value);\n              },\n              readOnly,\n            }}\n            label={{\n              content: 'Nonce Length',\n              basic: true,\n              className: 'Label-fw',\n            }}\n            placeholder=\"if blank, generates a 32 character nonce\"\n            fluid\n          />\n        </div>\n\n        <div className=\"mb-3\">\n          <OAuth1SignatureSelector\n            value={_.get(auth, ['signatureMethod'])}\n            onChange={val => {\n              handleUpdate('set', ['input', 'auth', 'signatureMethod'], val);\n            }}\n          />\n        </div>\n\n        <div className=\"mb-2\">\n          <FormCheckbox\n            label=\"Add as header\"\n            disabled={readOnly}\n            checked={_.get(auth, ['useHeader'])}\n            onChange={checked => {\n              if (checked) {\n                handleUpdate('set', ['input', 'auth', 'useHeader'], checked);\n              } else {\n                handleUpdate('unset', ['input', 'auth', 'useHeader']);\n              }\n            }}\n          />\n        </div>\n\n        <div>\n          <FormCheckbox\n            label=\"Encode OAuth Signature\"\n            disabled={readOnly}\n            checked={_.get(auth, ['encode'])}\n            onChange={checked => {\n              if (checked) {\n                handleUpdate('set', ['input', 'auth', 'encode'], checked);\n              } else {\n                handleUpdate('unset', ['input', 'auth', 'encode']);\n              }\n            }}\n          />\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const {\n      input = {},\n      handleUpdate,\n      submitting,\n      currentVariables,\n      readOnly,\n      ui,\n      uiScope,\n      updateUi,\n      userId,\n      activeToken,\n      editor,\n      config,\n    } = this.props;\n\n    const { auth = {} } = input;\n\n    // MM TODO: these auth sections should be in their own components\n\n    let canUpdateAuth = false;\n\n    let contentElem;\n\n    switch (auth.type) {\n      case 'basic':\n        canUpdateAuth = true;\n        contentElem = this.renderBasicAuth();\n        break;\n\n      case 'digest':\n        contentElem = <div className=\"text-sm\">Coming soon.</div>;\n        break;\n\n      case 'oauth1':\n        canUpdateAuth = true;\n        contentElem = this.renderOAuth1();\n        break;\n\n      case 'oauth2':\n        contentElem = (\n          <OAuth2\n            ui={ui}\n            uiScope={uiScope}\n            updateUi={updateUi}\n            userId={userId}\n            input={input}\n            config={config}\n            editor={editor}\n            activeToken={activeToken}\n            currentVariables={currentVariables}\n            handleUpdate={handleUpdate}\n          />\n        );\n        break;\n\n      case 'aws':\n        canUpdateAuth = true;\n        contentElem = this.renderAws();\n        break;\n\n      default:\n        contentElem = null;\n    }\n\n    return (\n      <div>\n        <div className={`flex content-center ${auth.type ? 'mb-6' : ''}`}>\n          <AuthSelector\n            className=\"mr-6\"\n            value={auth.type}\n            disabled={readOnly}\n            onChange={e => {\n              switch (e) {\n                case 'basic':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'basic',\n                    username: '',\n                    password: '',\n                  });\n                  break;\n                case 'digest':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'digest',\n                  });\n                  break;\n                case 'oauth1':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'oauth1',\n                    consumerKey: '',\n                    consumerSecret: '',\n                    token: '',\n                    tokenSecret: '',\n                    nonceLength: '',\n                    signatureMethod: 'HMAC-SHA1',\n                    encode: true,\n                  });\n                  break;\n                case 'oauth2':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'oauth2',\n                  });\n                  break;\n                case 'aws':\n                  handleUpdate('set', ['input', 'auth'], {\n                    type: 'aws',\n                  });\n                  break;\n                default:\n                  handleUpdate('unset', ['input', 'auth']);\n              }\n            }}\n          />\n\n          {canUpdateAuth ? (\n            <Button\n              disabled={submitting}\n              onClick={() => {\n                handleUpdate('set', ['input'], updateInputWithAuth(input, auth, currentVariables));\n              }}\n              compact\n              basic\n              size=\"tiny\"\n            >\n              Update Request\n            </Button>\n          ) : null}\n        </div>\n\n        {contentElem}\n      </div>\n    );\n  }\n}\n\nexport default inject((stores, props) => {\n  const { userService, projectService } = stores;\n\n  return {\n    projectId: _.get(projectService, 'current.id'),\n    userId: _.get(userService, 'authorizedUser.id'),\n  };\n})(observer(AuthTab));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormSelect from '../../../FormSelect';\n\nconst LogicLocation = ({ locations, ...extraProps }) => {\n  return (\n    <FormSelect\n      placeholder=\"choose a location\"\n      options={_.map(locations, l => ({ text: l, value: l }))}\n      {...extraProps}\n    />\n  );\n};\n\nexport default LogicLocation;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Button, Icon, Popup } from 'semantic-ui-react';\nimport { combinePathSelectors } from '@platform/utils/general';\nimport { splitLogicPath } from '@platform/utils/collections';\n\nimport FormInput from '../../../FormInput';\nimport LearnMore from '../../../LearnMore';\n\nimport LogicLocation from './logic-location';\n\nexport const CapturesTabItem = ({ step, active, onClick }) => {\n  const captures = _.get(step, 'after.transforms');\n  let captureName = 'Captures';\n  if (!_.isEmpty(captures)) {\n    captureName = (\n      <span>\n        Captures{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{captures.length}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"captures\" active={active} onClick={onClick}>\n      {captureName}\n    </Menu.Item>\n  );\n};\n\nconst Captures = ({ logicLocations, fields = [], handleUpdate, readOnly }) => {\n  return (\n    <div>\n      <div className={`${!_.isEmpty(fields) ? 'mb-3' : ''}`}>\n        <Button\n          onClick={() => handleUpdate('push', [], { target: '$.ctx', source: 'output.body' })}\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n        >\n          Add Capture\n        </Button>\n\n        <span className=\"c-muted ml-2\">\n          <Popup\n            trigger={<Icon name=\"question circle\" />}\n            size=\"small\"\n            position=\"top center\"\n            hoverable\n            wide\n          >\n            Save output values to the temporary $.ctx object to re-use them in subsequent steps,\n            within a single run.\n            <br />\n            <LearnMore className=\"mt-2 d-b\" feature=\"referencing-other-scenarios\" />\n          </Popup>\n        </span>\n      </div>\n\n      {_.map(fields, (field, index) => {\n        const { location: targetLocation, path: targetPath } = splitLogicPath({\n          locations: logicLocations,\n          path: field.target,\n        });\n        const { location: sourceLocation, path: sourcePath } = splitLogicPath({\n          locations: logicLocations,\n          path: field.source,\n        });\n\n        return (\n          <div key={index} className=\"mt-2 text-sm\">\n            <div className=\"flex items-center\">\n              <LogicLocation\n                className=\"pr-2\"\n                disabled={readOnly}\n                value={targetLocation}\n                onChange={value => {\n                  handleUpdate('set', [index, 'target'], combinePathSelectors([value, targetPath]));\n                }}\n                placeholder=\"target location\"\n                locations={logicLocations}\n                search\n              />\n\n              <FormInput\n                className=\"flex-1\"\n                input={{\n                  value: targetPath,\n                  readOnly,\n                  onChange(e, { value }) {\n                    handleUpdate(\n                      'set',\n                      [index, 'target'],\n                      combinePathSelectors([targetLocation, value])\n                    );\n                  },\n                }}\n                placeholder=\"path to property to save, ie `userId`\"\n                fluid\n              />\n\n              <div className=\"ml-3 mr-3 font-bold\">=</div>\n\n              <LogicLocation\n                className=\"pr-2\"\n                disabled={readOnly}\n                value={sourceLocation}\n                onChange={value => {\n                  handleUpdate('set', [index, 'source'], combinePathSelectors([value, sourcePath]));\n                }}\n                placeholder=\"source location\"\n                locations={logicLocations}\n                search\n              />\n\n              <FormInput\n                className=\"flex-1\"\n                input={{\n                  value: sourcePath,\n                  readOnly,\n                  onChange(e, { value }) {\n                    handleUpdate(\n                      'set',\n                      [index, 'source'],\n                      combinePathSelectors([sourceLocation, value])\n                    );\n                  },\n                }}\n                placeholder=\"path to property to capture, ie `users[0].id`\"\n                fluid\n              />\n\n              <div className=\"ml-3\">\n                <Button\n                  icon=\"trash\"\n                  disabled={readOnly}\n                  onClick={() => {\n                    if (fields.length === 1) {\n                      handleUpdate('unset', []);\n                    } else {\n                      handleUpdate('pull', [], index);\n                    }\n                  }}\n                  size=\"tiny\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Captures;\n","import _ from 'lodash';\nimport HTTPSnippet from 'httpsnippet';\n\nimport { safeStringify, safeParse } from '../json';\nimport { replacePathParams } from '../url';\nimport { replaceVariables } from '../variables';\n\nexport const languages = [\n  {\n    text: 'Shell',\n    value: 'shell',\n    mode: 'bash',\n    codechoice: 'shell',\n    libraries: [\n      { text: 'cURL', librarychoice: 'curl', value: 'curl' },\n      { text: 'HTTPie', librarychoice: 'httpie', value: 'httpie' },\n      { text: 'Wget', librarychoice: 'wget', value: 'wget' },\n    ],\n  },\n  {\n    text: 'Go',\n    value: 'go',\n    mode: 'go',\n    codechoice: 'go',\n    librarychoice: null,\n  },\n  {\n    text: 'Java',\n    value: 'java',\n    mode: 'java',\n    codechoice: 'java',\n    libraries: [\n      { text: 'Unirest', librarychoice: 'unirest', value: 'unirest' },\n      { text: 'OkHttp', librarychoice: 'okhttp', value: 'okhttp' },\n    ],\n  },\n  {\n    text: 'Javascript',\n    value: 'javascript',\n    mode: 'javascript',\n    codechoice: 'javascript',\n    libraries: [\n      { text: 'XMLHttpRequest', librarychoice: 'xmlhttprequest', value: 'xmlhttprequest' },\n      { text: 'jQuery', librarychoice: 'jquery', value: 'jquery' },\n    ],\n  },\n  {\n    text: 'Node',\n    value: 'node',\n    mode: 'javascript',\n    codechoice: 'node',\n    libraries: [\n      { text: 'Native', librarychoice: 'native', value: 'native' },\n      { text: 'Request', librarychoice: 'request', value: 'request' },\n      { text: 'Unirest', librarychoice: 'unirest', value: 'unirest' },\n    ],\n  },\n  {\n    text: 'Obj-C',\n    value: 'objc',\n    mode: 'objectivec',\n    codechoice: 'objc',\n    librarychoice: null,\n  },\n  {\n    text: 'PHP',\n    value: 'php',\n    mode: 'php',\n    codechoice: 'php',\n    libraries: [\n      { text: 'ext-curl', librarychoice: 'curl', value: 'curl' },\n      { text: 'pecl/http v1', librarychoice: 'http1', value: 'http1' },\n      { text: 'pecl/http v2', librarychoice: 'http2', value: 'http2' },\n    ],\n  },\n  {\n    text: 'Python',\n    value: 'python',\n    mode: 'python',\n    codechoice: 'python',\n    libraries: [\n      { text: 'Python 3', librarychoice: 'python3', value: 'python3' },\n      { text: 'Requests', librarychoice: 'requests', value: 'requests' },\n    ],\n  },\n  {\n    text: 'Powershell',\n    value: 'powershell',\n    mode: 'powershell',\n    codechoice: 'powershell',\n    libraries: [\n      { text: 'WebRequest', librarychoice: 'webrequest', value: 'webrequest' },\n      { text: 'RestMethod', librarychoice: 'restmethod', value: 'restmethod' },\n    ],\n  },\n  {\n    text: 'Ruby',\n    value: 'ruby',\n    mode: 'ruby',\n    codechoice: 'ruby',\n    librarychoice: null,\n  },\n  {\n    text: 'Swift',\n    value: 'swift',\n    mode: 'swift',\n    codechoice: 'swift',\n    librarychoice: null,\n  },\n  {\n    text: 'C#',\n    value: 'csharp',\n    mode: 'csharp',\n    codechoice: 'csharp',\n    librarychoice: null,\n  },\n  {\n    text: 'C',\n    value: 'c',\n    mode: 'cpp',\n    codechoice: 'c',\n    librarychoice: null,\n  },\n];\n\nexport const buildSnippet = (props = {}, options = {}) => {\n  const { method, url, headers = {}, body = {}, auth = {}, params = {}, schemes = [] } = props;\n\n  let snippet;\n  let data = {};\n  let computedHeaders = [];\n  let u = url;\n  let postData = {};\n\n  if (!method || _.isEmpty(u)) {\n    return { error: 'Enter a valid URL, and request method, to see code generation' };\n  }\n\n  if (!_.isEmpty(params)) {\n    const paramVals = _.values(params);\n    if (paramVals.length !== _.without(paramVals, false, null, '', undefined, NaN).length) {\n      return { error: 'One or more variables not set' };\n    }\n  }\n\n  if (!_.isEmpty(headers)) {\n    computedHeaders = _.map(headers, (value, key) => {\n      if (value) {\n        return { name: key, value };\n      }\n    });\n\n    if (_.has(headers, 'Content-Type')) {\n      _.set(postData, 'mimeType', headers['Content-Type']);\n    }\n  }\n\n  const replacedAuth = replaceVariables(auth, params);\n  if (replacedAuth.type === 'basic' && replacedAuth.username) {\n    const basicAuth = window.btoa(`${replacedAuth.username}:${replacedAuth.password}`);\n    computedHeaders.push({\n      name: 'Authorization',\n      value: `Basic ${basicAuth}`,\n    });\n  }\n\n  // postData params is only relevant to form-urlencoded\n  if (!_.isEmpty(body)) {\n    if (\n      _.isObject(body) &&\n      _.get(headers, 'Content-Type') === 'application/x-www-form-urlencoded'\n    ) {\n      const params = _.map(body, (value, key) => {\n        return { name: key, value };\n      });\n      _.set(postData, 'params', params);\n    } else {\n      _.set(postData, 'text', safeStringify(safeParse(body), 0));\n    }\n  }\n\n  // params need to be strings. http-snippet will choke if use a number as a header value, for example.\n  for (const k in params) {\n    params[k] = String(params[k]);\n  }\n\n  _.set(data, 'method', method.toUpperCase());\n  _.set(data, 'url', replacePathParams(safeStringify(u), params));\n  _.set(data, 'headers', replaceVariables(_.compact(computedHeaders), params));\n  _.set(data, 'postData', replaceVariables(postData, params));\n\n  if (!/^[a-z]+:\\/\\//i.test(data.url)) {\n    data.url = (schemes[0] || 'http') + '://' + data.url;\n  }\n\n  try {\n    snippet = new HTTPSnippet(data);\n\n    const { codechoice, librarychoice } = options;\n\n    snippet = snippet.convert(codechoice, librarychoice);\n  } catch (err) {\n    console.error('code generation error', { props, options, err });\n    return { error: 'Could not generate code. More information in the developer console.' };\n  }\n\n  return snippet;\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport copy from 'copy-to-clipboard';\nimport { languages, buildSnippet } from '@platform/utils/httpsnippet';\nimport { alert } from '@platform/utils/alert';\nimport { Button, Icon } from 'semantic-ui-react';\n\nimport Highlight from '../Highlight';\nimport FormDropdown from '../FormDropdown';\n\nconst CodeGenerator = props => {\n  const { className, updateUi, ui, data = {} } = props;\n\n  const selected = _.get(ui, 'selected') || _.head(languages);\n  const libraries = selected.libraries;\n\n  const { librarychoice, codechoice, mode } = selected;\n\n  const snippet = buildSnippet(data, { codechoice, librarychoice });\n\n  const hasError = _.has(snippet, 'error');\n\n  let code;\n\n  if (hasError) {\n    code = <div className=\"c-muted p-2\">{snippet.error}</div>;\n  } else {\n    code = (\n      <div className=\"bg-white\">\n        <Highlight mode={mode}>{snippet}</Highlight>\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn('CodeGenerator', className)}>\n      <div className=\"flex mb-6 items-end\">\n        <div className=\"flex items-center w-1/2\">\n          <div className=\"flex-1\">\n            <div className=\"font-bold mb-2\">Language</div>\n\n            <FormDropdown\n              value={selected.value}\n              options={languages}\n              onChange={(e, { value }) => {\n                const selected = _.find(languages, function(o) {\n                  return o.value === value;\n                });\n\n                updateUi('set', 'selected', selected);\n              }}\n              selection\n              search\n              fluid\n            />\n          </div>\n\n          {libraries && (\n            <div className=\"flex-1 ml-4\">\n              <div className=\"font-bold mb-2\">Library</div>\n\n              <FormDropdown\n                className=\"flex-1\"\n                value={_.get(selected, 'librarychoice') || _.get(selected, 'libraries.0.value')}\n                options={libraries}\n                onChange={(e, { value }) => {\n                  const selected = _.find(libraries, function(o) {\n                    return o.value === value;\n                  });\n\n                  updateUi('set', 'selected.librarychoice', selected.librarychoice);\n                }}\n                fluid\n                selection\n                search\n              />\n            </div>\n          )}\n        </div>\n\n        {!hasError && (\n          <div className=\"ml-4\">\n            <Button\n              title=\"Copy to clipboard\"\n              icon=\"copy\"\n              onClick={() => {\n                try {\n                  copy(snippet);\n                  alert.success('Copied!');\n                } catch (error) {\n                  alert.error(`Error copying to clipboard: ${error.message}`);\n                }\n              }}\n            />\n          </div>\n        )}\n      </div>\n\n      {code}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { editorId }) => ({\n  ...appStore.injectUi(`codegen-${editorId}`),\n}))(observer(CodeGenerator));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport CodeGenerator from '../../../CodeGenerator';\n\nimport { buildQueryString } from '@platform/utils/url';\n\nfunction CodeGen(props) {\n  const { step, vars, specs } = props;\n\n  let data = _.cloneDeep(step.input);\n\n  if (!data) {\n    return null;\n  }\n\n  const newUrl = buildQueryString({ url: data.url, params: data.query }).url;\n\n  const params = {};\n\n  _.forEach(vars, (sub, type) => {\n    if (!_.isEmpty(sub)) {\n      _.forEach(sub, (value, param) => {\n        let p;\n        switch (type) {\n          case 'ctx':\n            p = `$.ctx.${param}`;\n            break;\n          case 'env':\n            p = `$$.env.${param}`;\n            break;\n          default:\n            p = param;\n        }\n\n        params[p] = value;\n      });\n    }\n  });\n\n  _.set(data, 'params', params);\n  _.set(data, 'url', newUrl);\n\n  const schemes = specs.reduce((schemes, spec) => {\n      (spec.data.schemes || []).forEach(scheme =>\n          !schemes.includes(scheme) && schemes.push(scheme));\n      return schemes;\n  }, []);\n\n  _.set(data, 'schemes', schemes);\n\n  return <CodeGenerator className=\"text-sm\" data={data} />;\n}\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  const vars = {\n    env: editor.currentPopulatedEnvVariables,\n    ctx: editor.currentPopulatedCtxVariables,\n    path: editor.currentStepPathParams,\n  };\n\n  return {\n    vars,\n    specs: editor.connectedSpecs,\n  };\n})(observer(CodeGen));\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Menu } from 'semantic-ui-react';\n\nimport FormInputMap from '../../../FormInputMap';\n\nexport const HeadersTabItem = ({ step, active, onClick }) => {\n  const headers = _.get(step, 'input.headers');\n\n  let headerName = 'Headers';\n  if (!_.isEmpty(headers)) {\n    headerName = (\n      <span>\n        Headers{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{_.size(headers)}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"headers\" active={active} onClick={onClick}>\n      {headerName}\n    </Menu.Item>\n  );\n};\n\nconst Headers = ({ step, handleUpdate, readOnly }) => {\n  return [\n    <FormInputMap\n      key=\"headersList\"\n      fields={_.get(step, 'headers')}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['input', 'headers'].concat(p), v);\n      }}\n      addText=\"Add Header\"\n      namePlaceholder=\"header name\"\n      valuePlaceholder=\"header value\"\n      size=\"tiny\"\n      readOnly={readOnly}\n    />,\n  ];\n};\n\nexport default Headers;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport { Menu } from 'semantic-ui-react';\n\nimport FormInputMap from '../../../FormInputMap';\n\nexport const QueryTabItem = ({ step, active, onClick }) => {\n  const query = _.get(step, 'input.query');\n\n  let headerName = 'Query';\n  if (!_.isEmpty(query)) {\n    headerName = (\n      <span>\n        Query{' '}\n        <b>\n          <span className=\"ml-2 text-active\">[{_.size(query)}]</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"query\" active={active} onClick={onClick}>\n      {headerName}\n    </Menu.Item>\n  );\n};\n\nconst Query = ({ step, handleUpdate, readOnly }) => {\n  return [\n    <FormInputMap\n      key=\"queryList\"\n      fields={_.get(step, 'query', {})}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['input', 'query'].concat(p), v);\n      }}\n      addText=\"Add Query\"\n      namePlaceholder=\"query name\"\n      valuePlaceholder=\"query value\"\n      size=\"tiny\"\n      readOnly={readOnly}\n    />,\n  ];\n};\n\nexport default Query;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Button, Icon, Popup } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport Highlight from '../../../Highlight';\nimport FormCodeEditor from '../../../FormCodeEditor';\n\nexport const ScriptsTabItem = ({ step, active, onClick }) => {\n  let scriptName = 'Scripts';\n  let hasScripts;\n  if (!_.isEmpty(_.get(step, 'before.script'))) {\n    hasScripts = true;\n  }\n  if (!_.isEmpty(_.get(step, 'after.script'))) {\n    hasScripts = true;\n  }\n  if (hasScripts) {\n    scriptName = (\n      <span>\n        {scriptName}{' '}\n        <b>\n          <span className=\"ml-2 text-active\">\n            <Icon name=\"check\" />\n          </span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"scripts\" active={active} onClick={onClick}>\n      {scriptName}\n    </Menu.Item>\n  );\n};\n\nconst cheatsheet = `// save back to your current environment\n$$.env.set('apiKey', output.body.get('apiKey'));\n\n// add a test (you can also make assertions in the tests UI tab)\ntests['it should return a 200 status code'] = output.status.get() === 200;\n\n// use lodash\ntests['test some object equality'] = _.isEqual({foo: 'bar'}, output.body.get());\n\n// share temporary data with subsequent steps by setting on the ctx object\n$.ctx.set('targetId', _.random(1, 100));\n\n// manipulate the request in a before script\ninput.headers.set('Authorization', 'Bearer ' + $$.env.get('apiKey'));\ninput.method.set('post');`;\n\nconst Scripts = props => {\n  const {\n    scenarioId,\n    stepIndex,\n    step,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    readOnly,\n    autocompleteScopes,\n  } = props;\n\n  const { activeItem = 'after' } = ui;\n  const beforeScript = _.get(step, 'before.script', '');\n  const afterScript = _.get(step, 'after.script', '');\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeItem'], name);\n  };\n\n  let contentElem;\n  switch (activeItem) {\n    case 'before':\n      contentElem = (\n        <FormCodeEditor\n          name={`${scenarioId}-${stepIndex}-before`}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          input={{\n            value: beforeScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['before', 'script']);\n              } else {\n                handleUpdate('set', ['before', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    case 'after':\n      contentElem = (\n        <FormCodeEditor\n          name={`${scenarioId}-${stepIndex}-after`}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          input={{\n            value: afterScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['after', 'script']);\n              } else {\n                handleUpdate('set', ['after', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>select an option above</div>;\n  }\n\n  let beforeName = 'Before';\n  if (!_.isEmpty(beforeScript)) {\n    beforeName = (\n      <span>\n        {beforeName}{' '}\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  let afterName = 'After';\n  if (!_.isEmpty(afterScript)) {\n    afterName = (\n      <span>\n        {afterName}{' '}\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"mb-6 flex items-center\">\n        <div>\n          <Menu secondary pointing size=\"tiny\">\n            <Menu.Item header>Step Stage</Menu.Item>\n\n            <Menu.Item name=\"before\" active={activeItem === 'before'} onClick={handleItemClick}>\n              {beforeName}\n            </Menu.Item>\n\n            <Menu.Item name=\"after\" active={activeItem === 'after'} onClick={handleItemClick}>\n              {afterName}\n            </Menu.Item>\n          </Menu>\n        </div>\n\n        <div className=\"ml-6\">\n          <Button\n            compact\n            size=\"tiny\"\n            onClick={() => {\n              updateUi('set', ['showCheatsheet'], !ui.showCheatsheet);\n            }}\n            basic\n          >\n            {ui.showCheatsheet ? 'Hide Cheatsheet' : 'Show Cheatsheet'}\n          </Button>\n\n          <span className=\"c-muted ml-2\">\n            <Popup\n              trigger={<Icon name=\"question circle\" />}\n              size=\"small\"\n              position=\"top center\"\n              hoverable\n              wide\n            >\n              <a\n                className=\"d-b\"\n                href=\"https://help.stoplight.io/scenarios/overview/scripting\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                <Icon name=\"book\" /> Learn more about scripting.\n              </a>\n            </Popup>\n          </span>\n        </div>\n      </div>\n\n      {ui.showCheatsheet ? (\n        <Highlight className=\"ScenarioEditor-cheatsheet mb-6\" mode=\"javascript\" immediate>\n          {cheatsheet}\n        </Highlight>\n      ) : null}\n\n      {contentElem}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }) => ({\n  ...appStore.injectUi('scenario-scripts-tab'),\n}))(observer(Scripts));\n","import React from 'react';\nimport _ from 'lodash';\nimport { Icon, Menu } from 'semantic-ui-react';\nimport { toJS } from 'mobx';\nimport { inject, observer } from 'mobx-react';\nimport { getResponseSchemaFromOperation } from '@platform/utils/specs/swagger';\n\nimport JsonSchemaViewer from '../JsonSchemaViewer';\n\nclass ScenarioContractTest extends React.Component {\n  render() {\n    const {\n      method = '',\n      url,\n      codes = [],\n      endpoint,\n      connectedSpecs,\n      ui = {},\n      updateUi = {},\n    } = this.props;\n\n    const activeCode = ui.activeCode || codes[0];\n    const responseElems = [];\n    let schema;\n\n    if (activeCode && endpoint) {\n      const connectedSpec = _.find(connectedSpecs, { id: endpoint.specId }) || {};\n\n      if (connectedSpec) {\n        schema = getResponseSchemaFromOperation({\n          spec: toJS(connectedSpec),\n          method,\n          path: endpoint.path,\n          code: activeCode,\n        });\n\n        const linkToSpec = (\n          <b>{connectedSpec.local ? connectedSpec.filePath : connectedSpec.name}</b>\n        );\n\n        responseElems.push(\n          <div key=\"response\">\n            <span className=\"mr-2 c-positive\">\n              <Icon name=\"check\" />\n            </span>\n            Response codes found in {linkToSpec}\n          </div>\n        );\n      }\n    } else if (_.isEmpty(connectedSpecs)) {\n      responseElems.push(\n        <div key=\"endpoint\">\n          <span className=\"mr-2 c-muted\">\n            <Icon name=\"circle outline\" />\n          </span>\n          <b>No OAS2 files connected.</b>\n          <br />\n          <br />\n          Connect a file in the <b>Contract Test Settings</b> for this scenario collection,\n          accessible via the Swagger/OAS link in the editor sidebar.\n        </div>\n      );\n    } else {\n      responseElems.push(\n        <div key=\"endpoint\">\n          <span className=\"mr-2 c-negative\">\n            <Icon name=\"remove\" />\n          </span>\n          <b>\n            {_.toUpper(method)} {url}\n          </b>{' '}\n          did NOT match any operations in the connected OAS2 specifications.\n        </div>\n      );\n    }\n\n    if (_.isEmpty(codes)) {\n      return <div>{responseElems}</div>;\n    }\n\n    return (\n      <div>\n        {responseElems}\n\n        <Menu\n          items={codes.map(c => ({\n            key: c,\n            name: c,\n            active: c === activeCode,\n            onClick() {\n              updateUi('set', 'activeCode', c);\n            },\n          }))}\n          secondary\n        />\n\n        <JsonSchemaViewer name=\"contract-test\" schema={schema} />\n      </div>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { scenarioId, stepId }) => ({\n  ...appStore.injectUi(`scenario-step-contract-test-${scenarioId}-${stepId}`),\n}))(observer(ScenarioContractTest));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Icon, Button, Header, Popup } from 'semantic-ui-react';\n\nimport { safeStringify, safeParse } from '@platform/utils/json';\nimport { splitLogicPath } from '@platform/utils/collections';\nimport { combinePathSelectors } from '@platform/utils/general';\nimport { getEndpointFromSpecs } from '@platform/utils/specs/swagger';\n\nimport FormSelect from '../../../FormSelect';\nimport FormInput from '../../../FormInput';\nimport LearnMore from '../../../LearnMore';\nimport ScenarioContractTest from '../../../ScenarioContractTest';\n\nimport LogicLocation from './logic-location';\n\nconst AssertionOpSelector = props => {\n  return (\n    <FormSelect\n      placeholder=\"choose an operation\"\n      options={[\n        { text: 'equals', value: 'eq' },\n        { text: 'greater than', value: 'gt' },\n        { text: 'greater than or equals', value: 'gte' },\n        { text: 'less than', value: 'lt' },\n        { text: 'less than or equals', value: 'lte' },\n        { text: 'not equal', value: 'ne' },\n        { text: 'exists', value: 'exists' },\n        { text: 'length equals', value: 'length' },\n        { text: 'contains', value: 'contains' },\n        { text: 'validate pass', value: 'validate.pass' },\n        { text: 'validate fail', value: 'validate.fail' },\n      ]}\n      {...props}\n    />\n  );\n};\n\nexport const TestsTabItem = ({ step, active, onClick }) => {\n  const after = _.get(step, 'after') || {};\n  let testName = 'Tests';\n  const testIcons = [];\n  if (!_.isEmpty(after.assertions)) {\n    const contractTest = _.find(after.assertions, { op: 'validate.contract' });\n\n    testIcons.push(<span key=\"1\">[{after.assertions.length}]</span>);\n    if (contractTest) {\n      testIcons.push(\n        <span key=\"2\" className=\"ml-2 text-active\">\n          <Icon name=\"flask\" />\n        </span>\n      );\n    }\n  }\n  if (!_.isEmpty(testIcons)) {\n    testName = (\n      <span>\n        Tests{' '}\n        <b>\n          <span className=\"ml-2 text-active\">{testIcons}</span>\n        </b>\n      </span>\n    );\n  }\n\n  return (\n    <Menu.Item name=\"tests\" active={active} onClick={onClick}>\n      {testName}\n    </Menu.Item>\n  );\n};\n\nexport const AssertionList = props => {\n  const {\n    scenarioId,\n    stepId,\n    input = {},\n    fields = [],\n    handleUpdate,\n    connectedSpecs,\n    variables,\n    logicLocations,\n    readOnly,\n  } = props;\n\n  // let statusField;\n  // let statusIndex;\n\n  // Build basic assertions\n\n  const assertionElems = fields.map((field, index) => {\n    // if (field.target === 'output.status') {\n    //   statusField = field;\n    //   statusIndex = index;\n    //   return null;\n    // }\n\n    const { location, path } = splitLogicPath({ locations: logicLocations, path: field.target });\n    const locationDisabled = location.match(/status|time/) ? true : false;\n    const expectedDisabled = field && field.op && field.op.match(/exists/) ? true : false;\n\n    let expected = _.isUndefined(field.expected) ? '' : field.expected;\n    // if this is a number that they are forcing as a string, add quotes to indicate that\n    if (typeof expected === 'string' && _.isNumber(safeParse(expected))) {\n      expected = `\"${expected}\"`;\n    }\n\n    // Cast value to string to allow 0 number\n    if (_.isNumber(safeParse(expected))) {\n      expected = String(expected);\n    }\n\n    expected = safeStringify(expected);\n\n    return (\n      <div key={index} className=\"mt-2\">\n        <div className=\"flex\">\n          <LogicLocation\n            className=\"pr-2\"\n            disabled={readOnly}\n            value={location}\n            onChange={value => {\n              let newPath;\n              if (value.match(/status|time/)) {\n                newPath = [value];\n              } else {\n                newPath = [value, path];\n              }\n\n              handleUpdate('set', [index, 'target'], combinePathSelectors(newPath));\n            }}\n            locations={logicLocations}\n            search\n          />\n\n          <FormInput\n            className=\"flex-1 pr-2\"\n            input={{\n              value: `${path}`,\n              readOnly,\n              onChange(e, { value }) {\n                handleUpdate('set', [index, 'target'], combinePathSelectors([location, value]));\n              },\n            }}\n            disabled={locationDisabled}\n            placeholder={locationDisabled ? 'n/a' : 'path to property ie `data[0].id`'}\n            fluid\n          />\n\n          <AssertionOpSelector\n            className=\"pr-2\"\n            disabled={readOnly}\n            value={field.op}\n            onChange={value => {\n              handleUpdate('set', [index, 'op'], value);\n\n              if (value.match(/exists/)) {\n                handleUpdate('unset', [index, 'expected']);\n              }\n            }}\n          />\n\n          <FormInput\n            className=\"flex-1\"\n            input={{\n              value: `${expected}`,\n              readOnly,\n              onChange(e, { value }) {\n                let val = value ? safeParse(value, value) : '';\n\n                // stringify if they are trying to force string\n                if (value && value.charAt(0) === '\"') {\n                  val = String(val);\n                }\n\n                handleUpdate('set', [index, 'expected'], val);\n              },\n            }}\n            disabled={expectedDisabled}\n            placeholder={expectedDisabled ? 'n/a' : 'expected value'}\n            fluid\n          />\n\n          <div className=\"ml-3\">\n            <Button\n              icon=\"trash\"\n              disabled={readOnly}\n              onClick={() => {\n                if (fields.length === 1) {\n                  handleUpdate('unset', []);\n                } else {\n                  handleUpdate('pull', [], index);\n                }\n              }}\n              size=\"tiny\"\n            />\n          </div>\n        </div>\n      </div>\n    );\n  });\n\n  // Build contract assertion\n\n  let definedResponseCodes;\n  const method = _.get(input, 'method');\n  const url = _.get(input, 'url');\n\n  const endpoint = getEndpointFromSpecs({\n    specs: connectedSpecs,\n    method,\n    url,\n    variables: {\n      env: variables,\n    },\n  });\n\n  if (endpoint) {\n    definedResponseCodes = endpoint.responses || [];\n  }\n\n  return (\n    <div>\n      <div className={`${!_.isEmpty(fields) ? 'mb-3' : ''}`}>\n        <Button\n          onClick={() =>\n            handleUpdate('push', [], { target: 'output.status', op: 'eq', expected: 200 })\n          }\n          basic\n          disabled={readOnly}\n          size=\"tiny\"\n        >\n          Add Assertion\n        </Button>\n      </div>\n\n      <div className=\"mb-4 text-sm\">{assertionElems}</div>\n\n      <div className=\"AssertionList-contract text-sm\">\n        <div className=\"flex content-center mb-6\">\n          <Header as=\"h4\">Contract Testing</Header>\n\n          <div\n            className=\"c-muted ml-2\"\n            style={{\n              position: 'relative',\n              top: -1,\n            }}\n          >\n            <Popup\n              trigger={<Icon name=\"question circle\" />}\n              size=\"small\"\n              position=\"top center\"\n              hoverable\n              wide\n            >\n              {!_.isEmpty(connectedSpecs) ? (\n                <div>\n                  <div>\n                    When this step is run, Stoplight will search your connected API Specs for an\n                    endpoint that matches this request.\n                  </div>\n\n                  <div className=\"mt-2\">\n                    If found, Stoplight will use the JSON schema responses defined on the endpoint\n                    to contract test your API response automatically.\n                  </div>\n                </div>\n              ) : (\n                <div>You must connect an API spec to use this feature.</div>\n              )}\n\n              <LearnMore className=\"d-b mt-2\" feature=\"contract-testing\" />\n            </Popup>\n          </div>\n        </div>\n\n        <ScenarioContractTest\n          stepId={stepId}\n          endpoint={endpoint}\n          method={method}\n          url={url}\n          codes={definedResponseCodes}\n          connectedSpecs={connectedSpecs}\n          scenarioId={scenarioId}\n        />\n      </div>\n    </div>\n  );\n};\n\nconst Tests = props => {\n  const {\n    collectionId,\n    scenarioId,\n    step,\n    connectedSpecs,\n    handleUpdate,\n    variables,\n    logicLocations,\n    readOnly,\n  } = props;\n\n  return (\n    <AssertionList\n      variables={variables}\n      collectionId={collectionId}\n      scenarioId={scenarioId}\n      stepId={step.id}\n      input={step.input}\n      fields={_.get(step, 'after.assertions')}\n      connectedSpecs={connectedSpecs}\n      handleUpdate={(t, p, v) => {\n        handleUpdate(t, ['after', 'assertions'].concat(p), v);\n      }}\n      logicLocations={logicLocations}\n      readOnly={readOnly}\n    />\n  );\n};\n\nexport default inject(({ collectionEditorStore }, { editorId }) => {\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    variables: editor.currentEnv,\n  };\n})(observer(Tests));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport FormInput from '@platform/components/FormInput';\nimport FormSelect from '@platform/components/FormSelect';\nimport FormHttpBodyEditor from '@platform/components/FormHttpBodyEditor';\n\nimport SettingsTab from './settings';\nimport AuthTab from './auth';\nimport CapturesTab, { CapturesTabItem } from './captures';\nimport CodeGenerationTab from './code-generation';\nimport HeadersTab, { HeadersTabItem } from './headers';\nimport QueryTab, { QueryTabItem } from './query';\nimport ScriptsTab, { ScriptsTabItem } from './scripts';\nimport TestsTab, { TestsTabItem } from './tests';\n\nconst defaultLogicLocations = [\n  'output.headers',\n  'output.body',\n  'output.status',\n  'output.time',\n  '$.ctx',\n  '$$.env',\n  '$$.response.headers',\n  '$$.response.body',\n  '$$.response.status',\n];\n\nlet Items = props => {\n  const { editor, step, config = {}, currentTab, onClick, whitelist } = props;\n  const { input } = step || {};\n  const { auth = {}, body, method } = input || {};\n\n  let authorizationName = 'Auth';\n  if (auth.type && auth.type !== 'none') {\n    authorizationName = (\n      <span>\n        Auth\n        <span className=\"ml-2 text-active font-bold\">[{auth.type}]</span>\n      </span>\n    );\n  }\n\n  let bodyName = 'Body';\n  if (!_.isEmpty(body)) {\n    bodyName = (\n      <span>\n        Body\n        <span className=\"ml-2 text-active\">\n          <Icon name=\"check\" />\n        </span>\n      </span>\n    );\n  }\n\n  return (\n    <Menu style={{ marginTop: 0 }} tabular attached=\"top\" size=\"tiny\">\n      {_.includes(whitelist, 'settings') && (\n        <Menu.Item name=\"settings\" active={currentTab === 'settings'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'headers') && (\n        <HeadersTabItem step={step} active={currentTab === 'headers'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'query') && (\n        <QueryTabItem step={step} active={currentTab === 'query'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'body') && (\n        <Menu.Item name=\"body\" active={currentTab === 'body'} onClick={onClick}>\n          {bodyName}\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'auth') && (\n        <Menu.Item name=\"auth\" className=\"auth\" active={currentTab === 'auth'} onClick={onClick}>\n          {authorizationName}\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'code-generation') && (\n        <Menu.Item\n          name=\"code-generation\"\n          active={currentTab === 'code-generation'}\n          onClick={onClick}\n        >\n          Code Generation\n        </Menu.Item>\n      )}\n\n      {_.includes(whitelist, 'tests') && (\n        <TestsTabItem step={step} active={currentTab === 'tests'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'captures') && (\n        <CapturesTabItem step={step} active={currentTab === 'captures'} onClick={onClick} />\n      )}\n\n      {_.includes(whitelist, 'scripts') && (\n        <ScriptsTabItem step={step} active={currentTab === 'scripts'} onClick={onClick} />\n      )}\n    </Menu>\n  );\n};\nItems = inject((stores, props) => {\n  const { collectionEditorStore } = stores;\n  const { editorId } = props;\n\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Items));\n\nlet Content = props => {\n  const {\n    id,\n    editorId,\n    collectionId,\n    scenarioId,\n    step = {},\n    stepIndex,\n    editor,\n    modeling,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    connectedSpecs = [],\n    autocompleteScopes = {},\n    config = {},\n    readOnly,\n    standalone,\n    currentTab,\n  } = props;\n\n  let contentElem;\n\n  switch (currentTab) {\n    case 'headers':\n      contentElem = (\n        <HeadersTab step={step.input} modeling={modeling} handleUpdate={handleUpdate} />\n      );\n      break;\n    case 'query':\n      contentElem = <QueryTab step={step.input} editorId={editorId} handleUpdate={handleUpdate} />;\n      break;\n    case 'settings':\n      contentElem = (\n        <SettingsTab\n          editorId={editorId}\n          oauth2={_.get(step.input, 'auth.type') === 'oauth2' && config.oauth2}\n          currentEnv={editor.currentEnv}\n          updateVariables={variables => editor.updateVariables(variables)}\n          modeling={modeling}\n          standalone={standalone}\n        />\n      );\n      break;\n    case 'auth':\n      contentElem = (\n        <AuthTab\n          editor={editor}\n          currentVariables={editor.currentEnv}\n          activeToken={_.get(editor.currentPopulatedEnvVariables, 'oauth_access_token')}\n          config={config}\n          ui={ui.auth}\n          uiScope={['auth']}\n          input={step.input}\n          updateUi={updateUi}\n          handleUpdate={handleUpdate}\n        />\n      );\n      break;\n    case 'body':\n      contentElem = <FormHttpBodyEditor id={id} input={step.input} handleUpdate={handleUpdate} />;\n      break;\n    case 'tests':\n      contentElem = (\n        <TestsTab\n          step={step}\n          editorId={editorId}\n          handleUpdate={handleUpdate}\n          collectionId={collectionId}\n          scenarioId={scenarioId}\n          connectedSpecs={connectedSpecs}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n    case 'captures':\n      contentElem = (\n        <CapturesTab\n          fields={_.get(step, 'after.transforms')}\n          handleUpdate={(t, p, v) => {\n            handleUpdate(t, ['after', 'transforms'].concat(p), v);\n          }}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n\n    case 'scripts':\n      contentElem = (\n        <ScriptsTab\n          scenarioId={scenarioId}\n          stepIndex={stepIndex}\n          step={step}\n          handleUpdate={handleUpdate}\n          readOnly={readOnly}\n          autocompleteScopes={{ http: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    case 'code-generation':\n      contentElem = <CodeGenerationTab editorId={editorId} step={step} />;\n      break;\n    default:\n      contentElem = <div className=\"c-muted\">Choose a tab to add request input.</div>;\n      break;\n  }\n\n  return <Segment attached=\"bottom\">{contentElem}</Segment>;\n};\n\nContent = inject((stores, props) => {\n  const { collectionEditorStore } = stores;\n  const { editorId } = props;\n\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Content));\n\nconst Tabs = props => {\n  const {\n    id,\n    editorId,\n    collectionId,\n    scenarioId,\n    step = {},\n    stepIndex,\n    editor,\n    standalone,\n    modeling,\n    handleUpdate,\n    ui = {},\n    updateUi,\n    connectedSpecs = [],\n    autocompleteScopes = {},\n    config = {},\n    readOnly,\n    whitelist = [],\n    currentTab,\n    handleChangeTab,\n  } = props;\n\n  return [\n    <Items\n      key=\"items\"\n      editorId={editorId}\n      step={step}\n      config={config}\n      whitelist={whitelist}\n      currentTab={currentTab}\n      onClick={(e, { name }) => handleChangeTab(name)}\n    />,\n    <Content\n      key=\"content\"\n      id={id}\n      editorId={editorId}\n      collectionId={collectionId}\n      scenarioId={scenarioId}\n      standalone={standalone}\n      step={step}\n      stepIndex={stepIndex}\n      modeling={modeling}\n      handleUpdate={handleUpdate}\n      ui={ui}\n      updateUi={updateUi}\n      connectedSpecs={connectedSpecs}\n      autocompleteScopes={autocompleteScopes}\n      config={config}\n      readOnly={readOnly}\n      whitelist={whitelist}\n      currentTab={currentTab}\n    />,\n  ];\n};\n\nexport default observer(Tabs);\n","import React from 'react';\nimport _ from 'lodash';\n\nimport FormSearch from '../FormSearch';\nimport FormInputLabel from '../FormInputLabel';\n\nclass ConnectedOperationSearch extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      results: [],\n      value: undefined,\n    };\n  }\n\n  componentWillMount() {\n    this.buildResults({ operations: this.props.operations, all: true });\n  }\n\n  resetComponent = () => {\n    this.setState({ results: [] });\n  };\n\n  handleResultSelect = (e, result) => {\n    const { handleResultSelect, operations, valueProp, onChange } = this.props;\n\n    let value = result.title;\n    const operation = operations[result.key];\n\n    if (operation) {\n      if (handleResultSelect) {\n        handleResultSelect(operation);\n      }\n\n      if (valueProp) {\n        value = operation[valueProp] || value;\n      }\n    }\n\n    if (onChange && !handleResultSelect) {\n      onChange(e, { value });\n    }\n\n    this.setState({ value });\n  };\n\n  handleSearchChange = (e, value) => {\n    const { operations, onChange, protectedExpression } = this.props;\n\n    if (onChange) {\n      onChange(e, { value });\n    }\n\n    if (protectedExpression) {\n      const re1 = new RegExp(protectedExpression, 'i');\n\n      if (re1.test(value)) {\n        return;\n      }\n    }\n\n    const re = new RegExp(_.escapeRegExp(value), 'i');\n\n    const isMatch = (operation, result) => {\n      return (\n        re.test(operation.path) ||\n        re.test(operation.url) ||\n        re.test(operation.method) ||\n        re.test(operation.summary) ||\n        re.test(operation.operationId) ||\n        re.test(result.title) ||\n        re.test(result.description)\n      );\n    };\n\n    this.buildResults({ operations, isMatch });\n  };\n\n  buildResults = ({ operations, isMatch, all }) => {\n    let results;\n\n    for (let key in operations) {\n      if (!operations[key]) continue;\n\n      const operation = operations[key];\n\n      const result = {\n        key,\n        title: `${_.toUpper(operation.method)} ${operation.path}`,\n        description: `${\n          operation.operationId ? `${operation.operationId} - ` : ''\n        }${operation.summary || operation.description || ''}`,\n      };\n\n      // if connected specs/operations have ids, sort into categories by id\n      if (operation.specId) {\n        if (all || isMatch(operation, result)) {\n          if (_.get(results, [operation.specId, 'results'])) {\n            results[operation.specId].results.push(result);\n          } else {\n            if (!results) results = {};\n\n            results[operation.specId] = {\n              name: operation.specName,\n              results: [result],\n            };\n          }\n        }\n      } else {\n        if (!results) results = [];\n        results.push(result);\n      }\n    }\n\n    this.setState({ results });\n  };\n\n  render() {\n    const { results, value: uncontrolledValue } = this.state;\n    const {\n      value: contolledValue,\n      className,\n      placeholder,\n      label,\n      required,\n      tip,\n      readOnly,\n    } = this.props;\n\n    const inputVal =\n      contolledValue ||\n      uncontrolledValue ||\n      _.get(results, [0, 'title']) ||\n      _.get(results, [Object.keys(results)[0], 'results', 0, 'title']);\n\n    return (\n      <div className={className}>\n        <FormInputLabel label={label} required={required} tip={tip} />\n\n        <FormSearch\n          minCharacters={0}\n          placeholder={placeholder}\n          value={inputVal}\n          results={results}\n          onSearchChange={this.handleSearchChange}\n          onResultSelect={this.handleResultSelect}\n          readOnly={readOnly}\n          showResultsOnClick\n        />\n      </div>\n    );\n  }\n}\n\nexport default ConnectedOperationSearch;\n","import React from 'react';\nimport FormInput from '@platform/components/FormInput';\nimport ConnectedOperationSearch from '@platform/components/ConnectedOperationSearch';\n\nconst url = props => {\n  const { value, label, placeholder, endpoints, onChange, handleResultSelect, readOnly } = props;\n\n  let contentElem;\n  if (_.isEmpty(endpoints)) {\n    return (\n      <div className=\"flex-1 pl-2\">\n        <FormInput\n          className=\"flex-1\"\n          label={label}\n          value={value}\n          readOnly={readOnly}\n          placeholder={placeholder}\n          onChange={(e, { value }) => onChange(value)}\n          fluid\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex-1 pl-2\">\n      <ConnectedOperationSearch\n        label={label}\n        value={value}\n        valueProp=\"url\"\n        operations={endpoints}\n        placeholder={placeholder}\n        protectedExpression={/\\?/}\n        onChange={(e, { value }) => onChange(value)}\n        handleResultSelect={value => handleResultSelect(value)}\n        readOnly={readOnly}\n      />\n    </div>\n  );\n};\n\nexport default url;\n","import React from 'react';\nimport FormSelect from '@platform/components/FormSelect';\n\nconst Method = ({ value, label, onChange, readOnly }) => {\n  return (\n    <div className=\"pr-2\">\n      <FormSelect\n        readOnly={readOnly}\n        label={label}\n        value={value}\n        onChange={method => onChange(method)}\n        options={[\n          { text: 'GET', value: 'get' },\n          { text: 'PUT', value: 'put' },\n          { text: 'POST', value: 'post' },\n          { text: 'PATCH', value: 'patch' },\n          { text: 'DELETE', value: 'delete' },\n        ]}\n        placeholder=\"Choose one\"\n      />\n    </div>\n  );\n};\n\nexport default Method;\n","import React from 'react';\nimport FormSelect from '@platform/components/FormSelect';\n\nconst Host = props => {\n  const { value, hosts, label, onChange, readOnly } = props;\n\n  const options = _.uniqBy(\n    [{ text: value, value }].concat(\n      hosts.map(p => ({\n        text: p,\n        value: p,\n      }))\n    ),\n    'value'\n  );\n\n  return (\n    <div className=\"pl-2 pr-2\" style={{ maxWidth: 350 }}>\n      <FormSelect\n        className=\"ScenarioStepInput-hosts\"\n        label={label}\n        placeholder=\"target host\"\n        value={value}\n        options={options}\n        onChange={host => onChange(host)}\n        disabled={readOnly}\n        allowAdditions\n        search\n      />\n    </div>\n  );\n};\n\nexport default Host;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport { createStepFromOperation } from '@platform/utils/specs/swagger';\nimport { createURL, removeQueryString, getQueryParams, cleanSlashes } from '@platform/utils/url';\n\nimport FormInput from '@platform/components/FormInput';\n\nimport Tabs from './tabs';\nimport Path from './path';\nimport Method from './method';\nimport Host from './host';\n\nclass HttpEditor extends React.Component {\n  static defaultProps = {\n    tabWhitelist: [\n      'settings',\n      'headers',\n      'query',\n      'auth',\n      'body',\n      'tests',\n      'captures',\n      'scripts',\n      'code-generation',\n    ],\n  };\n\n  componentWillMount() {\n    const { step, handleUpdate } = this.props;\n\n    const { currentUrl } = this.currentTarget();\n    const urlQuery = getQueryParams(currentUrl);\n\n    if (!_.isEmpty(urlQuery)) {\n      const newTarget = removeQueryString(currentUrl).url;\n      handleUpdate('set', ['input', 'url'], newTarget);\n      handleUpdate('set', ['input', 'query'], {\n        ...urlQuery,\n        ..._.get(step, 'input.query', {}),\n      });\n    }\n  }\n\n  handleChangeTab = name => {\n    const { ui, updateUi, tabWhitelist } = this.props;\n\n    let tab = name;\n    if (!name || !_.includes(tabWhitelist, name)) {\n      tab = _.first(tabWhitelist);\n    }\n\n    updateUi('set', 'currentTab', tab);\n  };\n\n  currentTarget = () => {\n    const { hosts, step } = this.props;\n    const target = {};\n\n    const targetUrl = _.get(step, 'input.url', '');\n\n    if (!_.isEmpty(hosts)) {\n      const processed = createURL(targetUrl);\n\n      if (!_.isEmpty(processed)) {\n        target.currentHost = `${processed.protocol}//${processed.host}`;\n        target.currentPath = `${processed.pathname}${processed.search}`;\n      }\n    }\n\n    target.currentUrl = target.currentHost ? target.currentPath : targetUrl;\n\n    return target;\n  };\n\n  renderHeaderElems = () => {\n    const { headerElems = [] } = this.props;\n\n    const headers = headerElems.map((elem, i) => (\n      <div key={elem.key || i} className=\"flex mr-3\">\n        {elem.render()}\n      </div>\n    ));\n\n    return headers;\n  };\n\n  handleAddQuery = () => {\n    const { handleUpdate, ui = {}, updateUi, step } = this.props;\n\n    this.handleChangeTab('query');\n\n    const stepQuery = _.get(step, 'input.query') || {};\n    const newQueryIndex = _.keys(stepQuery).length;\n\n    handleUpdate('set', ['input', 'query'], {\n      ...stepQuery,\n      '': '',\n    });\n\n    // setTimeout needed to allow the formInputMap element to render before calling the focus\n    setTimeout(() => {\n      const elem = document.getElementById(`FormInputMapKey-${newQueryIndex}`);\n\n      if (elem) {\n        elem.focus();\n      }\n    }, 200);\n  };\n\n  handleOperationSelect = operation => {\n    const {\n      connectedSpecs,\n      editor,\n      modeling,\n      readOnly,\n      handleUpdate,\n      updateHostOnSearch = true,\n      standalone,\n      step = {},\n    } = this.props;\n\n    if (readOnly) {\n      handleUpdate('set', ['input.url'], operation.path);\n      return;\n    }\n\n    let spec = _.find(connectedSpecs, { id: operation.specId });\n\n    if (!spec) {\n      spec = _.first(connectedSpecs);\n    }\n\n    if (!spec) return;\n\n    const { input, name } =\n      createStepFromOperation({\n        spec,\n        updateHostOnSearch,\n        basePath: _.get(spec, 'data.basePath'),\n        method: operation.method,\n        path: operation.path,\n        pathParamsToCtx: !standalone,\n      }) || {};\n\n    if (!_.isEmpty(input)) {\n      handleUpdate('set', ['input'], input);\n    }\n\n    if (name && _.isEmpty(step.name)) {\n      handleUpdate('set', ['name'], name);\n    }\n\n    editor.updateCurrentStepPathParams(input.params);\n\n    if (modeling) {\n      editor.resetStepResults();\n    }\n\n    this.handleChangeTab();\n  };\n\n  render() {\n    const {\n      id,\n      hosts,\n      editorId,\n      collectionId,\n      scenarioId,\n      step,\n      stepIndex,\n      modeling,\n      handleUpdate,\n      ui,\n      updateUi,\n      connectedSpecs,\n      autocompleteScopes,\n      config,\n      readOnly,\n      tabWhitelist,\n      hideMethod,\n      standalone,\n      endpoints,\n    } = this.props;\n\n    const { currentHost, currentPath, currentUrl } = this.currentTarget();\n    const isEmptyHosts = _.isEmpty(hosts);\n    const isEditingPath = isEmptyHosts || modeling;\n\n    return (\n      <div id=\"tutorial-http-input\" className=\"ScenarioStepInput type-http\">\n        <div id=\"tutorial-http-url\" className=\"ScenarioStepInput-methodUrl flex\">\n          {this.renderHeaderElems()}\n\n          <div className=\"flex flex-1\">\n            {!hideMethod && (\n              <Method\n                label={standalone ? null : 'method'}\n                value={_.get(step, 'input.method')}\n                readOnly={readOnly}\n                onChange={value => handleUpdate('set', ['input', 'method'], value)}\n              />\n            )}\n\n            {isEmptyHosts || modeling ? null : (\n              <Host\n                label={standalone ? null : 'host'}\n                value={currentHost}\n                hosts={hosts}\n                readOnly={readOnly}\n                onChange={value => {\n                  handleUpdate('set', ['input', 'url'], cleanSlashes(`${value}/${currentPath}`));\n                }}\n              />\n            )}\n\n            <Path\n              value={isEditingPath ? _.get(step, 'input.url') : currentUrl}\n              label={standalone ? null : isEditingPath ? 'path' : 'url'}\n              placeholder={isEditingPath ? '/path' : 'http://api.myco.com/path'}\n              endpoints={endpoints}\n              onChange={value => {\n                // change tab on typing ?\n                if (_.last(value) === '?') {\n                  this.handleAddQuery();\n                  return;\n                }\n\n                handleUpdate(\n                  'set',\n                  ['input', 'url'],\n                  isEditingPath\n                    ? value\n                    : cleanSlashes(`${currentHost}/${value}`, { trimEnd: false })\n                );\n              }}\n              handleResultSelect={operation => this.handleOperationSelect(operation)}\n              readOnly={readOnly}\n            />\n          </div>\n        </div>\n\n        <div className=\"mt-4\">\n          <Tabs\n            id={id}\n            editorId={editorId}\n            collectionId={collectionId}\n            scenarioId={scenarioId}\n            standalone={standalone}\n            step={step}\n            stepIndex={stepIndex}\n            modeling={modeling}\n            handleUpdate={handleUpdate}\n            ui={ui}\n            updateUi={updateUi}\n            connectedSpecs={connectedSpecs}\n            autocompleteScopes={autocompleteScopes}\n            config={config}\n            readOnly={readOnly}\n            whitelist={tabWhitelist}\n            currentTab={ui.currentTab || _.first(tabWhitelist)}\n            handleChangeTab={name => this.handleChangeTab(name)}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default inject((stores, props) => {\n  const { appStore, collectionEditorStore } = stores;\n  const { editorId, connectedSpecs, endpoints } = props;\n\n  const editor = collectionEditorStore.getEditor({ id: editorId });\n\n  return {\n    ...appStore.injectUi(`http-step-${editorId}`),\n    editor,\n    endpoints: endpoints || editor.endpoints,\n    connectedSpecs: connectedSpecs || editor.connectedSpecs,\n  };\n})(observer(HttpEditor));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport { inject, observer } from 'mobx-react';\nimport { Button, Popup } from 'semantic-ui-react';\n\nimport shortid from '@platform/utils/shortid';\nimport { fileFormat } from '@platform/utils/url';\nimport { isExternalLink } from '@platform/utils/url';\n\nimport { URI } from '@core/uri';\n\nimport FormDropdown from '../FormDropdown';\nimport FormInput from '../FormInput';\nimport FormSearch from '../FormSearch';\n\nclass RefBuilder extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    size: PropTypes.oneOf(['large', 'medium', 'small']),\n    $ref: PropTypes.string,\n    localData: PropTypes.object,\n    context: PropTypes.bool,\n    fileFilter: PropTypes.object,\n    routeDataTargets: PropTypes.object,\n    store: PropTypes.object,\n    initialSource: PropTypes.oneOf(['local', 'external', 'currentProject']),\n    targets: PropTypes.oneOfType([PropTypes.bool, PropTypes.string]),\n  };\n\n  componentWillMount() {\n    this.init(this.props);\n  }\n\n  componentWillUpdate(nextProps) {\n    const { $ref, store, onComplete } = nextProps;\n    const { builtRef, dirty } = store;\n\n    if (this.props.id !== nextProps.id) {\n      this.init(nextProps);\n    } else if (!_.isEqual($ref, builtRef)) {\n      if (dirty) {\n        this.onChange({ builtRef, onComplete });\n      }\n    }\n  }\n\n  init = props => {\n    const {\n      id,\n      $ref,\n      localData,\n      fileFilter,\n      routeDataTargets,\n      store,\n      initialSource,\n      targets,\n      projectStore,\n      context,\n      force,\n    } = props;\n\n    const currentProjectId = _.get(projectStore, 'current.id');\n    const currentFilePath = _.get(projectStore, 'current.currentFilePathname', '');\n    const currentProjectPath = _.dropRight(_.split(currentFilePath, '/'));\n\n    store.initial({\n      id,\n      $ref,\n      fileFilter,\n      routeDataTargets,\n      initialSource,\n      targets,\n      localData,\n      currentProjectId,\n      currentProjectPath,\n      currentFilePath,\n      context,\n      force,\n    });\n  };\n\n  onChange = ({ builtRef, confirmed, onComplete, force }) => {\n    const { confirm, store } = this.props;\n\n    if (!force) {\n      if (!onComplete || (confirm && !confirmed) || !store.isComplete) return;\n    }\n\n    store.pristine();\n    onComplete(builtRef);\n  };\n\n  renderConfirm = () => {\n    const { store, $ref, confirm, onComplete, onRemove } = this.props;\n    const {\n      isUrlLoading,\n      isUrlValid,\n      isComplete,\n      builtRef,\n      urlError,\n      initializing,\n      selectedSource,\n    } = store;\n\n    let color = 'grey';\n    let content = '';\n    let popup = '';\n    let icon;\n\n    if (isUrlLoading || initializing) {\n      color = 'grey';\n      content = 'Loading';\n      icon = 'spinner';\n    } else if (isComplete) {\n      color = 'green';\n      content = 'Confirm';\n      if (!confirm) {\n        icon = 'check';\n        popup = '';\n      }\n    } else {\n      color = 'red';\n\n      if (confirm) {\n        content = 'Incomplete';\n      } else {\n        icon = 'warning';\n      }\n\n      popup = 'Ref selection not complete.';\n      if (urlError) {\n        popup = urlError;\n        content = 'URL Error';\n      } else if (!isUrlValid && selectedSource === 'external') {\n        popup = 'URL is invalid';\n        content = 'Invalid Url';\n      }\n    }\n\n    const buttonProps = {\n      className: cn('RefBuilder-button', {\n        'is-confirm': confirm,\n        'is-simple': icon === 'check' || icon === 'warning' || content === 'Incomplete',\n        'is-negative': icon === 'warning' || content === 'Incomplete',\n        'is-positive': icon === 'check',\n      }),\n      icon,\n      color,\n      loading: isUrlLoading,\n    };\n\n    if (confirm) {\n      buttonProps.content = content;\n      buttonProps.tabIndex = 2;\n      buttonProps.disabled = !isComplete || builtRef === $ref;\n      buttonProps.onClick = () => this.onChange({ builtRef, confirmed: true, onComplete });\n    }\n\n    const buttons = [];\n\n    const b = <Button key=\"cb\" {...buttonProps} />;\n    if (!_.isEmpty(popup)) {\n      buttons.push(\n        <Popup key=\"cp\" trigger={b} on=\"hover\" position=\"top right\">\n          {popup}\n        </Popup>\n      );\n    } else {\n      buttons.push(b);\n    }\n\n    buttons.push(this.renderReferenceLink());\n\n    if (onRemove) {\n      buttons.push(\n        <Button key=\"delete\" className=\"RefBuilder-button\" icon=\"trash\" onClick={onRemove} />\n      );\n    }\n\n    return buttons;\n  };\n\n  renderCurrentProject = () => {\n    const { store, size } = this.props;\n    const { targets } = store;\n\n    const searchParts = [];\n    if (size === 'small') {\n      searchParts.push(this.renderConfirm());\n      searchParts.push(this.renderTargetSearch());\n    } else {\n      searchParts.push(this.renderTargetSearch());\n      searchParts.push(this.renderConfirm());\n    }\n\n    return (\n      <div\n        className={cn('RedBuilder-groups flex flex-wrap', {\n          'flex-col': size === 'small',\n        })}\n      >\n        <div className=\"RedBuilder-group flex-1 flex\">\n          {this.renderSourceDropdown()}\n          {this.renderFileSearch()}\n        </div>\n\n        <div className={cn('RedBuilder-group flex', { 'flex-1': targets })}>{searchParts}</div>\n      </div>\n    );\n  };\n\n  renderExternal = () => {\n    const { store, size } = this.props;\n    const { externalUrl, handleChange, fetchExternalUrl, targets } = store;\n\n    const searchParts = [];\n    if (size === 'small') {\n      searchParts.push(this.renderConfirm());\n      searchParts.push(this.renderTargetSearch());\n    } else {\n      searchParts.push(this.renderTargetSearch());\n      searchParts.push(this.renderConfirm());\n    }\n\n    return (\n      <div\n        className={cn('RedBuilder-groups flex flex-wrap', {\n          'flex-col': size === 'small',\n        })}\n      >\n        <div className=\"RedBuilder-group flex-1 flex\">\n          {this.renderSourceDropdown()}\n\n          <FormInput\n            className=\"RefBuilder-search flex-1\"\n            placeholder=\"https://next.stoplight.io/\"\n            onChange={(e, { value }) => {\n              handleChange('externalUrl', value);\n              fetchExternalUrl();\n            }}\n            value={externalUrl || ''}\n            labelPosition=\"left\"\n            input={{ tabIndex: 1 }}\n            fluid\n          />\n        </div>\n        <div\n          className={cn('RedBuilder-group flex', {\n            'flex-1': targets,\n          })}\n        >\n          {searchParts}\n        </div>\n      </div>\n    );\n  };\n\n  renderFileSearch = () => {\n    const { store } = this.props;\n    const { file, fileQuery, fileResults, loadFiles, handleChange, setQuery } = store;\n\n    return (\n      <FormSearch\n        className=\"RefBuilder-search flex-1\"\n        placeholder={_.get(file, 'title') || 'choose a file'}\n        value={fileQuery || ''}\n        results={fileResults}\n        onResultSelect={(e, data) => {\n          handleChange('file', data);\n        }}\n        onSearchChange={(e, value) => {\n          setQuery('file', value);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            if (_.isEmpty(store.fileQuery)) {\n              setQuery('file', _.get(file, 'title'));\n            }\n          }, 200);\n        }}\n        inputProps={{\n          onFocus: () => {\n            setQuery('file', '');\n            loadFiles();\n          },\n          tabIndex: 1,\n        }}\n        minCharacters={0}\n        category\n        showNoResults\n      />\n    );\n  };\n\n  renderLocal = () => {\n    return (\n      <div className=\"flex flex-wrap\">\n        {this.renderSourceDropdown()}\n        {this.renderTargetSearch({ force: true })}\n        {this.renderConfirm()}\n      </div>\n    );\n  };\n\n  renderReferenceLink = () => {\n    const { store, routerStore } = this.props;\n    const { isComplete, initializing, referenceLink } = store;\n\n    const disabled = initializing || !isComplete;\n\n    const buttonProps = {\n      className: 'RefBuilder-button reference-link',\n      icon: 'book',\n      tabIndex: 2,\n      onClick: () => {\n        if (isExternalLink(referenceLink)) {\n          window.open(referenceLink, '_blank');\n        } else {\n          const uri = URI.parse(referenceLink);\n          routerStore.push({\n            pathname: uri.path,\n            search: uri.query,\n          });\n        }\n      },\n      disabled,\n    };\n\n    const b = <Button key=\"rb\" {...buttonProps} />;\n    return (\n      <Popup key=\"rp\" trigger={b} on=\"hover\" position=\"top right\">\n        Go to reference.\n      </Popup>\n    );\n  };\n\n  renderSource = () => {\n    const { store } = this.props;\n    const { source } = store;\n\n    let component;\n\n    switch (source) {\n      case 'local':\n      case 'shared':\n        component = this.renderLocal();\n        break;\n      case 'currentProject':\n        component = this.renderCurrentProject();\n        break;\n      case 'external':\n        component = this.renderExternal();\n        break;\n      default:\n    }\n\n    return component;\n  };\n\n  renderSourceDropdown = () => {\n    const { store } = this.props;\n    const { source, sourceOptions, handleChange } = store;\n\n    return (\n      <FormDropdown\n        key=\"source-dropdown\"\n        className=\"RefBuilder-dropdown\"\n        value={source}\n        options={sourceOptions}\n        onChange={(e, { value }) => {\n          if (value !== source) {\n            handleChange('source', value);\n          }\n        }}\n        fluid\n        selection\n      />\n    );\n  };\n\n  renderTargetSearch = ({ force } = {}) => {\n    const { store, targets } = this.props;\n    if (!targets && !force) return;\n\n    const {\n      file,\n      externalUrl,\n      fileQuery,\n      handleChange,\n      isTargetLoading,\n      isUrlValid,\n      loadSpecData,\n      setQuery,\n      source,\n      target,\n      targetResults,\n      targetQuery,\n    } = store;\n\n    const disabled =\n      (source === 'currentProject' && !fileQuery) ||\n      (source === 'external' && (!externalUrl || !isUrlValid));\n\n    if (fileFormat({ file: _.get(file, 'title') }).language === 'md') return null;\n\n    return (\n      <FormSearch\n        key=\"target-search\"\n        className=\"RefBuilder-search flex-1\"\n        placeholder={_.get(target, 'title') || 'choose a target'}\n        value={targetQuery || ''}\n        results={targetResults}\n        onResultSelect={(e, data) => {\n          handleChange('target', data);\n        }}\n        onSearchChange={(e, value) => {\n          setQuery('target', value);\n        }}\n        onBlur={() => {\n          setTimeout(() => {\n            if (_.isEmpty(store.targetQuery)) {\n              setQuery('target', _.get(target, 'title'));\n            }\n          }, 200);\n        }}\n        inputProps={{\n          onFocus: () => {\n            setQuery('target', '');\n            loadSpecData();\n          },\n          tabIndex: 1,\n        }}\n        noResultsMessage={isTargetLoading ? 'Loading Targets ...' : 'No results found.'}\n        disabled={disabled}\n        minCharacters={0}\n        showNoResults\n        category\n        fluid\n      />\n    );\n  };\n\n  render() {\n    const { store, className, size = 'large' } = this.props;\n    const { source, errorMessage } = store;\n\n    let error;\n    if (errorMessage) {\n      error = <p className=\"RefBuilder-error pt-3\">{errorMessage}</p>;\n    }\n\n    return (\n      <div className={cn('RefBuilder', `is-${size}`, `is-${source}`, className)}>\n        {this.renderSource()}\n        {error}\n      </div>\n    );\n  }\n}\n\nconst InjectedRefBuilder = inject(({ projectStore, routerStore, refBuilderStore }, { id }) => {\n  let store = refBuilderStore.register(id);\n\n  return {\n    projectStore,\n    routerStore,\n    store,\n  };\n})(observer(RefBuilder));\n\nclass RefBuilderWrapper extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { id: this.props.id || shortid() };\n  }\n\n  render() {\n    const { id } = this.state;\n\n    return <InjectedRefBuilder {...this.props} id={this.props.id || id} />;\n  }\n}\n\nexport default RefBuilderWrapper;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Segment, Icon, Popup, Message } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport CapturesTab, { CapturesTabItem } from './tabs/captures';\nimport ScriptsTab, { ScriptsTabItem } from './tabs/scripts';\nimport RefBuilder from '../../RefBuilder';\n\nconst defaultLogicLocations = [\n  'output.headers',\n  'output.body',\n  'output.status',\n  'output.time',\n  '$.ctx',\n  '$$.env',\n  '$$.response.headers',\n  '$$.response.body',\n  '$$.response.status',\n];\n\nfunction RefInput(props) {\n  const {\n    id,\n    editorId,\n    collection,\n    scenarioId,\n    step = {},\n    ui = {},\n    updateUi,\n\n    headerElems = [],\n    handleUpdate,\n    readOnly,\n    autocompleteScopes = {},\n  } = props;\n\n  let pathname = typeof window !== 'undefined' ? window.location.pathname : '';\n  if (scenarioId && scenarioId !== 'undefined') {\n    pathname = pathname.replace(new RegExp(`/${scenarioId}$`), '');\n    if (pathname.charAt(0) === '/') {\n      pathname = pathname.substring(1);\n    }\n  }\n\n  const stepRef = _.get(step, ['input', '$ref']);\n\n  const inputTab = ui.hasOwnProperty('inputTab') ? ui.inputTab : 'captures';\n  const handleInputTabClick = (e, { name }) => {\n    updateUi('set', ['inputTab'], name === inputTab ? null : name);\n  };\n  let contentElem;\n  switch (inputTab) {\n    case 'captures':\n      contentElem = (\n        <CapturesTab\n          fields={_.get(step, 'after.transforms')}\n          handleUpdate={(t, p, v) => {\n            handleUpdate(t, ['after', 'transforms'].concat(p), v);\n          }}\n          logicLocations={defaultLogicLocations}\n          readOnly={readOnly}\n        />\n      );\n      break;\n    case 'scripts':\n      contentElem = (\n        <ScriptsTab\n          step={step}\n          handleUpdate={handleUpdate}\n          readOnly={readOnly}\n          autocompleteScopes={{ ref: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  return (\n    <div className=\"ScenarioStepInput type-ref\">\n      {readOnly ? (\n        <Message info size=\"small\">\n          <Icon name=\"info\" /> This editor is in read only mode.\n        </Message>\n      ) : null}\n\n      <div className=\"ScenarioStepInput-methodUrl flex\">\n        {headerElems.map((elem, i) => (\n          <div key={elem.key || i} className=\"mr-3\">\n            {elem.render()}\n          </div>\n        ))}\n\n        <div className=\"flex flex-1 items-center\">\n          <RefBuilder\n            id={id}\n            className=\"flex-1\"\n            localData={collection}\n            initialSource=\"local\"\n            $ref={stepRef || ''}\n            fileFilter={{ scenario: [/scenario/] }}\n            routeDataTargets={{ scenario: ['scenarios', 'utilities'] }}\n            targets\n            onComplete={value => {\n              const val = _.split(value, '/');\n              handleUpdate('set', ['input'], {\n                name: `${_.last(val)} - ${val[_.size(val) - 2]}`,\n                $ref: value,\n              });\n            }}\n          />\n        </div>\n      </div>\n\n      <Menu id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n        <CapturesTabItem\n          step={step}\n          active={inputTab === 'captures'}\n          onClick={handleInputTabClick}\n        />\n\n        <ScriptsTabItem step={step} active={inputTab === 'scripts'} onClick={handleInputTabClick} />\n      </Menu>\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n}\n\nexport default inject(({ routerStore, appStore, collectionEditorStore }) => ({\n  routerStore,\n  ...appStore.injectUi('ref-step'),\n}))(observer(RefInput));\n","import React from 'react';\nimport _ from 'lodash';\nimport { Menu, Segment, Message, Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport FormCodeEditor from '../../FormCodeEditor';\n\nfunction ScriptInput(props) {\n  const {\n    id,\n    step = {},\n    ui = {},\n    updateUi,\n\n    handleUpdate,\n\n    autocompleteScopes = {},\n    readOnly,\n  } = props;\n\n  const stepScript = _.get(step, ['input', 'script'], '');\n\n  const inputTab = ui.hasOwnProperty('inputTab') ? ui.inputTab : 'script';\n  const handleInputTabClick = (e, { name }) => {\n    updateUi('set', ['inputTab'], name === inputTab ? null : name);\n  };\n\n  let contentElem;\n  switch (inputTab) {\n    case 'script':\n      contentElem = (\n        <FormCodeEditor\n          name={id}\n          mode=\"javascript\"\n          readOnly={readOnly}\n          autocompleteScopes={{ script: true, ...autocompleteScopes }}\n          input={{\n            value: stepScript,\n            onChange(value) {\n              if (_.isEmpty(value)) {\n                handleUpdate('unset', ['input', 'script']);\n              } else {\n                handleUpdate('set', ['input', 'script'], value);\n              }\n            },\n          }}\n        />\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  return (\n    <div className=\"ScenarioStepInput type-script\">\n      {readOnly ? (\n        <Message info size=\"small\">\n          <Icon name=\"info\" /> This editor is in read only mode.\n        </Message>\n      ) : null}\n\n      <Menu id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n        <Menu.Item name=\"scripts\" active>\n          Script\n        </Menu.Item>\n      </Menu>\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n}\n\nexport default inject(({ routerStore, appStore, collectionEditorStore }) => ({\n  routerStore,\n  ...appStore.injectUi('script-step'),\n}))(observer(ScriptInput));\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport HttpInput from './http';\nimport RefInput from './ref';\nimport ScriptInput from './script';\n\nfunction Step(props) {\n  const { editor, editorId, type, step = {}, autocompleteScopes = {} } = props;\n\n  const id = `${editorId}:${_.join(_.get(editor, 'currentPath', ['noop']), ':')}`;\n\n  if (!step) {\n    return (\n      <Message negative compact>\n        Step not found.\n      </Message>\n    );\n  }\n\n  let editorElem;\n  switch (type || step.type) {\n    case 'http':\n      editorElem = (\n        <HttpInput {...props} id={id} autocompleteScopes={{ step: true, ...autocompleteScopes }} />\n      );\n      break;\n    case 'ref':\n      editorElem = (\n        <RefInput {...props} id={id} autocompleteScopes={{ step: true, ...autocompleteScopes }} />\n      );\n      break;\n    case 'script':\n      editorElem = (\n        <ScriptInput\n          {...props}\n          id={id}\n          autocompleteScopes={{ step: true, ...autocompleteScopes }}\n        />\n      );\n      break;\n    default:\n      if (_.isEmpty(step)) {\n        editorElem = <Message negative>Step does not exist.</Message>;\n      } else {\n        editorElem = <Message negative>Invalid step type {type || step.type}.</Message>;\n      }\n  }\n\n  return editorElem;\n}\n\nexport default Step;\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\n\n// import './styles.styl';\n\n/**\n * Returns the type of an object as a string.\n *\n * @param obj Object The object you want to inspect\n * @return String The object's type\n */\nconst objType = obj => {\n  const className = Object.prototype.toString.call(obj).slice(8, -1);\n  return className;\n};\n\n/**\n * String node component\n */\nconst JSONStringNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"string itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{value}</span>\n    </li>\n  );\n};\n\n/**\n * Number node component\n */\nconst JSONNumberNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"number itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{value}</span>\n    </li>\n  );\n};\n\n/**\n * Null node component\n */\nconst JSONNullNode = ({ data, keyName, value }) => {\n  return (\n    <li\n      className=\"null itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>null</span>\n    </li>\n  );\n};\n\n/**\n * Boolean node component\n */\nconst JSONBooleanNode = ({ data, keyName, value }) => {\n  const truthString = value ? 'true' : 'false';\n  return (\n    <li\n      className=\"boolean itemNode\"\n      onClick={e => {\n        e.stopPropagation();\n      }}\n    >\n      <label>{keyName}:</label>\n      <span>{truthString}</span>\n    </li>\n  );\n};\n\n/**\n * Creates a React JSON Viewer component for a key and it's associated data\n *\n * @param key String The JSON key (property name) for the node\n * @param value Mixed The associated data for the JSON key\n * @return Component The React Component for that node\n */\nconst grabNode = (key, value) => {\n  const nodeType = objType(value);\n  let theNode;\n  const aKey = key + Date.now();\n  if (nodeType === 'Object') {\n    theNode = <JSONObjectNode data={value} keyName={key} key={aKey} />;\n  } else if (nodeType === 'Array') {\n    theNode = <JSONArrayNode data={value} keyName={key} key={aKey} />;\n  } else if (nodeType === 'String') {\n    theNode = <JSONStringNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Number') {\n    theNode = <JSONNumberNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Boolean') {\n    theNode = <JSONBooleanNode keyName={key} value={value} key={aKey} />;\n  } else if (nodeType === 'Null') {\n    theNode = <JSONNullNode keyName={key} value={value} key={aKey} />;\n  } else {\n    console.error('How did this happen?', nodeType);\n  }\n  return theNode;\n};\n\n/**\n * Mixin for setting intial props and state and handling clicks on\n * nodes that can be expanded.\n */\nfunction expandedStateHandlerHOC(Component) {\n  return class extends React.Component {\n    static defaultProps = {\n      data: [],\n      initialExpanded: false,\n    };\n\n    state = {\n      expanded: this.props.initialExpanded,\n    };\n\n    handleClick = e => {\n      e.stopPropagation();\n      this.setState({\n        expanded: !this.state.expanded,\n      });\n    };\n\n    componentWillReceiveProps() {\n      // resets our caches and flags we need to build child nodes again\n      this.renderedChildren = [];\n      this.itemString = false;\n      this.needsChildNodes = true;\n    }\n\n    render() {\n      return <Component handleClick={this.handleClick} {...this.props} {...this.state} />;\n    }\n  };\n}\n\nconst buildChildNodes = ({ data }) => {\n  const childNodes = [];\n\n  const obj = data;\n  for (const k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      childNodes.push(grabNode(k, obj[k]));\n    }\n  }\n\n  return childNodes;\n};\n\n/**\n * Array node class. If you have an array, this is what you should use to\n * display it.\n */\n@expandedStateHandlerHOC\nclass JSONArrayNode extends React.Component {\n  static displayName = 'JSONArrayNode';\n\n  static propTypes = {\n    data: PropTypes.array,\n    keyName: PropTypes.node,\n    expanded: PropTypes.bool,\n    handleClick: PropTypes.func,\n  };\n\n  /**\n   * Returns the child nodes for each element in the array. If we have\n   * generated them previously, we return from cache, otherwise we create\n   * them.\n   */\n  getChildNodes = () => {\n    if (this.props.expanded && this.needsChildNodes) {\n      const childNodes = buildChildNodes({ data: this.props.data });\n      this.needsChildNodes = false;\n      this.renderedChildren = childNodes;\n    }\n\n    return this.renderedChildren || [];\n  };\n\n  /**\n   * flag to see if we still need to render our child nodes\n   */\n  needsChildNodes = true;\n\n  /**\n   * cache store for our child nodes\n   */\n  renderedChildren = [];\n\n  /**\n   * cache store for the number of items string we display\n   */\n  itemString = false;\n\n  /**\n   * Returns the \"n Items\" string for this node, generating and\n   * caching it if it hasn't been created yet.\n   */\n  getItemString = () => {\n    if (!this.itemString) {\n      const lenWord = this.props.data.length === 1 ? ' Item' : ' Items';\n      this.itemString = this.props.data.length + lenWord;\n    }\n    return this.itemString;\n  };\n\n  render() {\n    const childNodes = this.getChildNodes();\n    const childListStyle = {\n      display: this.props.expanded ? 'block' : 'none',\n    };\n    let cls = 'array parentNode';\n    cls += this.props.expanded ? ' expanded' : '';\n    return (\n      <li className={cls} onClick={this.props.handleClick}>\n        <label>{this.props.keyName}</label>\n        <span>{this.getItemString()}</span>\n        <ol style={childListStyle}>{childNodes}</ol>\n      </li>\n    );\n  }\n}\n\n/**\n * Object node class. If you have an object, this is what you should use to\n * display it.\n */\n@expandedStateHandlerHOC\nclass JSONObjectNode extends React.Component {\n  static displayName = 'JSONObjectNode';\n\n  static propTypes = {\n    data: PropTypes.object,\n    keyName: PropTypes.node,\n    expanded: PropTypes.bool,\n    handleClick: PropTypes.func,\n  };\n\n  /**\n   * Returns the child nodes for each element in the object. If we have\n   * generated them previously, we return from cache, otherwise we create\n   * them.\n   */\n  getChildNodes = () => {\n    if (this.props.expanded && this.needsChildNodes) {\n      const childNodes = buildChildNodes({ data: this.props.data });\n      this.needsChildNodes = false;\n      this.renderedChildren = childNodes;\n    }\n\n    return this.renderedChildren || [];\n  };\n\n  /**\n   * Returns the \"n Items\" string for this node, generating and\n   * caching it if it hasn't been created yet.\n   */\n  getItemString = () => {\n    if (!this.itemString) {\n      const obj = this.props.data;\n      let len = 0;\n      let lenWord = ' Items';\n      for (const k in obj) {\n        if (obj.hasOwnProperty(k)) {\n          len += 1;\n        }\n      }\n      if (len === 1) {\n        lenWord = ' Item';\n      }\n      this.itemString = len + lenWord;\n    }\n    return this.itemString;\n  };\n\n  /**\n   * cache store for the number of items string we display\n   */\n  itemString = false;\n\n  /**\n   * flag to see if we still need to render our child nodes\n   */\n  needsChildNodes = true;\n\n  /**\n   * cache store for our child nodes\n   */\n  renderedChildren = [];\n\n  render() {\n    const childNodes = this.getChildNodes();\n    const childListStyle = {\n      display: this.props.expanded ? 'block' : 'none',\n    };\n    let cls = 'object parentNode';\n    cls += this.props.expanded ? ' expanded' : '';\n    return (\n      <li className={cls} onClick={this.props.handleClick}>\n        <label>{this.props.keyName}:</label>\n        <span>{this.getItemString()}</span>\n        <ul style={childListStyle}>{childNodes}</ul>\n      </li>\n    );\n  }\n}\n\n/**\n * JSONTree component. This is the 'viewer' base. Pass it a `data` prop and it\n * will render that data, or pass it a `source` URL prop and it will make\n * an XMLHttpRequest for said URL and render that when it loads the data.\n *\n * The first node it draws will be expanded by default.\n */\nclass JSONTree extends React.Component {\n  static propTypes = {\n    data: PropTypes.oneOfType([PropTypes.object, PropTypes.array, PropTypes.string]),\n  };\n\n  static defaultProps = {\n    source: false,\n  };\n\n  render() {\n    let { data } = this.props;\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) {\n        // error\n      }\n    }\n\n    const nodeType = objType(data);\n    let rootNode;\n    if (nodeType === 'Object') {\n      rootNode = <JSONObjectNode data={data} keyName=\"object\" initialExpanded />;\n    } else if (nodeType === 'Array') {\n      rootNode = <JSONArrayNode data={data} initialExpanded keyName=\"array\" />;\n    } else {\n      rootNode = 'Provided data is not a valid JSON.';\n    }\n    return <ul className=\"sl-json-tree\">{rootNode}</ul>;\n  }\n}\n\nexport default JSONTree;\n","import React from 'react'; // eslint-disable-line no-unused-vars\nimport PropTypes from 'prop-types';\n\nexport default class DocumentContext extends React.Component {\n  static propTypes = {\n    document: PropTypes.object.isRequired,\n    window: PropTypes.object.isRequired,\n    children: PropTypes.element.isRequired,\n  };\n\n  static childContextTypes = {\n    document: PropTypes.object.isRequired,\n    window: PropTypes.object.isRequired,\n  };\n\n  getChildContext() {\n    return {\n      document: this.props.document,\n      window: this.props.window,\n    };\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\nimport _ from 'lodash';\n\nimport DocumentContext from './documentContext';\n\nclass Frame extends React.Component {\n  static propTypes = {\n    id: PropTypes.string.isRequired,\n    style: PropTypes.object,\n    head: PropTypes.node,\n  };\n\n  componentDidMount() {\n    this.renderFrameContents();\n  }\n\n  renderFrameContents = () => {\n    let doc;\n    try {\n      doc = _.get(ReactDOM.findDOMNode(this), 'contentDocument');\n    } catch (err) {\n      // most likely component is unmounted\n    }\n\n    if (doc && doc.readyState === 'complete') {\n      const win = doc.defaultView || doc.parentView;\n\n      const contents = (\n        <DocumentContext document={doc} window={win}>\n          <div className=\"frame-content\">\n            {this.props.head}\n            {this.props.children}\n          </div>\n        </DocumentContext>\n      );\n\n      ReactDOM.render(contents, doc.body);\n    } else {\n      setTimeout(this.renderFrameContents, 0);\n    }\n  };\n\n  componentDidUpdate() {\n    this.renderFrameContents();\n  }\n\n  componentWillUnmount() {\n    const doc = _.get(ReactDOM.findDOMNode(this), 'contentDocument');\n\n    if (doc) {\n      ReactDOM.unmountComponentAtNode(doc.body);\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return this.props.id !== nextProps.id;\n  }\n\n  render() {\n    const targetProps = _.clone(this.props);\n    delete targetProps.children;\n\n    // The iframe isn't ready so we drop children from props here\n    return <iframe {...targetProps} />;\n  }\n}\n\nexport default Frame;\n","/* global vkbeautify */\n\nimport React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\n\n// import './vkBeautify';\n\nimport CodeEditor from '../CodeEditor';\nimport JsonTree from '../JsonTree';\nimport Frame from '../Frame';\n\nconst HttpBodyViewer = props => {\n  const {\n    className = '',\n    name,\n    value,\n    contentType = '',\n    uiCache = {},\n    uiCacheScope = [],\n    updateUiCache,\n    shouldEncode,\n    noTypeSelector,\n  } = props;\n\n  const isImage = contentType.match('image');\n  const isHtml = contentType.match('html');\n  const isXml = contentType.match('xml');\n\n  let defaultRenderer = 'json';\n  if (isXml) {\n    defaultRenderer = 'xml';\n  } else if (isHtml) {\n    defaultRenderer = 'renderHtml';\n  }\n\n  const renderer = uiCache.renderer || defaultRenderer;\n\n  let contentElem;\n  let specialCase;\n\n  if (isImage) {\n    specialCase = true;\n    const imgStr = shouldEncode\n      ? btoa(String.fromCharCode.apply(null, new Uint8Array(value)))\n      : value;\n    contentElem = (\n      <div>\n        <img src={`data:${contentType};base64,${imgStr}`} />\n      </div>\n    );\n  } else if (isHtml && shouldEncode) {\n    specialCase = true;\n    contentElem = (\n      <Frame\n        id=\"body-viewer\"\n        src=\"about:blank\"\n        width=\"100%\"\n        height=\"1000\"\n        frameBorder=\"0\"\n        sandbox=\"allow-scripts allow-forms\"\n      >\n        <div dangerouslySetInnerHTML={{ __html: value }} />\n      </Frame>\n    );\n  } else {\n    switch (renderer) {\n      case 'jsonExplorer':\n        contentElem = <JsonTree data={value} />;\n        break;\n      case 'renderHtml':\n        contentElem = (\n          <Frame\n            id=\"body-viewer\"\n            src=\"about:blank\"\n            width=\"100%\"\n            height=\"1000\"\n            frameBorder=\"0\"\n            sandbox=\"allow-scripts allow-forms\"\n          >\n            <div dangerouslySetInnerHTML={{ __html: value }} />\n          </Frame>\n        );\n        break;\n      default:\n        contentElem = (\n          <CodeEditor\n            name={`${name}-${renderer}`}\n            mode={renderer}\n            value={value}\n            autogrow\n            maxLines={40}\n            noFill\n            readOnly\n            wordWrap\n            lint={false}\n          />\n        );\n    }\n  }\n\n  let dropdownElem;\n  if (!specialCase && !noTypeSelector) {\n    dropdownElem = (\n      <div className=\"mb-6\">\n        <Dropdown\n          options={[\n            {\n              text: 'JSON',\n              value: 'json',\n            },\n            {\n              text: 'JSON Explorer',\n              value: 'jsonExplorer',\n            },\n            {\n              text: 'XML',\n              value: 'xml',\n            },\n            {\n              text: 'HTML',\n              value: 'html',\n            },\n            {\n              text: 'Rendered HTML',\n              value: 'renderHtml',\n            },\n            {\n              text: 'Plain',\n              value: 'text',\n            },\n          ]}\n          value={renderer}\n          onChange={(e, options) => {\n            updateUiCache('set', uiCacheScope.concat('renderer'), options.value);\n          }}\n          selection\n          button\n          basic\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className={`HttpBodyViewer ${className}`}>\n      {dropdownElem}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default HttpBodyViewer;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Input } from 'semantic-ui-react';\n\nconst InputResultList = props => {\n  const { className = '', fields = {}, sort } = props;\n\n  let processed = fields;\n  if (sort) {\n    processed = {};\n    _.forEach(_.keys(fields).sort(), key => {\n      processed[key] = fields[key];\n    });\n  }\n\n  return (\n    <div className={`InputResultList ${className}`}>\n      {_.map(processed, (value, key) => {\n        return (\n          <div key={key} className=\"mb-2\">\n            <div className=\"flex\">\n              <Input defaultValue={key} className=\"flex-1\" readOnly />\n              <Input defaultValue={value} className=\"flex-1\" readOnly />\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default InputResultList;\n","import React from 'react';\nimport { Statistic } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nconst ScenarioStats = ({ title, items = [] }) => {\n  let contentElem;\n  if (_.isEmpty(items)) {\n    contentElem = <div className=\"text-center font-bold\">no results yet</div>;\n  } else {\n    contentElem = <Statistic.Group size=\"tiny\" widths={items.length} items={items} />;\n  }\n\n  return (\n    <div className=\"ScenarioStats\">\n      {title ? <div className=\"SplitEditor-parsedTitle\">{title}</div> : null}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default ScenarioStats;\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Menu } from 'semantic-ui-react';\nimport { safeStringify } from '@platform/utils/json';\n\nimport HttpBodyViewer from '../../HttpBodyViewer';\nimport InputResultList from '../../InputResultList';\nimport ScenarioStats from '../../ScenarioStats';\n\nconst ScenarioOutput = props => {\n  const { id, ui, updateUi, className = '', result = {}, stats = [] } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  const { activeResultTab = 'body' } = ui;\n  const response = result.output || {};\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  const responseContentType = response.headers ? response.headers['Content-Type'] : '';\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'body':\n      contentElem = (\n        <div>\n          <ScenarioStats items={stats} />\n\n          <HttpBodyViewer\n            name={`${id}-body`}\n            contentType={responseContentType}\n            value={safeStringify(_.get(response, 'body', ''))}\n            uiCache={ui.body}\n            uiCacheScope={['body']}\n            updateUiCache={updateUi}\n            noTypeSelector\n          />\n        </div>\n      );\n      break;\n    case 'headers':\n      contentElem = <InputResultList fields={_.get(response, 'headers')} sort />;\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // BODY TAB\n\n  const status = String(_.get(response, 'status') || 'na');\n  const bodyChar = status.charAt(0);\n  let bodyClass = 'text-active';\n  if (bodyChar === '2') {\n    bodyClass = 'c-positive';\n  } else if (_.includes(['4', '5'], bodyChar)) {\n    bodyClass = 'c-negative';\n  }\n  const bodyName = (\n    <span>\n      Scenario Response <span className={`ml-3 ${bodyClass}`}>[{status}]</span>{' '}\n      {response.time ? (\n        <span className=\"c-muted ml-3\">\n          {response.time}\n          ms\n        </span>\n      ) : (\n        ''\n      )}\n    </span>\n  );\n\n  // HEADERS TAB\n\n  const headerName = (\n    <span>\n      Headers{' '}\n      <b>\n        <span className=\"ml-2 text-active\">[{_.size(_.get(response, 'headers') || {})}]</span>\n      </b>\n    </span>\n  );\n\n  const menuElem = (\n    <Menu pointing secondary>\n      <Menu.Item name=\"body\" active={activeResultTab === 'body'} onClick={handleItemClick}>\n        {bodyName}\n      </Menu.Item>\n\n      <Menu.Item name=\"headers\" active={activeResultTab === 'headers'} onClick={handleItemClick}>\n        {headerName}\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <div className={`ScenarioOutput ${className}`}>\n      {menuElem}\n      {contentElem}\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`http-output-${id}`),\n}))(observer(ScenarioOutput));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport { safeStringify } from '@platform/utils/json';\n\nimport HttpBodyViewer from '../../HttpBodyViewer';\nimport CodeEditor from '../../CodeEditor';\nimport Highlight from '../../Highlight';\nimport InputResultList from '../../InputResultList';\n\nconst HttpOutput = props => {\n  const { id, ui, updateUi, className, result = {}, tabWhitelist, noTypeSelector } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  let { activeResultTab = 'body' } = ui;\n  const request = result.input || {};\n  const response = result.output || {};\n  const assertions = _.get(result, 'before.assertions', []).concat(\n    _.get(result, 'after.assertions', [])\n  );\n  const logs = result.logs || [];\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  const responseContentType = response.headers ? response.headers['Content-Type'] : '';\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'body':\n      contentElem = (\n        <HttpBodyViewer\n          name={`${id}-body`}\n          contentType={responseContentType}\n          value={safeStringify(_.get(response, 'body', ''))}\n          uiCache={ui.body}\n          uiCacheScope={['body']}\n          updateUiCache={updateUi}\n          noTypeSelector={noTypeSelector}\n        />\n      );\n      break;\n    case 'headers':\n      contentElem = <InputResultList fields={_.get(response, 'headers')} sort />;\n      break;\n    case 'request':\n      const headerLines = _.map(request.headers || {}, (value, name) => `${name}: ${value}`).join(\n        '\\n'\n      );\n      const requestString = `${(request.method || 'get').toUpperCase()} ${request.url}\n\nHeaders:\n  ${_.isEmpty(headerLines) ? '{}' : headerLines}\n\nBody:\n  ${safeStringify(_.get(request, 'body') || 'undefined')}\n  `;\n      contentElem = (\n        <div className=\"p-3\">\n          <div className=\"c-muted mb-6\">\n            The http request as it was sent, after all transformations, scripts, and variable\n            replacements were run.\n          </div>\n\n          <CodeEditor\n            name=\"final-request\"\n            value={requestString}\n            autogrow\n            maxLines={50}\n            noFill\n            readOnly\n            lint={false}\n          />\n        </div>\n      );\n      break;\n    case 'tests':\n      if (_.isEmpty(assertions)) {\n        contentElem = (\n          <div className=\"c-muted\">\n            {`No tests. Use the tests tab above to add assertions. Use the\n            \"tests\" object in scripts for added flexibility.`}\n          </div>\n        );\n      } else {\n        contentElem = (\n          <div>\n            {assertions.map((a, i) => {\n              let assertionClass;\n              let icon = 'circle';\n              if (a.pass) {\n                assertionClass = 'passed';\n                icon = 'check';\n              } else if (a) {\n                assertionClass = 'failed';\n                icon = 'remove';\n              }\n\n              let expectedElem;\n              if (typeof a.expected === 'object') {\n                expectedElem = '[schema object not shown for now]';\n              } else {\n                expectedElem = a.expected;\n              }\n\n              return (\n                <div key={i} className={cn('AssertionResult flex items-center', assertionClass)}>\n                  <div className=\"AssertionResult-icon\">\n                    <Icon name={icon} />\n                  </div>\n                  <div className=\"AssertionResult-content flex-1\">\n                    <div>\n                      {a.target} <b className=\"ml-3 mr-3\">[{a.op}]</b> {expectedElem}\n                    </div>\n                    {a.msg ? <div className=\"AssertionResult-message\">{a.msg}</div> : null}\n                    {a.details ? <div className=\"AssertionResult-message\">{a.details}</div> : null}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        );\n      }\n\n      break;\n    case 'capture':\n      contentElem = (\n        <div>\n          <div className=\"p-3\">\n            <div className=\"c-muted mb-6\">\n              $.ctx <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'ctx', '{}')}\n            </Highlight>\n          </div>\n\n          <div className=\"pt-3 pl-3 pr-3\">\n            <div className=\"c-muted mb-6\">\n              $$.env <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'env', '{}')}\n            </Highlight>\n          </div>\n        </div>\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // BODY TAB\n\n  const status = String(_.get(response, 'status') || 'na');\n  const bodyChar = status.charAt(0);\n  let bodyClass = 'text-active';\n  if (bodyChar === '2') {\n    bodyClass = 'c-positive';\n  } else if (_.includes(['4', '5'], bodyChar)) {\n    bodyClass = 'c-negative';\n  }\n  const bodyName = (\n    <span>\n      Body <span className={cn('ml-3', bodyClass)}>[{status}]</span>{' '}\n      {response.time ? (\n        <span className=\"c-muted ml-3\">\n          {response.time}\n          ms\n        </span>\n      ) : (\n        ''\n      )}\n    </span>\n  );\n\n  // HEADERS TAB\n\n  const headerName = (\n    <span>\n      Headers{' '}\n      <b>\n        <span className=\"ml-2 text-active\">[{_.size(_.get(response, 'headers') || {})}]</span>\n      </b>\n    </span>\n  );\n\n  // INPUT TAB\n\n  const requestName = <span>Original Request</span>;\n\n  // TESTS TAB\n\n  let passElem;\n  if (result.passCount > 0) {\n    passElem = (\n      <span className=\"c-positive ml-2\">\n        <Icon fitted name=\"check\" /> {result.passCount}\n      </span>\n    );\n  }\n  let failedElem;\n  if (result.failCount > 0) {\n    failedElem = (\n      <span className=\"c-negative ml-2\">\n        <Icon fitted name=\"remove\" /> {result.failCount}\n      </span>\n    );\n  }\n  const testName = (\n    <span>\n      Tests{' '}\n      <b>\n        {passElem} {failedElem}\n      </b>\n    </span>\n  );\n  const testTitleElem = (\n    <Menu.Item name=\"tests\" active={activeResultTab === 'tests'} onClick={handleItemClick}>\n      {testName}\n    </Menu.Item>\n  );\n\n  // CAPTURE TAB\n\n  let captureName = 'Capture';\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const menuElem = (\n    <Menu attached=\"top\" tabular>\n      {!tabWhitelist || _.includes(tabWhitelist, 'body') ? (\n        <Menu.Item name=\"body\" active={activeResultTab === 'body'} onClick={handleItemClick}>\n          {bodyName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'headers') ? (\n        <Menu.Item name=\"headers\" active={activeResultTab === 'headers'} onClick={handleItemClick}>\n          {headerName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'tests') ? testTitleElem : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'capture') ? (\n        <Menu.Item name=\"capture\" active={activeResultTab === 'capture'} onClick={handleItemClick}>\n          {captureName}\n        </Menu.Item>\n      ) : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'request') ? (\n        <Menu.Item name=\"request\" active={activeResultTab === 'request'} onClick={handleItemClick}>\n          {requestName}\n        </Menu.Item>\n      ) : null}\n    </Menu>\n  );\n\n  return (\n    <div id=\"tutorial-http-output\" className={cn('HttpOutput', className)}>\n      {menuElem}\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`http-output-${id}`),\n}))(observer(HttpOutput));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment, Icon } from 'semantic-ui-react';\n\nimport Highlight from '../../Highlight';\n\nconst ScriptOutput = props => {\n  const { ui, updateUi, className = '', result = {}, tabWhitelist } = props;\n\n  if (_.isEmpty(result)) {\n    return null;\n  }\n\n  let { activeResultTab = 'tests' } = ui;\n  const assertions = _.get(result, 'before.assertions', []).concat(\n    _.get(result, 'after.assertions', [])\n  );\n\n  const handleItemClick = (e, { name }) => {\n    updateUi('set', ['activeResultTab'], name);\n  };\n\n  // BUILD THE TAB CONTENT\n\n  let contentElem;\n  switch (activeResultTab) {\n    case 'tests':\n      if (_.isEmpty(assertions)) {\n        contentElem = (\n          <div className=\"c-muted\">\n            No tests. Use the \"tests\" object in your script to add test assertions.\n          </div>\n        );\n      } else {\n        contentElem = (\n          <div>\n            {assertions.map((a, i) => {\n              let assertionClass;\n              let icon = 'circle';\n              if (a.pass) {\n                assertionClass = 'passed';\n                icon = 'check';\n              } else if (a) {\n                assertionClass = 'failed';\n                icon = 'remove';\n              }\n\n              let expectedElem;\n              if (typeof a.expected === 'object') {\n                expectedElem = '[schema object not shown for now]';\n              } else {\n                expectedElem = a.expected;\n              }\n\n              return (\n                <div key={i} className={cn('AssertionResult flex items-center', assertionClass)}>\n                  <div className=\"AssertionResult-icon\">\n                    <Icon name={icon} />\n                  </div>\n                  <div className=\"AssertionResult-content flex-1\">\n                    <div>\n                      {a.target} <b className=\"ml-3 mr-3\">[{a.op}]</b> {expectedElem}\n                    </div>\n                    {a.msg ? <div className=\"AssertionResult-message\">{a.msg}</div> : null}\n                    {a.details ? <div className=\"AssertionResult-message\">{a.details}</div> : null}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        );\n      }\n\n      break;\n    case 'capture':\n      contentElem = (\n        <div>\n          <div className=\"p-3\">\n            <div className=\"c-muted mb-6\">\n              $.ctx <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'ctx', '{}')}\n            </Highlight>\n          </div>\n\n          <div className=\"pt-3 pl-3 pr-3\">\n            <div className=\"c-muted mb-6\">\n              $$.env <i>after</i> step:\n            </div>\n\n            <Highlight mode=\"json\" immediate>\n              {_.get(result, 'env', '{}')}\n            </Highlight>\n          </div>\n        </div>\n      );\n      break;\n    default:\n      contentElem = <div>Please select a tab.</div>;\n      break;\n  }\n\n  // BUILD THE TABS\n\n  // TESTS TAB\n\n  let passElem;\n  if (result.passCount > 0) {\n    passElem = (\n      <span className=\"c-positive ml-2\">\n        <Icon fitted name=\"check\" /> {result.passCount}\n      </span>\n    );\n  }\n  let failedElem;\n  if (result.failCount > 0) {\n    failedElem = (\n      <span className=\"c-negative ml-2\">\n        <Icon fitted name=\"remove\" /> {result.failCount}\n      </span>\n    );\n  }\n  const testName = (\n    <span>\n      Tests{' '}\n      <b>\n        {passElem} {failedElem}\n      </b>\n    </span>\n  );\n  const testTitleElem = (\n    <Menu.Item name=\"tests\" active={activeResultTab === 'tests'} onClick={handleItemClick}>\n      {testName}\n    </Menu.Item>\n  );\n\n  // CAPTURE TAB\n\n  let captureName = 'Capture';\n  // if (!_.isEqual(beforeState, afterState)) {\n  //   captureName = (\n  //     <span>\n  //       Capture <b><span className='ml-2 text-active'><i className='fa fa-check' /></span></b>\n  //     </span>\n  //   );\n  // }\n\n  if (tabWhitelist && !_.includes(tabWhitelist, activeResultTab)) {\n    activeResultTab = 'body';\n  }\n\n  const menuElem = (\n    <Menu attached=\"top\" tabular>\n      {!tabWhitelist || _.includes(tabWhitelist, 'tests') ? testTitleElem : null}\n\n      {!tabWhitelist || _.includes(tabWhitelist, 'capture') ? (\n        <Menu.Item name=\"capture\" active={activeResultTab === 'capture'} onClick={handleItemClick}>\n          {captureName}\n        </Menu.Item>\n      ) : null}\n    </Menu>\n  );\n\n  return (\n    <div id=\"tutorial-script-output\" className={cn('ScriptOutput', className)}>\n      {menuElem}\n\n      <Segment attached=\"bottom\">{contentElem}</Segment>\n    </div>\n  );\n};\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`script-output-${id}`),\n}))(observer(ScriptOutput));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Accordion, Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nclass AccordionWrapper extends React.Component {\n  static propTypes = {\n    id: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    panels: PropTypes.array,\n    className: PropTypes.string,\n    defaultOpen: PropTypes.bool,\n    defaultActiveIndex: PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.arrayOf(PropTypes.number),\n    ]),\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (!_.isNil(props.defaultActiveIndex)) {\n      props.updateUi('set', 'panels', _.map([].concat(props.defaultActiveIndex), this.buildPanels));\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.id !== this.props.id) {\n      const { defaultActiveIndex = [], ui, updateUi } = nextProps;\n\n      if (_.isEmpty(ui.panels)) {\n        updateUi('set', 'panels', _.map([].concat(defaultActiveIndex), this.buildPanels));\n      }\n    }\n  }\n\n  buildPanels = (key, panel) => {\n    const { exclusive, ui } = this.props;\n    let panels = _.cloneDeep(ui.panels) || {};\n    const isActive = this.isPanelActive(key, panel);\n\n    if (!exclusive) {\n      panels[key] = !isActive;\n    } else {\n      panels = {\n        [key]: !isActive,\n      };\n    }\n\n    return panels;\n  };\n\n  togglePanel = (key, panel) => {\n    const { updateUi } = this.props;\n\n    updateUi('set', 'panels', this.buildPanels(key, panel));\n  };\n\n  isPanelActive = (key, panel = {}) => {\n    const { ui } = this.props;\n    const { panels = {} } = ui;\n    const { defaultOpen } = panel;\n\n    return _.get(panels, key) ? true : _.has(panels, key) ? false : defaultOpen;\n  };\n\n  renderPanel = (panel, index) => {\n    let title;\n    let content;\n    const key = panel.id || index;\n    const isActive = this.isPanelActive(key, panel);\n\n    if (panel.title) {\n      title = (\n        <Accordion.Title\n          key={`${key}-title`}\n          active={isActive}\n          onClick={\n            panel.onClick ? () => panel.onClick(key, panel) : () => this.togglePanel(key, panel)\n          }\n        >\n          {_.isFunction(panel.title) ? (\n            panel.title()\n          ) : (\n            <div className=\"flex items-center\">\n              <Icon name=\"dropdown\" />\n\n              <div className={panel.icon ? '' : 'flex-1'}>{panel.title}</div>\n\n              {panel.icon ? (\n                <div className=\"ml-3\">\n                  <Icon {...panel.icon} />\n                </div>\n              ) : null}\n            </div>\n          )}\n        </Accordion.Title>\n      );\n    }\n\n    if (panel.content && isActive) {\n      content = (\n        <Accordion.Content key={`${key}-content`} active={isActive}>\n          {_.isFunction(panel.content) ? panel.content() : panel.content}\n        </Accordion.Content>\n      );\n    }\n\n    return [title, content];\n  };\n\n  render() {\n    const { panels, className, ...otherProps } = this.props;\n\n    // omit any props that don't need to be passed to semantic-ui-react\n    const accordionProps = _.omit(otherProps, [\n      'defaultActiveIndex',\n      'id',\n      'ui',\n      'updateUi',\n      'clearUi',\n    ]);\n\n    return (\n      <Accordion className={cn('AccordionWrapper', className)} {...accordionProps}>\n        {_.map(panels, this.renderPanel)}\n      </Accordion>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { id }) => {\n  return {\n    ...appStore.injectUi(`Accordion-${id}`),\n  };\n})(observer(AccordionWrapper));\n","import React from 'react';\nimport cn from 'classnames';\n\n// import './styles.styl';\n\nconst BarListItem = ({ index, parts = [], loading, withBorder, className }) => {\n  return (\n    <div\n      className={cn('BarListItem flex items-center', className, {\n        'is-loading': loading,\n        'with-border': withBorder,\n      })}\n    >\n      {index ? <div className=\"BarListItem-index\">{index}</div> : null}\n\n      <div className=\"BarListItem-loading fill-space\" />\n\n      {parts.map((part, i) => {\n        const style = {};\n        if (part.bgColor) {\n          style.backgroundColor = part.bgColor;\n          style.color = 'white';\n        }\n\n        return (\n          <div\n            key={i}\n            className={cn('BarListItem-part', part.className, {\n              'd-n': part.hide,\n              'is-padded': part.padded,\n              'with-bg': part.bg,\n              'with-border': part.border,\n              'flex-1': part.fill,\n            })}\n            style={style}\n          >\n            {part.elem()}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default BarListItem;\n","import React from 'react';\nimport _ from 'lodash';\nimport { Icon } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\nimport { stepResultMeta, stepName, stepToken } from '@platform/utils/collections';\n\nimport Accordion from '../../Accordion';\nimport BarListItem from '../../BarListItem';\n\nimport HttpOutput from './http';\n\nfunction flattenSteps(result) {\n  const scenarioSteps = _.get(result, 'input.spec.steps');\n  const outputSteps = _.get(result, 'output.steps');\n\n  if (_.isEmpty(outputSteps) || _.isEmpty(scenarioSteps)) {\n    return [];\n  }\n\n  let steps = [];\n\n  for (const index in scenarioSteps) {\n    const step = scenarioSteps[index];\n    const stepResult = outputSteps[index];\n\n    if (step.type === 'ref') {\n      steps = steps.concat(flattenSteps(stepResult));\n      continue;\n    }\n\n    steps.push({ step, stepResult });\n  }\n\n  return steps;\n}\n\nfunction computePanels(result, mappedScenarioNames) {\n  const steps = flattenSteps(result);\n\n  const panels = [];\n\n  for (const index in steps) {\n    const { step, stepResult } = steps[index];\n\n    const resultData = stepResultMeta({ stepResult });\n\n    panels.push({\n      title: () => (\n        <BarListItem\n          className=\"ScenarioStepList-item\"\n          parts={[\n            {\n              fill: true,\n              bg: true,\n              padded: true,\n              elem: () => {\n                let tokenElem;\n\n                const token = stepToken(step, { maxLength: 4 });\n                if (token && token.name) {\n                  tokenElem = (\n                    <div className={`ScenarioStepList-token ${token.className}`}>{token.name}</div>\n                  );\n                }\n\n                return (\n                  <div className=\"flex items-center ScenarioStepList-name\">\n                    <Icon name=\"dropdown\" />\n                    {tokenElem}\n                    {stepName(step, { skipToken: true, mappedScenarioNames })}\n                  </div>\n                );\n              },\n            },\n            {\n              bg: true,\n              padded: true,\n              className: resultData.className,\n              elem: () => resultData.status,\n            },\n          ]}\n        />\n      ),\n      content: () => <HttpOutput id={`${step.id}-${index}`} result={stepResult} />,\n    });\n  }\n\n  return panels;\n}\n\nfunction RefOutput({ result, mappedScenarioNames }) {\n  const panels = computePanels(result, mappedScenarioNames);\n\n  return (\n    <div>\n      <div className=\"SplitEditor-parsedTitle\">Output Steps</div>\n      <Accordion fluid exclusive={false} panels={panels} />\n    </div>\n  );\n}\n\nexport default inject(({ collectionEditorStore }, { id }) => {\n  return {\n    mappedScenarioNames: collectionEditorStore.getEditor({ id }).mappedNames,\n  };\n})(observer(RefOutput));\n","import React from 'react';\nimport { Message } from 'semantic-ui-react';\n\nimport ScenarioOutput from './scenario';\nimport HttpOutput from './http';\nimport ScriptOutput from './script';\nimport RefOutput from './ref';\n\nfunction Step(props) {\n  const { id, type, result = {} } = props;\n\n  let editorElem;\n  switch (type) {\n    case 'scenario':\n      editorElem = <ScenarioOutput {...props} id={id} result={result} />;\n      break;\n    case 'http':\n      editorElem = <HttpOutput {...props} id={id} result={result} />;\n      break;\n    case 'script':\n      editorElem = <ScriptOutput {...props} id={id} result={result} />;\n      break;\n    case 'ref':\n      editorElem = <RefOutput {...props} id={id} result={result} />;\n      break;\n    default:\n      editorElem = <Message negative>Invalid step type {type}.</Message>;\n  }\n\n  return editorElem;\n}\n\nexport default Step;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { safeParse } from '@platform/utils/json';\n\nimport Highlight from '../Highlight';\n\nconst ScenarioLog = props => {\n  const { className, log = {} } = props;\n\n  let messages = log.msg || [];\n  if (typeof messages === 'string') {\n    messages = [messages];\n  }\n\n  return (\n    <div className={cn('ScenarioLog flex items-center', className)}>\n      <div className=\"ScenarioLog-meta\">\n        <div className={`c-${log.type} font-bold`}>{log.code ? log.code : log.type}</div>\n        <div className=\"c-muted\">{log.source}</div>\n      </div>\n      <div className=\"flex-1 ScenarioLog-messages\">\n        {_.map(messages, (m, i) => {\n          let elem = m;\n          const message = safeParse(m, m);\n          if (typeof message === 'object') {\n            elem = (\n              <Highlight mode=\"json\" immediate>\n                {message}\n              </Highlight>\n            );\n          }\n\n          return (\n            <div key={i} className=\"ScenarioLog-message\">\n              {elem}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default ScenarioLog;\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { Menu, Segment } from 'semantic-ui-react';\nimport _ from 'lodash';\n\nimport ScenarioLog from './log';\n\nconst ScenarioLogs = ({ ui, updateUi, logs = [] }) => {\n  const menuElems = [];\n  const filtered = {\n    fatal: {\n      logs: _.filter(logs, { type: 'fatal' }),\n      className: 'c-error',\n      name: 'Fatal',\n    },\n    error: {\n      logs: _.filter(logs, { type: 'error' }),\n      className: 'c-error',\n      name: 'Error',\n    },\n    warn: {\n      logs: _.filter(logs, { type: 'warn' }),\n      className: 'c-warn',\n      name: 'Warning',\n    },\n    info: {\n      logs: _.filter(logs, { type: 'info' }),\n      className: 'text-active',\n      name: 'Info',\n    },\n  };\n\n  // first one with logs is default active\n  let defaultActive;\n  for (const k in filtered) {\n    const f = filtered[k];\n    if (!_.isEmpty(f.logs)) {\n      defaultActive = k;\n      break;\n    }\n  }\n\n  const active = _.get(ui, 'isActive', defaultActive);\n  _.forEach(filtered, (f, k) => {\n    if (!_.isEmpty(f.logs)) {\n      menuElems.push(\n        <Menu.Item\n          key={k}\n          active={k === active}\n          onClick={() => {\n            updateUi('set', 'isActive', k);\n          }}\n        >\n          <span className=\"mr-3\">{f.name}</span>\n          <b>\n            <span className={f.className}> [{f.logs.length}]</span>\n          </b>\n        </Menu.Item>\n      );\n    }\n  });\n\n  const activeLogs = _.get(filtered, [active, 'logs']);\n  const logElems = _.map(activeLogs, (l, i) => {\n    return <ScenarioLog key={i} log={l} />;\n  });\n\n  return [\n    <Menu key=\"1\" id=\"tutorial-scenario-input\" attached=\"top\" tabular size=\"small\">\n      {menuElems}\n    </Menu>,\n\n    <Segment key=\"2\" attached=\"bottom\">\n      {logElems}\n    </Segment>,\n  ];\n};\n\nexport default inject(({ appStore }, { id }) => {\n  return {\n    ...appStore.injectUi(`${id}:ScenarioLogs`),\n  };\n})(observer(ScenarioLogs));\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Loader } from 'semantic-ui-react';\n\nimport StepBasics from './step_basics';\n\nimport EditorContentSection from '../EditorContentSection';\nimport StepInput from '../ScenarioEditor/input';\nimport StepOutput from '../ScenarioEditor/output';\nimport ScenarioLogs from '../ScenarioLogs';\n\nfunction Basics(props) {\n  const { editor } = props;\n  const { currentStep = {} } = editor;\n\n  return <StepBasics step={currentStep.data} {...props} />;\n}\nconst InjectedBasics = inject(({ collectionEditorStore }, { editorId }) => {\n  return {\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Basics));\n\nfunction Input(props) {\n  const { editor = {}, readOnly, autocompleteScopes, inputProps = {}, handleUpdate } = props;\n\n  const { currentStep = {} } = editor;\n\n  return (\n    <StepInput\n      editorId={editor.id}\n      editor={editor}\n      collection={editor.parsed}\n      collectionId={editor.id}\n      scenarioId={editor.currentScenarioId}\n      readOnly={readOnly}\n      step={currentStep.data}\n      stepIndex={currentStep.index}\n      autocompleteScopes={autocompleteScopes}\n      handleUpdate={(t, p, v) => {\n        if (!_.isEmpty(editor)) {\n          editor.updateCurrentParsed(t, p, v);\n\n          if (handleUpdate) {\n            handleUpdate(t, p, v);\n          }\n        }\n      }}\n      {...inputProps}\n    />\n  );\n}\nconst InjectedInput = inject(({ collectionEditorStore }, { editorId }) => {\n  return {\n    collectionEditorStore,\n    editor: collectionEditorStore.getEditor({ id: editorId }),\n  };\n})(observer(Input));\n\nfunction Debug({ editor = {} }) {\n  const { currentResult, currentRunning } = editor;\n\n  const logs = _.get(currentResult, 'data.logs');\n  if (currentRunning || _.isEmpty(logs)) {\n    return null;\n  }\n\n  return (\n    <EditorContentSection id=\"ScenarioStep:result\" title=\"Debug\">\n      <ScenarioLogs id={currentResult.id} logs={logs} />\n    </EditorContentSection>\n  );\n}\nconst InjectedDebug = inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(Debug));\n\nfunction Output({ editor = {}, standalone, outputProps = {} }) {\n  const { currentResult, currentRunning } = editor;\n\n  let elem;\n  if (currentRunning) {\n    elem = (\n      <div className=\"p-6 text-center\">\n        <Loader indeterminate active inline>\n          Running\n        </Loader>\n      </div>\n    );\n  } else if (currentResult) {\n    elem = (\n      <StepOutput\n        id={currentResult.id}\n        type={currentResult.type}\n        result={currentResult.data}\n        {...outputProps}\n      />\n    );\n  } else if (standalone) {\n    return null;\n  } else {\n    elem = (\n      <h4 className=\"c-muted font-bold text-center\">click the run step button to view output</h4>\n    );\n  }\n\n  return <div className=\"ScenarioOutput mt-6\">{elem}</div>;\n}\n\nconst InjectedOutput = inject(({ collectionEditorStore }, { editorId }) => ({\n  editor: collectionEditorStore.getEditor({ id: editorId }),\n}))(observer(Output));\n\nconst ScenarioStepEditor = props => {\n  const { editorId, readOnly, autocompleteScopes, inputProps, outputProps, handleUpdate } = props;\n\n  const standalone = _.get(inputProps, 'standalone');\n  if (standalone) {\n    return (\n      <div className=\"ScenarioStep\">\n        <InjectedInput\n          editorId={editorId}\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          inputProps={inputProps}\n          handleUpdate={handleUpdate}\n          standalone\n        />\n\n        <InjectedOutput\n          editorId={editorId}\n          outputProps={outputProps}\n          handleUpdate={handleUpdate}\n          standalone\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"ScenarioStep\">\n      <EditorContentSection id=\"ScenarioStep:basics\">\n        <InjectedBasics {...props} />\n      </EditorContentSection>\n\n      <EditorContentSection id=\"ScenarioStep:input\" title=\"Input\">\n        <InjectedInput\n          editorId={editorId}\n          readOnly={readOnly}\n          autocompleteScopes={autocompleteScopes}\n          inputProps={inputProps}\n          handleUpdate={handleUpdate}\n        />\n      </EditorContentSection>\n\n      <InjectedDebug editorId={editorId} />\n\n      <EditorContentSection id=\"ScenarioStep:output\" title=\"Output\" canToggle={false}>\n        <InjectedOutput editorId={editorId} outputProps={outputProps} handleUpdate={handleUpdate} />\n      </EditorContentSection>\n    </div>\n  );\n};\n\nexport default ScenarioStepEditor;\n","import _ from 'lodash';\nimport { observable } from 'mobx';\nimport { safeStringify } from '@platform/utils/json';\n\nexport const initCollectionEditor = (props, { force } = {}) => {\n  const { id, data } = props;\n\n  const input = data || {\n    method: 'get',\n    url: '',\n  };\n\n  const entity = {\n    _id: id,\n    id,\n    data: {\n      scenarios: {\n        dummy: {\n          steps: [\n            {\n              id,\n              type: 'http',\n              input,\n            },\n          ],\n        },\n      },\n    },\n  };\n\n  const editor = getCollectionEditor(props);\n  // only init the editor if its new or the original data has changed\n  if (editor.id) {\n    const entityString = safeStringify(entity.data);\n    if (editor.original === entityString) {\n      return;\n    }\n  }\n\n  props.collectionEditorStore.initEditor(\n    {\n      entityType: 'collections',\n      editPath: `#/scenarios/dummy/steps/0`,\n      embedded: true,\n      entity,\n      stepPathParams: observable.map({ 'dummy-0': _.get(input, 'stepPathParams', {}) }),\n    },\n    { force: true }\n  );\n};\n\nexport const getCollectionEditor = props => {\n  const { id, collectionEditorStore } = props;\n\n  return (\n    collectionEditorStore.getEditor({\n      id,\n    }) || {}\n  );\n};\n\nexport const stopStep = props => {\n  const editor = getCollectionEditor(props);\n  if (editor && editor.stopStep) {\n    editor.stopStep();\n  }\n};\n\nexport const runStep = props => {\n  const editor = getCollectionEditor(props);\n  if (editor && editor.runStep) {\n    editor.runStep();\n  }\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\nimport { Button } from 'semantic-ui-react';\nimport ScenarioStep from '@platform/components/ScenarioEditor/step';\n\nimport { initCollectionEditor, getCollectionEditor, stopStep, runStep } from './common';\n\nclass HttpBlock extends React.Component {\n  componentWillMount() {\n    initCollectionEditor(this.props);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // init if its the first time, or we're re-painting for the current id\n    // the repaint happens because dereference process is delayed\n    if (!getCollectionEditor(nextProps).id || nextProps.id === this.props.id) {\n      initCollectionEditor(nextProps);\n    }\n  }\n\n  render = () => {\n    const { id, WrapperFactory, config = {}, block, data = {} } = this.props;\n\n    const currentRunning = !_.isEmpty(getCollectionEditor(this.props).currentRunning);\n\n    const codegen = _.get(block, ['config', 'codegen']);\n\n    const contentElem = (\n      <ScenarioStep\n        editorId={id}\n        inputProps={{\n          type: 'http',\n          standalone: true,\n          config: config,\n          tabWhitelist: _.compact([\n            'settings',\n            !_.isEmpty(data.headers) && 'headers',\n            !_.isEmpty(data.query) && 'query',\n            !_.isEmpty(data.body) && 'body',\n            !_.isEmpty(data.auth) && 'auth',\n            'code-generation',\n          ]),\n          endpoints: data.endpoints,\n          headerElems: [\n            {\n              render: () => {\n                let buttonProps = {};\n\n                if (currentRunning) {\n                  buttonProps = {\n                    icon: 'stop',\n                    content: 'Stop',\n                    onClick: () => {\n                      stopStep(this.props);\n                    },\n                    negative: true,\n                  };\n                } else {\n                  buttonProps = {\n                    icon: 'play',\n                    content: 'Send',\n                    onClick: () => {\n                      runStep(this.props);\n                    },\n                    secondary: true,\n                  };\n                }\n\n                return <Button {...buttonProps} />;\n              },\n            },\n          ],\n          readOnly: true,\n        }}\n        outputProps={{\n          tabWhitelist: ['body', 'headers', 'request'],\n        }}\n        codegen={codegen}\n      />\n    );\n\n    return <WrapperFactory {...this.props} contentElem={contentElem} />;\n  };\n}\n\nexport default inject(({ collectionEditorStore }) => {\n  return {\n    collectionEditorStore,\n  };\n})(observer(HttpBlock));\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport _ from 'lodash';\n\nimport { Icon } from 'semantic-ui-react';\nimport JsonPathCacheParentContainer from '@platform/components/JsonPathCacheParentContainer';\nimport Accordion from '@platform/components/Accordion';\nimport shortid from '@platform/utils/shortid';\n\nimport BlockList from '../BlockList/viewer';\n\nclass AccordionBlock extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { accordionId: shortid() };\n  }\n\n  renderHeader = () => {\n    const { header = {} } = this.props;\n    const { token, title, subtitle } = header;\n\n    if (!_.isEmpty(token) || !_.isEmpty(title) || !_.isEmpty(subtitle)) {\n      return (\n        <div className=\"pl-2 pr-2 pb-3\">\n          {title ? <div className=\"HubBlock-header-name\">{title}</div> : null}\n          <div className=\"HubBlock-header-title flex items-center\">\n            {subtitle ? <div className=\"HubBlock-header-subtitle\">{subtitle}</div> : null}\n            {token ? <div className=\"HubBlock-header-token  ml-a\">{token}</div> : null}\n          </div>\n        </div>\n      );\n    }\n  };\n\n  renderPanels = () => {\n    const {\n      basePath,\n      blockPath,\n      cache,\n      childCacheIds,\n      data = {},\n      editor,\n      relativePath,\n      updateCache,\n      slugger,\n    } = this.props;\n\n    const { children = [] } = data;\n\n    if (!childCacheIds) {\n      return null;\n    }\n\n    const panels = _.map(children, (child, index) => {\n      return {\n        key: index,\n        defaultOpen: _.get(child, 'config.defaultOpen'),\n        title: () => (\n          <div className=\"flex items-center\">\n            <Icon name=\"dropdown\" />\n            <div>{child.title}</div>\n          </div>\n        ),\n        content: _.isEmpty(child.blocks) ? (\n          <div className=\"p-6\">No existing blocks</div>\n        ) : (\n          <BlockList\n            store={editor}\n            blocks={child.blocks}\n            parentPath={_.concat(blockPath, ['data', 'children', index])}\n            basePath={basePath}\n            relativePath={relativePath}\n            cache={cache}\n            updateCache={updateCache}\n            blockProps={{ isNested: true }}\n            slugger={slugger}\n          />\n        ),\n      };\n    });\n\n    return panels;\n  };\n\n  render() {\n    const { WrapperFactory } = this.props;\n    const { accordionId } = this.state;\n\n    const contentElem = [];\n    contentElem.push(\n      <Accordion\n        key={`Accordion-Viewer-${accordionId}`}\n        id={`Accordion-Viewer-${accordionId}`}\n        fluid\n        exclusive={false}\n        panels={this.renderPanels()}\n      />\n    );\n\n    return (\n      <WrapperFactory {...this.props} headerElem={this.renderHeader()} contentElem={contentElem} />\n    );\n  }\n}\n\nAccordionBlock.displayName = 'HubAccordionBlock';\n\nexport default JsonPathCacheParentContainer({\n  cacheKeyProp: 'cacheKey',\n  basePathProp: 'blockPath',\n  path: ['data', 'children'],\n  childrenProp: 'data.children',\n})(observer(AccordionBlock));\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Message, Icon, Loader } from 'semantic-ui-react';\n\nimport JsonPathCacheContainer from '@platform/components/JsonPathCacheContainer';\nimport ErrorMessage from '@platform/components/ErrorMessage';\n\nimport { registerLogger } from '@platform/utils/logging';\nimport { stringToColor } from '@platform/utils/colors';\nimport { replaceVariables } from '@platform/utils/variables';\n\nimport barList from '../BlockBarList/viewer';\nimport callout from '../BlockCallout/viewer';\nimport cardList from '../BlockCardList/viewer';\nimport code from '../BlockCode/viewer';\nimport hero from '../BlockHero/viewer';\nimport html from '../BlockHtml/viewer';\nimport image from '../BlockImage/viewer';\nimport jsonSchema from '../BlockJsonSchema/viewer';\nimport ref from '../BlockRef/viewer';\nimport tabs from '../BlockTabs/viewer';\nimport container from '../BlockContainer/viewer';\nimport text from '../BlockText/viewer';\nimport http from '../BlockHttp/viewer';\nimport accordion from '../BlockAccordion/viewer';\nimport { buildBlockClassNames } from '../../utils';\nimport { blockConfig } from '../../utils/viewer';\n\nconst log = registerLogger('components', 'HubBlock');\n\nconst BlockMap = {\n  barList,\n  callout,\n  cardList,\n  code,\n  hero,\n  html,\n  image,\n  jsonSchema,\n  ref,\n  tabs,\n  container,\n  text,\n  http,\n  accordion,\n};\n\nexport const HubBlockHeader = ({ className, header = {} }) => {\n  const { token, title, subtitle } = header;\n\n  const hasToken = !_.isEmpty(token);\n  const hasTitle = !_.isEmpty(title);\n  const hasSubtitle = !_.isEmpty(subtitle);\n\n  if (!hasToken && !hasTitle && !hasSubtitle) return null;\n\n  let titleElem;\n  if (hasTitle || hasToken) {\n    titleElem = (\n      <div className=\"HubBlock-header-title flex items-center\">\n        {hasTitle && <div className=\"HubBlock-header-name\">{title}</div>}\n        {hasToken && (\n          <div className=\"HubBlock-header-token ml-3\" style={{ color: stringToColor(token) }}>\n            {token}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className={cn('HubBlock-header', className)}>\n      {titleElem}\n      {hasSubtitle && <div className=\"HubBlock-header-subtitle\">{subtitle}</div>}\n    </div>\n  );\n};\n\nconst HubBlockContent = props => {\n  const {\n    className,\n    headerElem,\n    contentClassName,\n    contentProps = {},\n    contentElem,\n    block = {},\n    slugger,\n  } = props;\n\n  let header;\n  // allow for blocks to override the header, can pass null to completely hide header\n  if (headerElem) {\n    header = headerElem;\n  } else if (!_.isEmpty(block.header) && _.isUndefined(headerElem)) {\n    header = <HubBlockHeader header={block.header} />;\n  }\n\n  let anchorElem = null;\n  const anchor = _.toLower(_.get(block, 'header.anchor'));\n\n  if (anchor) {\n    const slug = slugger.slug(anchor);\n\n    anchorElem = (\n      <a href={`#${slug}`} aria-hidden=\"true\" className=\"block-anchor\" name={slug} id={slug}>\n        <Icon name=\"linkify\" />\n      </a>\n    );\n  }\n\n  return (\n    <div className={cn('HubBlock-inner flex-1 w-full', className)}>\n      {anchorElem}\n      {header}\n\n      {contentElem && (\n        <div\n          className={cn('HubBlock-content', contentClassName, { 'has-anchor': !!anchorElem })}\n          {...contentProps}\n        >\n          {contentElem}\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst HubBlockViewer = props => {\n  const {\n    id,\n    blockIndex,\n    blockPath,\n    block = {},\n    blockDereferenced = {},\n    className,\n    isNested,\n    isSolo,\n    isLast,\n    basePath,\n    relativePath,\n    slugger,\n    editor,\n  } = props;\n\n  log.debug('Render', {\n    id,\n    blockIndex,\n    blockPath,\n    basePath,\n    relativePath,\n    block,\n    blockDereferenced,\n  });\n\n  let contentElem;\n\n  const $ref = _.get(block, 'data.$ref');\n  const error = _.get(block, 'data.__error');\n  const RenderedBlock = BlockMap[block.type];\n\n  // TODO ADD page/subpage config so there can be a trickling effect for settings\n  let config = _.cloneDeep(_.get(editor.config, block.type, {}));\n\n  const elemConfig = _.get(block, 'config', {});\n\n  _.merge(config, elemConfig);\n\n  let isPadded;\n\n  if (error) {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full\">\n        <ErrorMessage error={error} />\n      </div>\n    );\n    isPadded = true;\n  } else if ($ref) {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full relative h-32\">\n        <div className=\"absolute pin bg-lighten-500 z-20 opacity-1\">\n          <Loader active />\n        </div>\n      </div>\n    );\n    isPadded = true;\n  } else if (RenderedBlock) {\n    contentElem = (\n      <RenderedBlock\n        {...props}\n        basePath={basePath}\n        relativePath={relativePath}\n        block={block}\n        blockPath={blockPath}\n        header={block.header}\n        config={config}\n        theme={block.theme}\n        data={blockDereferenced.data || block.data}\n        WrapperFactory={HubBlockContent}\n        dereferencedBlock={blockDereferenced}\n        slugger={slugger}\n      />\n    );\n  } else {\n    contentElem = (\n      <div className=\"HubBlock-inner flex-1 w-full\">\n        {block.type} viewer has not been implemented.\n      </div>\n    );\n    isPadded = true;\n  }\n\n  const classNames = buildBlockClassNames({\n    block,\n    config: blockConfig[block.type],\n    classNames: [`HubBlock HubBlock--${block.type} flex is-viewing`, className],\n    isNested,\n    isSolo,\n    isLast,\n  });\n\n  return <div className={cn(classNames, { 'is-padded': isPadded })}>{contentElem}</div>;\n};\n\nexport default JsonPathCacheContainer({\n  cacheKeyProp: 'editor.id',\n  pathProp: 'blockPath',\n})(HubBlockViewer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * This will listen to the scroll event and pass details to the child.\n */\nclass ScrollWraper extends React.Component {\n  static propTypes = {\n    targetId: PropTypes.string,\n    onResize: PropTypes.bool, // also trigger on resize\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      scroll: undefined,\n    };\n  }\n\n  handleScroll = evt => {\n    this.setState({ scroll: evt });\n  };\n\n  componentDidMount = () => {\n    const { targetId, onResize } = this.props;\n    const target = targetId ? document.getElementById(targetId) : window;\n    target && target.addEventListener('scroll', this.handleScroll);\n    target && onResize && target.addEventListener('resize', this.handleScroll);\n  };\n\n  componentWillUnmount = () => {\n    const { targetId, onResize } = this.props;\n    const target = targetId ? document.getElementById(targetId) : window;\n    target && target.removeEventListener('scroll', this.handleScroll);\n    target && onResize && target.removeEventListener('resize', this.handleScroll);\n  };\n\n  render() {\n    const { scroll } = this.state;\n\n    return this.props.render({ scroll });\n  }\n}\n\nexport default ScrollWraper;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Icon, Popup } from 'semantic-ui-react';\nimport { inject, observer } from 'mobx-react';\n\nimport { Link } from '@platform/utils/router';\nimport { isExternalLink } from '@platform/utils/url';\nimport { stringToColor } from '@platform/utils/colors';\n\nconst buildMetaElems = meta => {\n  const metaElems = [];\n\n  if (meta) {\n    for (const i in meta) {\n      const m = meta[i];\n\n      if (m.icon) {\n        metaElems.push(\n          <div key={`m-${m.id || i}`} className={cn('TreeList-metaItem', m.className || 'c-muted')}>\n            <Icon name={m.icon} />\n          </div>\n        );\n      } else {\n        metaElems.push(\n          <div key={`m-${m.id || i}`} className={cn('TreeList-metaItem', m.className || 'c-muted')}>\n            {m.name}\n          </div>\n        );\n      }\n    }\n  }\n\n  return metaElems;\n};\n\nconst buildActionElems = actions => {\n  return _.map(actions, (action = {}, i) => {\n    const { id, href, className, type, icon, loading, onClick, tip } = action;\n\n    let elem;\n\n    const classNames = cn('TreeList-action', className || 'c-muted', ' flex items-center', {\n      [`is-${type}`]: type,\n      'is-loading': loading,\n    });\n\n    if (href) {\n      elem = (\n        <Link key={`a-${id || i}`} className={classNames} to={href}>\n          <div>\n            <Icon name={icon} loading={loading} className=\"TreeList-actionIcon\" />\n          </div>\n        </Link>\n      );\n    } else {\n      elem = (\n        <div key={`a-${id || i}`} className={classNames} onClick={onClick}>\n          <div>\n            <Icon name={icon} loading={loading} className=\"TreeList-actionIcon\" />\n          </div>\n        </div>\n      );\n    }\n\n    if (tip) {\n      elem = <Popup key={`a-${id}`} trigger={elem} content={tip} size=\"tiny\" />;\n    }\n\n    return elem;\n  });\n};\n\nconst Item = ({ item = {}, depth, parentActive, path, currentPath, ItemFactory, isActive }) => {\n  const { name, href, onClick, isMuted, isDivider, meta, actions, icon } = item;\n  const token = item.token || {};\n\n  let contentElem;\n  if (ItemFactory) {\n    contentElem = <ItemFactory index={0} item={item} />;\n  } else {\n    const metaElems = buildMetaElems(meta);\n    const actionElems = buildActionElems(actions);\n    const itemIcon = icon || token.icon;\n\n    let tokenElem;\n\n    if (token.name) {\n      tokenElem = (\n        <div className=\"TreeList-itemToken  flex items-center justify-center\">\n          <div\n            style={{ color: stringToColor(_.toLower(token.name)) }}\n            className={cn(\n              'SortableTree-itemToken-inner',\n              token.className || `token--${token.name}`,\n              'flex items-center'\n            )}\n          >\n            {token.name}\n          </div>\n        </div>\n      );\n    }\n\n    contentElem = (\n      <div className=\"flex\" title={name}>\n        {!_.isEmpty(itemIcon) ? (\n          <div className=\"TreeList-itemIcon flex items-center leading-none\">\n            <Icon name={itemIcon} />\n          </div>\n        ) : null}\n\n        <div className=\"SortableTree-itemName flex-1\">{name}</div>\n\n        {tokenElem}\n\n        {!_.isEmpty(metaElems) ? (\n          <div className=\"TreeList-meta  flex items-center\">{metaElems}</div>\n        ) : null}\n\n        {!_.isEmpty(actionElems) ? (\n          <div className=\"TreeList-actions  flex\">{actionElems}</div>\n        ) : null}\n      </div>\n    );\n  }\n\n  const itemHref = typeof href === 'string' ? href : _.get(href, 'pathname');\n\n  const classNames = cn('TreeList-item hover:text-active', item.className, {\n    'text-active': isActive,\n    'is-active': isActive,\n    'is-muted': isMuted,\n    'is-divider': isDivider,\n    'is-link': isExternalLink(itemHref),\n  });\n\n  if (itemHref) {\n    return (\n      <Link\n        to={href}\n        className={classNames}\n        onClick={e => {\n          // if we're clicking on an action, don't navigate\n          const targetClass = _.get(e, 'target.className');\n          if (_.includes(targetClass, 'TreeList-action')) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n          }\n        }}\n      >\n        {contentElem}\n      </Link>\n    );\n  }\n\n  return (\n    <div\n      className={classNames}\n      onClick={e => {\n        if (onClick) onClick(e);\n      }}\n    >\n      {contentElem}\n    </div>\n  );\n};\n\nconst Folder = props => {\n  const {\n    folder,\n    path = [],\n    currentPath = [],\n    depth,\n    parent = {},\n    parentActive,\n    handleToggleFolder,\n    ui,\n    folderOpenIcon,\n    folderClosedIcon,\n    checkIsActive,\n    checkIsChildActive,\n    ...extra\n  } = props;\n\n  let childActive =\n    folder.childActive ||\n    (parentActive &&\n      _.isEqual(path, currentPath.slice(0, path.length)) &&\n      _.has(currentPath, depth + 1));\n\n  if (!childActive && checkIsChildActive) {\n    childActive = checkIsChildActive(folder);\n  }\n\n  let isActive = folder.isActive;\n  if (!isActive && checkIsActive) {\n    isActive = checkIsActive(folder);\n  }\n\n  let isOpen = isActive || childActive || folder.openByDefault;\n\n  const toggledPath = currentPath.concat(path, 'toggled');\n  if (!folder.noToggle && _.has(ui, toggledPath)) {\n    isOpen = _.get(ui, toggledPath);\n  }\n\n  const metaElems = buildMetaElems(folder.meta);\n  const actionElems = buildActionElems(folder.actions);\n\n  const token = _.get(folder, 'token', {});\n\n  const folderIcon = folder.icon || (isOpen ? folderOpenIcon : folderClosedIcon) || 'folder';\n  const iconOnLeft = folderIcon === 'folder';\n\n  const toggleElem = !folder.noToggle ? (\n    <div\n      className={cn('TreeList-folderToggler ', {\n        'opacity-35': !isOpen,\n        'text-right': !iconOnLeft,\n      })}\n      onClick={e => {\n        e.preventDefault();\n        handleToggleFolder(path, !isOpen);\n        return false;\n      }}\n    >\n      <Icon\n        className={cn(folderIcon, {\n          open: isOpen,\n          'mr-3': iconOnLeft,\n        })}\n      />\n    </div>\n  ) : null;\n\n  let folderInner = (\n    <div className=\"flex items-center\">\n      {iconOnLeft && toggleElem}\n\n      <div\n        className={cn('TreeList-folderName flex-1 truncate font-bold', {\n          'select-none': !folder.noToggle,\n          'mb-3 lg:mb-2 text-grey-dark uppercase tracking-wide text-sm lg:text-xs': folder.noToggle,\n        })}\n      >\n        {folder.name}\n      </div>\n\n      {_.get(token, 'name') ? (\n        <div className=\"TreeList-itemToken\" style={{ color: stringToColor(_.toLower(token.name)) }}>\n          {token.name}\n        </div>\n      ) : null}\n\n      {!_.isEmpty(metaElems) ? (\n        <div className=\"TreeList-meta  flex items-center\">{metaElems}</div>\n      ) : null}\n      {!_.isEmpty(actionElems) ? <div className=\"TreeList-actions  flex\">{actionElems}</div> : null}\n\n      {!iconOnLeft && toggleElem}\n    </div>\n  );\n\n  const classNames = cn('TreeList-folderInner hover:text-active', folder.className, {\n    'has-content': folder.hasContent,\n    'has-children': !_.isEmpty(folder.children),\n    'is-active text-active': isActive,\n  });\n\n  if (folder.hasOwnProperty('href')) {\n    folderInner = (\n      <Link\n        className={classNames}\n        to={folder.href}\n        onClick={e => {\n          const targetClass = _.get(e, 'target.className');\n\n          if (_.includes(targetClass, 'action')) {\n            handleToggleFolder(path, true);\n            e.preventDefault();\n          } else if (isActive) {\n            handleToggleFolder(path, !isOpen);\n          } else if (!_.includes(targetClass, 'icon')) {\n            handleToggleFolder(path, true);\n          }\n        }}\n      >\n        {folderInner}\n      </Link>\n    );\n  } else {\n    folderInner = <div className={classNames}>{folderInner}</div>;\n  }\n\n  // if we can't toggle the parent, don't nest the children which makes it seem like we can\n  let depthClass = depth;\n  if (parent.noToggle) {\n    depthClass = Math.max(depthClass - 1, 0);\n  }\n\n  return (\n    <div\n      className={cn('TreeList-folder', `depth--${depthClass}`, {\n        'is-active': isActive,\n        'is-muted': folder.isMuted,\n        'is-divider': folder.isDivider,\n        'child-active': childActive,\n        'no-toggle': folder.noToggle,\n      })}\n    >\n      <div\n        onClick={e => {\n          if (\n            !_.includes(_.get(e, 'target.className'), 'TreeList-action') &&\n            !folder.hasOwnProperty('href') &&\n            !folder.noToggle &&\n            !isActive\n          ) {\n            handleToggleFolder(path, !isOpen);\n          }\n        }}\n      >\n        {folderInner}\n      </div>\n\n      {isOpen ? (\n        <Items\n          items={folder.children}\n          path={path}\n          currentPath={currentPath}\n          depth={depthClass + 1}\n          handleToggleFolder={handleToggleFolder}\n          parentActive={childActive}\n          parent={folder}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n          checkIsActive={checkIsActive}\n          checkIsChildActive={checkIsChildActive}\n          ui={ui}\n          {...extra}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nconst Items = props => {\n  const {\n    items,\n    depth = 0,\n    parentActive,\n    path,\n    ui,\n    handleToggleFolder,\n    ItemFactory,\n    currentPath,\n    parent = {},\n    folderOpenIcon,\n    folderClosedIcon,\n    checkIsActive,\n    checkIsChildActive,\n  } = props;\n\n  let elem;\n  if (!_.isEmpty(items)) {\n    elem = _.map(items, (item, i) => {\n      if (item.children) {\n        return (\n          <Folder\n            key={i}\n            folder={item}\n            depth={depth}\n            parent={parent}\n            path={path.concat([i])}\n            parentActive={parentActive}\n            handleToggleFolder={handleToggleFolder}\n            ui={ui}\n            ItemFactory={ItemFactory}\n            currentPath={currentPath}\n            folderOpenIcon={folderOpenIcon}\n            folderClosedIcon={folderClosedIcon}\n            checkIsActive={checkIsActive}\n            checkIsChildActive={checkIsChildActive}\n          />\n        );\n      }\n\n      let isActive = item.isActive;\n      if (checkIsActive) {\n        isActive = checkIsActive(item);\n      }\n\n      return (\n        <Item\n          key={i}\n          depth={depth}\n          path={path.concat(i)}\n          parentActive={parentActive}\n          item={item}\n          isActive={isActive}\n          ItemFactory={ItemFactory}\n          currentPath={currentPath}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n        />\n      );\n    });\n  } else {\n    elem = (\n      <div key=\"none\" className=\"TreeList-none\">\n        Nothing to show here.\n      </div>\n    );\n  }\n\n  // if we can't toggle the parent, don't nest the children which makes it seem like we can\n  let depthClass = depth;\n  if (parent.noToggle) {\n    depthClass = Math.max(depthClass - 1, 0);\n  }\n\n  return (\n    <div key=\"items\" className={`TreeList-items depth--${depthClass}`}>\n      {elem}\n    </div>\n  );\n};\n\nclass SortableTreeList extends React.Component {\n  handleToggleFolder = (p, toggled) => {\n    const { updateUi, currentPath = [] } = this.props;\n\n    updateUi('set', currentPath.concat(p, 'toggled'), toggled);\n  };\n\n  render() {\n    const {\n      data = {},\n      ui = {},\n      ItemFactory,\n      actions = [],\n      htmlId = 'tree-list',\n      currentPath = [],\n      viewer,\n      inverted,\n      folderOpenIcon,\n      folderClosedIcon,\n      checkIsActive,\n      checkIsChildActive,\n    } = this.props;\n\n    return (\n      <div\n        id={htmlId}\n        className={cn('TreeList', {\n          'TreeList--viewer': viewer,\n          'is-inverted': inverted,\n        })}\n      >\n        {!_.isEmpty(actions) ? <div className=\"TreeList-topActions\">{actions}</div> : null}\n\n        <Items\n          path={[]}\n          currentPath={currentPath}\n          items={data}\n          handleToggleFolder={this.handleToggleFolder}\n          ItemFactory={ItemFactory}\n          ui={ui}\n          folderOpenIcon={folderOpenIcon}\n          folderClosedIcon={folderClosedIcon}\n          checkIsActive={checkIsActive}\n          checkIsChildActive={checkIsChildActive}\n          parentActive\n        />\n      </div>\n    );\n  }\n}\n\nexport default inject(({ appStore }, { id }) => ({\n  ...appStore.injectUi(`sortable-tree-list-${id}`),\n}))(observer(SortableTreeList));\n","import React from 'react';\nimport cn from 'classnames';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\n\nimport scrollWrapper from '@platform/components/ScrollWrapper/hoc';\nimport SortableTreeList from '@platform/components/SortableTreeList';\n\nimport { HubBranding } from '../HubBranding';\n\nclass HubSidebar extends React.Component {\n  renderOverlay = () => {\n    const { ui, updateUi } = this.props;\n\n    return (\n      <div\n        key=\"overlay\"\n        role=\"presentation\"\n        className={cn('HubSidebar-overlay pin fixed sm:block hidden', {\n          'isMobile-open': ui.showSidebar,\n          'isMobile-closed': !ui.showSidebar,\n        })}\n        onClick={() => {\n          updateUi('unset', 'showSidebar');\n        }}\n      />\n    );\n  };\n\n  renderWrapper = ({ sidebarTree }) => {\n    const {\n      store,\n      className = '',\n      folderOpenIcon = 'chevron down',\n      folderClosedIcon = 'chevron right',\n      ui,\n      updateUi,\n      watchScroll,\n    } = this.props;\n\n    const {\n      checkSidebarItemIsActive,\n      checkSidebarChildIsActive,\n      whitelabel,\n      namespace,\n      activePagePath,\n    } = store;\n    const id = activePagePath;\n\n    if (!sidebarTree || _.isEmpty(sidebarTree)) {\n      return null;\n    }\n\n    let navHeight = 0;\n    let height = '100%';\n    let maxHeight = 'auto';\n    let pinned = false;\n\n    if (watchScroll && this.wrapperElem && !ui.showSidebar) {\n      const pageHeader = document.getElementById('HubPageHeader');\n      if (pageHeader) {\n        navHeight = pageHeader.offsetHeight;\n      }\n\n      const rect = this.wrapperElem.getBoundingClientRect();\n      maxHeight = rect.height;\n      height = window.innerHeight - Math.max(rect.top, navHeight);\n      pinned = rect.top <= navHeight;\n    }\n\n    let sidebarStyles = {\n      maxHeight,\n    };\n\n    if (pinned) {\n      sidebarStyles = {\n        ...sidebarStyles,\n        height,\n        position: 'fixed',\n        left: 'auto',\n        bottom: 0,\n      };\n    }\n\n    return (\n      <div\n        key=\"wrapper\"\n        className={cn(\n          'HubSidebar-wrapper print:hidden flex flex-col items-end bg-grey-lightest border-r border-grey-light',\n          className,\n          {\n            'isMobile-open': ui.showSidebar,\n            'isMobile-closed': !ui.showSidebar,\n          }\n        )}\n        onClick={e => {\n          // TODO (MM): Should close sidebar on route change, not with function below. This would work for folders, etc.\n          // trigger based on class name since the sidebar is made up of only nested div\n          // does not trigger on folder selection since there currently isn't a way to see if it contains children\n          const trigger = _.intersection(e.target.classList, [\n            'SortableTree-itemName',\n            'TreeList-item',\n            'TreeList-itemToken',\n            'SortableTree-itemToken-inner',\n          ]).length;\n\n          if (trigger) {\n            updateUi('unset', 'showSidebar');\n          }\n        }}\n        ref={elem => {\n          this.wrapperElem = elem;\n        }}\n      >\n        {pinned && <div role=\"presentation\" className=\"HubSidebar-spacer\" />}\n\n        <div className={cn('HubSidebar flex-1', className)} style={sidebarStyles}>\n          <div className=\"HubSidebar-inner flex flex-col\">\n            <SortableTreeList\n              id={id}\n              data={_.get(sidebarTree, [0, 'treeData'], {})}\n              currentPath={[activePagePath]}\n              folderOpenIcon={folderOpenIcon}\n              folderClosedIcon={folderClosedIcon}\n              checkIsActive={checkSidebarItemIsActive}\n              checkIsChildActive={checkSidebarChildIsActive}\n              viewer\n            />\n          </div>\n        </div>\n\n        {!whitelabel && <HubBranding whitelabel={whitelabel} namespace={namespace} />}\n      </div>\n    );\n  };\n\n  render() {\n    const { store } = this.props;\n\n    const { sidebarTree } = store;\n\n    if (!sidebarTree || _.isEmpty(sidebarTree)) {\n      return null;\n    }\n\n    return [this.renderOverlay(), this.renderWrapper({ sidebarTree })];\n  }\n}\n\nexport default inject(stores => {\n  const { appStore } = stores;\n\n  // Inject HubSidebar so we can control the mobile sidebar\n  return {\n    ...appStore.injectUi(`Hub`),\n  };\n})(scrollWrapper(observer(HubSidebar, { onResize: true })));\n","import React from 'react';\n\nimport ScrollWrapper from './index';\n\nexport default (Component, opts = {}) => {\n  return props => (\n    <ScrollWrapper\n      {...opts}\n      render={(scrollProps = {}) => <Component {...props} {...scrollProps} />}\n    />\n  );\n};\n","import React from 'react';\nimport cn from 'classnames';\n\nconst PageNotFound = props => {\n  const { title, className } = props;\n\n  return (\n    <div className={cn('HubPageNotFound', className)}>\n      <h1 className=\"HubPageNotFound-title\">{title || 'Page Not Found'}</h1>\n    </div>\n  );\n};\n\nexport default PageNotFound;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport GithubSlugger from 'github-slugger';\nimport { inject, observer } from 'mobx-react';\nimport smoothscroll from 'smoothscroll-polyfill';\n\nimport JsonPathCacheContainer from '@platform/components/JsonPathCacheContainer';\nimport PageLoading from '@platform/components/PageLoading';\n\nimport { registerLogger } from '@platform/utils/logging';\n\nimport { buildTextBlockForPage } from '../../utils';\n\nimport Block from '../Block/viewer';\nimport BlockList from '../BlockList/viewer';\nimport PageSidebar from '../PageSidebar/viewer';\nimport PageNotFound from '../PageNotFound';\nimport BreadCrumbs from '../BreadCrumbs';\n\nimport { HubBranding } from '../HubBranding';\n\nconst log = registerLogger('components', 'HubPage');\n\nconst slugger = new GithubSlugger();\n\nif (typeof window !== 'undefined') {\n  smoothscroll.polyfill();\n}\n\nclass HubPage extends React.Component {\n  static propTypes = {\n    store: PropTypes.object.isRequired,\n  };\n\n  componentDidMount() {\n    const { routerStore } = this.props;\n    routerStore.scrollToHash();\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    slugger.reset();\n  }\n\n  componentDidUpdate({ location: lastLocation }) {\n    const { location, routerStore } = this.props;\n\n    if (location.hash && location.hash !== lastLocation.hash) {\n      // scroll to hash\n      routerStore.scrollToHash(location.hash);\n    } else if (\n      this.wrapper &&\n      (location.pathname !== lastLocation.pathname ||\n        _.get(location.query, 'view') !== _.get(lastLocation.query, 'view'))\n    ) {\n      // Backout if polyfill fails\n      if (!this.wrapper.scrollTo) return;\n\n      // Scroll to top if the route has changed\n      this.wrapper.scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }\n  }\n\n  render() {\n    const { store, cache, updateCache } = this.props;\n    const {\n      id,\n      basePath,\n      hasSidebar,\n      crumbs,\n      activePage = {},\n      activeSubpage = {},\n      activeBlocks = [],\n      currentPath,\n      currentParsedPath,\n      currentRelativePath,\n      entityStore = {},\n      whitelabel,\n      namespace,\n    } = store;\n\n    const { isDereferencing } = entityStore;\n\n    let page = activePage.data || {};\n    if (activeSubpage.data) {\n      page = activeSubpage.data || {};\n    }\n\n    log.debug('Render', { page, basePath, currentRelativePath });\n\n    const { $ref } = page.data || {};\n\n    let content;\n    if (_.isEmpty(page.data)) {\n      content = <PageNotFound />;\n    } else if ($ref && isDereferencing) {\n      content = <PageLoading text=\"Building Page\" inverted={false} />;\n    } else if (_.isEmpty(activeBlocks)) {\n      content = (\n        <Block\n          block={buildTextBlockForPage({\n            pagePath: `/${_.trim(_.join(currentPath, '/'), '/')}`,\n            page,\n          })}\n          basePath={basePath}\n          relativePath={currentRelativePath}\n          editor={store}\n          slugger={slugger}\n        />\n      );\n    } else {\n      content = (\n        <BlockList\n          store={store}\n          blocks={activeBlocks}\n          blocksDereferenced={activeBlocks}\n          parentPath={_.concat(currentParsedPath, ['data'])}\n          basePath={basePath}\n          relativePath={currentRelativePath}\n          cache={cache}\n          updateCache={updateCache}\n          slugger={slugger}\n        />\n      );\n    }\n\n    return (\n      <div\n        className={cn('HubMain flex flex-1 relative', {\n          'has-sidebar': hasSidebar,\n        })}\n      >\n        {hasSidebar && <PageSidebar id={id} store={store} />}\n\n        <div\n          className=\"HubPage-wrapper flex-1 bg-white w-full overflow-y-scroll min-h-100\"\n          ref={elem => {\n            this.wrapper = elem;\n          }}\n        >\n          <div className=\"HubPage\">\n            <div className=\"HubPage-inner flex\">\n              <div className=\"HubPage-content flex-1 relative\">\n                {crumbs && crumbs.length > 1 && false && <BreadCrumbs crumbs={crumbs} />}\n                <div className=\"HubPageBody\">{content}</div>\n\n                {!hasSidebar && (\n                  <div className=\"HubPageFooter absolute pin-x pin-b\">\n                    <HubBranding whitelabel={whitelabel} namespace={namespace} centered />\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst container = JsonPathCacheContainer({\n  cacheKeyProp: 'store.id',\n  pathProp: 'store.currentParsedPath',\n  pure: false,\n})(observer(HubPage));\n\nexport default inject((stores, props) => {\n  const { routerStore } = stores;\n\n  return {\n    location: routerStore.location, // pass location in directly for componentDidUpdate comparison\n    routerStore,\n  };\n})(container);\n","import React from 'react';\nimport _ from 'lodash';\nimport Cookies from 'js-cookie';\nimport { inject } from 'mobx-react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport { SiteData, withRouteData } from '@stoplight/react-static';\n\nimport Page from '@platform/format-hubs/components/Page/viewer';\n\nclass HubPage extends React.Component {\n  componentWillMount() {\n    this.store().activate();\n\n    if (this.authRequired()) {\n      window.location.pathname = '/_/login';\n    }\n  }\n\n  componentWillUpdate(nextProps) {\n    const { page } = this.props;\n    const nextPath = _.get(nextProps.page, 'path');\n    const currentPath = _.get(page, 'path');\n\n    if (nextPath !== currentPath) {\n      this.store().deactivate();\n      this.store(nextProps).activate();\n\n      if (this.authRequired()) {\n        window.location.pathname = '/_/login';\n      }\n    }\n  }\n\n  authRequired = () => {\n    // Don't check auth when generating static HTML\n    if (typeof window === 'undefined') return;\n\n    const { isAuthRequired } = this.props;\n    const isLoggedIn = Cookies.get('_session_token');\n\n    return isAuthRequired && !isLoggedIn;\n  };\n\n  store = (props = this.props) => {\n    return this.props.pageStore.lookup(_.get(props.page, 'path'), props);\n  };\n\n  render() {\n    const store = this.store();\n\n    if (!store || this.authRequired()) {\n      // Store will only be null if the page doesn't exist, in which case we are likely redirecting\n      return (\n        <div className=\"flex-1 relative\">\n          <Dimmer active inverted>\n            <Loader content=\"Loading...\" />\n          </Dimmer>\n        </div>\n      );\n    }\n\n    return <Page id={store.id} store={store} />;\n  }\n}\n\nconst InjectedHubPage = inject((stores, props) => {\n  const { routerStore, pageStore } = stores;\n  return {\n    routerStore,\n    pageStore,\n  };\n})(HubPage);\n\nexport default withRouteData(routeData => {\n  return <SiteData {...routeData} component={InjectedHubPage} />;\n});\n","import _ from 'lodash';\n\nimport { getConfigVar } from '@platform/utils/config';\nimport { isExternalLink, cleanSlashes } from '@platform/utils/url';\nimport { routeData } from '@platform/utils/json/routeData';\n\nimport { findFirstSubpagePath } from './viewer';\n\n// This is implemented in the viewer and editor files.\n// All possible options for each block:\n// {\n//   padded: true, // should this block be padded when rendered at the root? this padding is outside the outline (content padding)\n//   paddedInner: true, // should this block have padding inside of its outline (content-inner padding)\n//   outlined: true, // should this block be outlined when rendered at the root? (content border)\n//   standalone: true, // should the block be set apart from it's siblings more than normal?\n//   canvas: true, // should the block be rendered on a background canvas (light grey)\n//   solo: { // solo means this block is being rendered by itself inside of another block\n//     padded: true,\n//     outlined: true,\n//   }\n//   nested: { // nested means this block is being rendered inside of another block\n//     padded: true,\n//     outlined: true,\n//   },\n// }\nexport const blockConfig = {};\n\n// Build up the appropriate classnames to position and outline the content based on\n// the block config properties, and the context with which this block is being\n// rendered (nested, nested by itself, or not nested)\n//\n// Doing it this way makes for more generic css rules, instead of having css rules for every\n// Block--type combo possible.\n//\nexport const buildBlockClassNames = props => {\n  const { block = {}, config: globalConfig, classNames = [], isNested, isSolo, isLast } = props;\n\n  const computedClassNames = _.concat(classNames, _.get(block, 'config.classNames', []));\n\n  if (!globalConfig) {\n    return computedClassNames;\n  }\n\n  const config = Object.assign({}, globalConfig, block.config);\n\n  let isOnCanvas = !isSolo && config.canvas;\n  let isStandalone = config.standalone && !_.get(block, 'config.plain');\n  let isPadded = config.padded && !_.get(block, 'config.plain');\n  let isOutlined = config.outlined;\n  let hasHeader = !_.isEmpty(block.header);\n\n  if (isNested) {\n    if (isSolo) {\n      if (config.solo) {\n        isOnCanvas = _.has(config.solo, 'canvas') ? config.solo.canvas : isOnCanvas;\n        isPadded = hasHeader\n          ? true\n          : _.has(config.solo, 'padded')\n            ? config.solo.padded && !_.get(block, 'config.plain')\n            : isPadded;\n        isOutlined = _.has(config.solo, 'outlined') ? config.solo.outlined : isOutlined;\n      }\n    } else if (config.nested) {\n      isOnCanvas = _.has(config.nested, 'canvas') ? config.nested.canvas : isOnCanvas;\n      isPadded = _.has(config.nested, 'padded')\n        ? config.nested.padded && !_.get(block, 'config.plain')\n        : isPadded;\n      isOutlined = _.has(config.nested, 'outlined') ? config.nested.outlined : isOutlined;\n    }\n  } else if (isSolo) {\n    if (config.solo) {\n      if (_.has(config.solo, 'padded')) {\n        isPadded = config.solo.padded;\n      }\n    }\n  }\n\n  if (isNested) {\n    computedClassNames.push('is-nested');\n  }\n\n  if (isSolo) {\n    computedClassNames.push('is-solo');\n  }\n\n  if (isLast) {\n    computedClassNames.push('is-last');\n  }\n\n  if (isPadded) {\n    computedClassNames.push('is-padded');\n  } else {\n    computedClassNames.push('is-not-padded');\n  }\n\n  if (config.paddedInner) {\n    computedClassNames.push('is-padded-inner');\n  }\n\n  if (isOutlined) {\n    computedClassNames.push('is-outlined');\n  }\n\n  if (isStandalone) {\n    computedClassNames.push('is-standalone');\n  }\n\n  if (isOnCanvas) {\n    computedClassNames.push('is-on-canvas');\n  }\n\n  return computedClassNames;\n};\n\n// replaces nav sections that normally just have ids with relevant data from the pages they point to\nexport const derefNavItems = (items, parsed, options) => {\n  const { autoNav, basePath = '' } = options || {};\n\n  return _.compact(\n    _.map(items, item => {\n      if (!item) return;\n\n      const navItem = _.pick(item, ['path', 'title', 'image']);\n\n      const page = _.get(parsed, ['pages', navItem.path]);\n      if (!page) {\n        return navItem;\n      }\n\n      if (_.isNil(navItem.title) && page.title) {\n        navItem.title = page.title;\n      }\n\n      if (!navItem.image && page.image) {\n        navItem.image = page.image;\n      }\n\n      const { blocks, children } = page.data || {};\n\n      // try to route to the first subpage\n      if (autoNav && _.isEmpty(blocks) && !_.isEmpty(children)) {\n        const subpagePath = findFirstSubpagePath({\n          subpages: children,\n          basePath: navItem.path,\n        });\n\n        if (subpagePath) {\n          navItem.path = subpagePath;\n        }\n      }\n\n      if (basePath) {\n        navItem.path = cleanSlashes(`/${basePath}/${navItem.path}`);\n      }\n\n      return navItem;\n    })\n  );\n};\n\n// Dereferences Hub Nav items and forces Title & Logo\nexport const derefNav = (hub, options) => {\n  const { header, title, logo } = hub || {};\n  const { nav = {} } = header || {};\n  const { basePath = '' } = options || {};\n\n  const homeNav = {\n    title: title || logo ? title : 'Untitled Hub',\n    path: basePath ? cleanSlashes(`/${basePath}`) : '/',\n  };\n\n  if (logo) {\n    homeNav.image = logo;\n  }\n\n  return {\n    left: [homeNav, ...derefNavItems(nav.left, hub, options)],\n    right: derefNavItems(nav.right, hub, options),\n  };\n};\n\nexport const getUrlPathFromJsonPath = (parsed = {}, path = [], urlPath = '') => {\n  const newPath = `${_.get(parsed, path.concat(['route', 'path']), '')}${urlPath}`;\n\n  if (path.length) {\n    return getUrlPathFromJsonPath(parsed, _.dropRight(path, 1), newPath);\n  }\n\n  return newPath;\n};\n\n/*\n  Gets the inferred subpage type.\n  page: no children\n  group: has children\n  link: has :// in the path = absolute url\n  divider: no blocks & no children & no route\n*/\nexport const getInferredSubpageType = _subpage => {\n  const subpage = _subpage || {};\n  const path = _.get(subpage, 'route.path');\n\n  if (isExternalLink(path)) {\n    return 'link';\n  }\n\n  const { data = {} } = subpage;\n  if (_.isEmpty(data.children)) {\n    return 'page';\n  }\n\n  return 'group';\n};\n\n/*\n  Given a page, will create a simple text block, using the page name as the title and then\n  building up a markdown list of links to immediate children.\n\n  This is used if a user somehow gets to a page that has no blocks - we'll just show them\n  some links.\n*/\nexport const buildTextBlockForPage = ({ basePath = '', pagePath = '', page = {} }) => {\n  const block = {\n    type: 'text',\n    header: {\n      title: page.title,\n    },\n    data: '',\n  };\n\n  _.forOwn(_.get(page, 'data.children', []), child => {\n    const childPath = _.get(child, 'route.path');\n    if (childPath) {\n      const fullPath = `/${_.trimStart(`${basePath}${pagePath}${childPath}`, '/')}`;\n      block.data += `- [${child.title || fullPath}](${fullPath})\\n`;\n    }\n  });\n\n  return block;\n};\n\n/**\n * Takes a hub theme object and returns appropriate theme object.\n */\nconst baseTheme = {\n  styles: {\n    base: {},\n  },\n};\n\nexport const computeTheme = ({ theme = {}, defaultTheme = {} }) => {\n  const computedTheme = {};\n  _.merge(computedTheme, baseTheme, defaultTheme, theme);\n  return computedTheme;\n};\n\nexport const buildPreviewUrl = ({ currentFileHash }) => {\n  const parts = _.split(getConfigVar('SL_PREVIEW_HOST'), '://');\n\n  return `${parts[0]}://${currentFileHash}.${parts[1]}`;\n};\n\nconst searchRules = () => {\n  const computeDescription = data => {\n    let description = _.get(data, ['data', 'blocks', 0, 'data'], '');\n    if (typeof description === 'string') {\n      description = _.truncate(description.replace(/<\\/?[^>]+(>|$)|#|\\*/g, ''), { length: 75 });\n    } else {\n      description = undefined;\n    }\n    return description;\n  };\n\n  return {\n    pages: {\n      recursive({ currentPath = [] }) {\n        return currentPath[0] === 'pages' && _.size(currentPath) <= 3;\n      },\n      matcher({ parentPath = [], key, value }) {\n        return (\n          parentPath[0] === 'pages' && _.size(parentPath) === 1 && _.has(value, ['data', 'blocks'])\n        );\n      },\n      dataFactory({ parentPath, key, value }) {\n        return {\n          category: _.get(value, 'title') || key,\n          name: _.get(value, 'title') || key,\n          description: computeDescription(value),\n        };\n      },\n      searchFactory({ value }) {\n        return {\n          title: _.get(value, 'title', ''),\n          path: _.get(value, ['route', 'path'], ''),\n          blocks: _.get(value, ['data', 'blocks'], ''),\n        };\n      },\n    },\n    subpages: {\n      circular: true,\n      recursive: true,\n      matcher({ parentPath = [], key, value }) {\n        return (\n          _.last(parentPath) === 'children' &&\n          !_.includes(parentPath, 'blocks') &&\n          !_.isEmpty(_.get(value, ['data', 'blocks']))\n        );\n      },\n      dataFactory({ spec, parentPath, key, value }) {\n        let category = _.get(spec, _.slice(parentPath, 0, 2).concat('title')) || parentPath[1];\n        if (_.size(parentPath) >= 5) {\n          category = _.get(spec, _.slice(parentPath, 0, -2).concat('title'));\n        }\n\n        return {\n          category,\n          key,\n          parentPath,\n          name: _.get(value, 'title') || _.get(value, 'route.path'),\n          description: computeDescription(value),\n        };\n      },\n      searchFactory({ value }) {\n        return {\n          title: _.get(value, 'title', ''),\n          path: _.get(value, ['route', 'path'], ''),\n          blocks: _.get(value, ['data', 'blocks'], ''),\n        };\n      },\n    },\n  };\n};\n\nexport const searchResults = ({ data, expression }) => {\n  const rdata = routeData(\n    { data, rules: searchRules() },\n    {\n      flatten: true,\n      limit: 10,\n      search: {\n        query: expression,\n      },\n    }\n  );\n\n  let matched = _.flatMap(rdata, rule => {\n    return rule.matched;\n  });\n\n  matched = _.compact(matched);\n\n  let results = [];\n  _.forEach(matched, (match, index) => {\n    // const category = match.data.category;\n    const path = match.path;\n    const title = _.get(match, 'data.name');\n    const description = _.get(match, 'data.description');\n\n    results.push({\n      key: index,\n      path,\n      title,\n      description,\n    });\n  });\n\n  return results;\n};\n\nexport const buildCrumbs = ({ parsedPath = [], hub = {}, buildPath }) => {\n  let crumbs = [];\n\n  const rootPageJsonPath = _.take(parsedPath, 2);\n  const rootPage = _.get(hub, rootPageJsonPath);\n\n  if (!rootPage) return [];\n\n  crumbs.push({\n    content: rootPage.title,\n    to: buildPath(rootPageJsonPath),\n  });\n\n  // need to turn stringified numbers in path to integers\n  _.forEach(parsedPath, (path, index) => {\n    const intPath = _.parseInt(path);\n\n    if (_.isFinite(intPath)) {\n      const subpageJsonPath = _.take(parsedPath, index).concat(intPath);\n      const subpage = _.get(hub, subpageJsonPath);\n\n      const title = _.get(subpage, 'title');\n\n      crumbs.push({\n        content: title || _.get(subpage, 'route.path', ''),\n        to: buildPath(subpageJsonPath),\n      });\n    }\n  });\n\n  return crumbs;\n};\n\nexport const isHubBuilder = () => {\n  return getConfigVar('APP_NAME') === 'hub-builder';\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { BaseMarkdown } from '@platform/utils/markdown';\n\nimport HtmlViewer from '../HtmlViewer';\n\nconst MarkdownViewer = ({\n  value,\n  className = '',\n  innerClassName = '',\n  style = {},\n  options = {},\n  context = {},\n}) => {\n  // Don't render undefined, null or empty objects\n  if (_.isNil(value) || (typeof value === 'object' && _.isEmpty(value))) return null;\n\n  let markdown = value;\n  if (typeof markdown !== 'string') {\n    // Stringify objects and numbers\n    markdown = JSON.stringify(markdown);\n  }\n\n  // Don't render if empty string\n  if (_.isEmpty(markdown)) return null;\n\n  return (\n    <div className={cn('MarkdownViewer markdown-body', className)} style={style}>\n      <HtmlViewer\n        className={innerClassName}\n        value={BaseMarkdown.render(markdown)}\n        options={Object.assign({ anchors: true }, options)}\n        context={context}\n      />\n    </div>\n  );\n};\n\nexport default MarkdownViewer;\n","import MarkdownIt from 'markdown-it';\nimport MarkdownItVideo from 'markdown-it-video';\nimport MarkdownItTaskCheckbox from 'markdown-it-task-checkbox';\n\nimport { registerLogger } from '../logging';\nconst log = registerLogger('utils', 'markdown');\n\nlog.info('Load');\n\nimport Highlight from '../highlight';\n\nconst escapeTitle = unsafe => {\n  if (typeof unsafe !== 'string') {\n    return '';\n  }\n\n  return escapeHref(unsafe)\n    .replace(/&/g, '&amp;');\n};\n\nconst escapeHref = unsafe => {\n  if (typeof unsafe !== 'string') {\n    return '';\n  }\n\n  return unsafe\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/'/g, '&quot;')\n    .replace(/'/g, '&#039;');\n};\n\nexport const BaseMarkdown = new MarkdownIt({\n  html: true,\n  linkify: false,\n  typographer: true,\n  highlight: (str, lang) => {\n    try {\n      const grammar =\n        lang !== undefined\n          ? Highlight.languages[lang] || Highlight.languages.markup\n          : Highlight.languages.markup;\n      return Highlight.highlight(str, grammar, lang);\n    } catch (e) {\n      log.warn('error highlighting code', str, lang, e);\n      return str;\n    }\n  },\n})\n  .use(MarkdownItVideo)\n  .use(MarkdownItTaskCheckbox, {\n    disabled: true,\n    divWrap: false,\n    divClass: 'checkbox',\n    idPrefix: 'cbx_',\n    ulClass: 'task-list',\n    liClass: 'task-list-item',\n  });\n\n/**\n * LINKS\n *\n * 1. Makes absolute links target=\"_blank\"\n * 2. Supports prefixing with a custom basePath + relativePath\n */\n\nconst defaultLinkRender =\n  BaseMarkdown.renderer.rules.link_open ||\n  function(tokens, idx, options, env, self) {\n    return self.renderToken(tokens, idx, options);\n  };\n\nBaseMarkdown.renderer.rules.link_open = (tokens, idx, options, env, self) => {\n  const { basePath, relativePath, query } = env;\n\n  const link = tokens[idx];\n\n  // Sanitize title if exists\n  const titleIndex = link.attrIndex('title');\n  if (titleIndex >= 0) {\n    link.attrs[titleIndex][1] = escapeTitle(link.attrs[titleIndex][1]);\n  }\n\n  // escape and compute the href\n  let isAbsolute = false;\n  const hrefIndex = link.attrIndex('href');\n  if (hrefIndex >= 0) {\n    let href = escapeHref(link.attrs[hrefIndex][1]);\n    isAbsolute = href.charAt(0) !== '/' && href.charAt(0) !== '#';\n\n    if (!isAbsolute && basePath && basePath !== '/') {\n      if (href.charAt(0) !== '#') {\n        href = basePath + href;\n      } else {\n        href = basePath + relativePath + href;\n      }\n    }\n    link.attrs[hrefIndex][1] = href;\n  }\n\n  // Add target=_blank to external links\n  if (isAbsolute) {\n    const targetIndex = link.attrIndex('target');\n    if (targetIndex < 0) {\n      link.attrPush(['target', '_blank']); // add new attribute\n    } else {\n      link.attrs[targetIndex][1] = '_blank'; // replace value of existing attr\n    }\n  }\n\n  // pass token to default renderer.\n  tokens[idx] = link;\n  return defaultLinkRender(tokens, idx, options, env, self);\n};\n\n/**\n * No frills renderer.\n *\n * @param {String} src\n */\nexport const InlineRenderer = src => {\n  return BaseMarkdown.renderInline(src);\n};\n\n/**\n * Core markdown renderer that supports all of our custom elements.\n *\n * @param {String} src\n * @param {*} options\n * @param {*} env\n */\nexport const Renderer = (src, options = {}, env = {}) => {\n  if (!src) {\n    return null;\n  } else if (typeof src !== 'string') {\n    log.warn('Markdown: you must use a string when rendering markdown.', { src, options, env });\n    return null;\n  }\n\n  try {\n    return BaseMarkdown.renderer.render(\n      BaseMarkdown.parse(src, env),\n      Object.assign(BaseMarkdown.options, options),\n      env\n    );\n  } catch (e) {\n    log.error('error rendering', e, { src, options, env });\n  }\n\n  return null;\n};\n"],"sourceRoot":""}