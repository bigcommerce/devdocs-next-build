{"path":"api-reference/store-management/order-transactions/payment-actions/postrefund","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"jyzzw","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Reference","to":"/api-reference"},{"content":"Management APIs","to":"/api-reference/store-management"},{"content":"Orders v3","to":"/api-reference/store-management/order-transactions"},{"content":"Payment Actions","to":"/api-reference/store-management/order-transactions/payment-actions"},{"content":"Create a Refund","to":"/api-reference/store-management/order-transactions/payment-actions/postrefund"}],"page":{"meta":{"title":"Create a Refund - Payment Actions - Orders v3 - Management APIs - API Reference","url":"/api-reference/store-management/order-transactions/payment-actions/postrefund","description":"Creates a refund.\n\nRequires at least one of the following scopes:\n\nstore_v2_orders\n\nstore_v2_transactions\n\nAuthorization\n\nOAuth Scopes\n\n\n\nHeaders\n\n\n\nExa..."},"title":"Create a Refund","parsedPath":["pages","/api-reference","data","children",2,"data","children",15,"data","children",1,"data","children",3],"rootPagePath":"/api-reference","path":"/api-reference/store-management/order-transactions/payment-actions/postrefund","isSubpage":true,"route":{"path":"/postrefund"},"data":{"blocks":[{"type":"text","data":"Creates a refund.\n\nRequires at least one of the following scopes:\n* `store_v2_orders`\n* `store_v2_transactions`","header":{"title":"/orders/{order_id}/payment_actions/refunds","subtitle":"Create a Refund","token":"post"}},{"type":"text","data":"## Authorization","config":{"classNames":["ApiOperation--securityTitle mt-10 -mb-10"]}},{"type":"accordion","data":{"children":[{"title":"apiKey - X-Auth-Token","blocks":[{"type":"text","data":"### OAuth Scopes\n|  **UI Name** | **Permission** | **Parameter** |\n| --- | --- | --- |\n|  Order Transactions | read and modify `transactions` and `payment_methods` | `store_v2_transactions` |\n|  Order Transactions | read `transactions` and `payment_methods`  | `store_v2_transactions_read_only` |\n|  Orders | read and modify `payment_methods` |`store_v2_orders`|\n|  Orders | read `payment_methods` |`store_v2_orders_read_only`|\n\n### Headers\n\n|Header|Parameter|Description|\n|-|-|-|\n|`X-Auth-Token`|`access_token `|Obtained by creating an API account or installing an app in a BigCommerce control panel.|\n\n### Example\n\n```http\nGET /stores/{$$.env.store_hash}/v3/catalog/summary\nhost: api.bigcommerce.com\nContent-Type: application/json\nX-Auth-Token: {access_token}\n```\n\n* For more information on Authenticating BigCommerce APIs, see: [Authentication](https://developer.bigcommerce.com/api-docs/getting-started/authentication).\n* **Name**: X-Auth-Token\n* **Location**: header"}]}]},"config":{"classNames":["ApiOperation--security"]}},{"type":"text","data":"## Request Parameters","config":{"classNames":["ApiOperation--requestTitle mt-10 -mb-10"]}},{"type":"accordion","data":{"children":[{"title":"1 Path Parameter","blocks":[{"type":"jsonSchema","data":{"type":"object","properties":{"order_id":{"type":"integer","description":"order id","required":true}},"required":["order_id"]},"config":{"hideRoot":true}}]},{"title":"2 Headers","blocks":[{"type":"jsonSchema","data":{"type":"object","properties":{"Accept":{"type":"string","default":"application/json"},"Content-Type":{"type":"string","default":"application/json"}},"required":[]},"config":{"hideRoot":true}}]}]},"config":{"classNames":["ApiOperation--request"]}},{"type":"text","data":"## Request Body","config":{"classNames":["ApiOperation--requestBodyTitle mt-10","-mb-10"]}},{"type":"accordion","data":{"children":[{"title":"4 Examples","blocks":[{"type":"tabs","data":{"children":[{"title":"Quantity","blocks":[{"type":"code","data":"{\n  \"items\": [\n    {\n      \"item_id\": 75,\n      \"item_type\": \"PRODUCT\",\n      \"quantity\": 1\n    }\n  ],\n  \"payments\": [\n    {\n      \"provider_id\": \"storecredit\",\n      \"amount\": 232.75,\n      \"offline\": false\n    }\n  ]\n}"}]},{"title":"Amount","blocks":[{"type":"code","data":"{\n  \"order_id\": 1,\n  \"items\": [\n    {\n      \"item_type\": \"SHIPPING\",\n      \"item_id\": 1,\n      \"amount\": 1.99,\n      \"reason\": \"string\"\n    }\n  ],\n  \"reason\": \"Wrong t-shirt size\",\n  \"payments\": [\n    \"{\\n    \\\"provider_id\\\": \\\"checkout_paypalexpress\\\",\\n    \\\"amount\\\": 9.99,\\n    \\\"offline\\\": true\\n}\"\n  ]\n}"}]},{"title":"Tax Exempt (Order Level)","blocks":[{"type":"code","data":"{\n  \"order_id\": 1234,\n  \"items\": [\n    {\n      \"item_type\": \"ORDER\",\n      \"item_id\": 1234,\n      \"amount\": 1,\n      \"reason\": \"overcharged\"\n    }\n  ],\n  \"payments\": [\n    {\n      \"provider_id\": \"authorizenet\",\n      \"provider_description\": \"Authorize.net\",\n      \"amount\": 1,\n      \"offline\": false\n    }\n  ]\n}"}]},{"title":"Multiple Items","blocks":[{"type":"code","data":"{\n  \"items\": [\n    {\n      \"item_id\": 75,\n      \"item_type\": \"PRODUCT\",\n      \"quantity\": 1\n    },\n    {\n      \"item_id\": 79,\n      \"item_type\": \"SHIPPING\",\n      \"amount\": 10\n    }\n  ],\n  \"tax_adjustment_amount\": 0,\n  \"payments\": [\n    {\n      \"provider_id\": \"storecredit\",\n      \"amount\": 232.75,\n      \"offline\": false\n    }\n  ]\n}"}]}]}}]},{"title":"Schema","config":{"defaultOpen":true},"blocks":[{"type":"jsonSchema","data":{"type":"object","description":"Request body for refund requests.","title":"RefundRequest_Post","properties":{"items":{"title":"ItemsRefund","type":"array","items":{"anyOf":[{"type":"object","title":"Amount Bound Item","description":"Amount Bound Item\n\nType of refund item that capture refunding of items in the order that are of type amount.\n* `SHIPPING`\n* `HANDLING`\n","properties":{"item_type":{"type":"string","enum":["SHIPPING","HANDLING"],"example":"SHIPPING","description":"Type of refund."},"item_id":{"type":"integer","example":1,"description":"Order address ID."},"amount":{"type":"number","format":"float","description":"A non-negative 2 decimal place rounded value that represents the amount that can be charged/refunded via payment providers.","example":1.99,"title":"Amount"},"reason":{"type":"string","minLength":0,"maxLength":1000}}},{"type":"object","title":"Quantity Bound Item","description":"Quantity Bound Item\n\nType of refund item that capture refunding of items in the order that are of type quantity.\n* `PRODUCT`\n* `GIFT_WRAPPING`\n","properties":{"item_type":{"type":"string","enum":["PRODUCT","GIFT_WRAPPING"],"description":"Type of refund."},"item_id":{"type":"integer","example":1,"description":"Order Product ID. "},"quantity":{"type":"integer","example":3},"reason":{"type":"string","description":"Reason for refund","minLength":0,"maxLength":1000}}},{"type":"object","title":"Tax Exempt (Order Level)","description":"Use this to refund a custom value at the order level. When `item_type` is set to `ORDER`, tax is not re-calculated.","properties":{"item_type":{"type":"string","description":"The type of refund. When `item_type` is set to `ORDER`, tax is not re-calculated.","example":"ORDER","enum":["ORDER"]},"amount":{"type":"number","format":"float","description":"A non-negative 2 decimal place rounded value that represents the amount that can be charged/refunded via payment providers.","example":1.99,"title":"Amount"},"reason":{"type":"string","description":"Reason for the refund.","minLength":0,"maxLength":1000}}}]}},"reason":{"type":"string","description":"Reason for refund","example":"Wrong t-shirt size"},"payments":{"type":"array","items":{"type":"object","properties":{"provider_id":{"type":"string","description":"Reference to payment provider","example":"checkout_paypalexpress"},"amount":{"type":"number","description":"Amount refunded via this provider","example":9.99},"offline":{"type":"boolean","description":"Whether the payment was marked as offline or performed through an online payment service.","example":true}},"example":"{\n    \"provider_id\": \"checkout_paypalexpress\",\n    \"amount\": 9.99,\n    \"offline\": true\n}","title":"Payment Request"}}},"required":["items","payments"]},"config":{"hideRoot":false}}]}]},"config":{"classNames":["ApiOperation--requestBody"]}},{"type":"text","data":"## Responses","config":{"classNames":["ApiOperation--responsesTitle mt-10 -mb-14"]}},{"type":"tabs","data":{"children":[{"title":"201","blocks":[{"type":"accordion","data":{"children":[{"title":"1 Example","blocks":[{"type":"tabs","data":{"children":[{"title":"application/json","blocks":[{"type":"code","data":"{\n  \"data\": {\n    \"id\": 1,\n    \"order_id\": 1,\n    \"user_id\": 1,\n    \"created\": \"\",\n    \"reason\": \"\",\n    \"total_amount\": 1.99,\n    \"total_tax\": 1,\n    \"items\": [\n      {\n        \"item_type\": \"HANDLING\",\n        \"item_id\": 1,\n        \"reason\": \"\",\n        \"quantity\": 1,\n        \"requested_amount\": 0.05\n      }\n    ],\n    \"payments\": [\n      {\n        \"id\": 1,\n        \"provider_id\": \"checkout_paypalexpress\",\n        \"amount\": 1.99,\n        \"offline\": true,\n        \"is_declined\": true,\n        \"declined_message\": \"\"\n      }\n    ]\n  },\n  \"meta\": {}\n}"}]}]}}]},{"title":"Schema","config":{"defaultOpen":true},"blocks":[{"type":"jsonSchema","data":{"type":"object","properties":{"data":{"type":"object","title":"Refund","properties":{"id":{"type":"integer","description":"Refund resource ID","readOnly":true},"order_id":{"type":"integer","description":"Reference to order id"},"user_id":{"type":"integer","description":"Reference to the user's id who create this refund. This is automatically populated by BigCommerce.","readOnly":true},"created":{"type":"string","format":"date-time","description":"Timestamp of when this refund was created","readOnly":true},"reason":{"type":"string","description":"Reason for refund"},"total_amount":{"type":"number","format":"float","description":"A non-negative 2 decimal place rounded value that represents the amount that can be charged/refunded via payment providers.","example":1.99,"title":"Amount"},"total_tax":{"type":"number","description":"Total tax amount refunded back to shopper. Note: order_level_amount does not affect tax liability. This can be negative amount indicating we have collected tax by virtue of refunding less to the customer"},"items":{"type":"array","description":"Array of items refunded","minItems":1,"items":{"type":"object","properties":{"item_type":{"type":"string","description":"Type of item that was refunded","enum":["PRODUCT","GIFT_WRAPPING","SHIPPING","HANDLING","ORDER"]},"item_id":{"type":"integer","description":"order_product.id corresponding to the item_types of PRODUCT, GIFT_WRAPPING. order_address.id corresponding to the item_types of SHIPPING, HANDLING. order.id corresponding to the item_type of ORDER."},"reason":{"type":"string","description":"Reason for refunding an item"},"quantity":{"type":"integer","description":"Quantity of item refunded. Note: this will only be populated for item_type PRODUCT"},"requested_amount":{"type":"number","format":"float","description":"A non-negative 2 decimal place rounded value that represents the amount that can be charged/refunded via payment providers.","example":1.99,"title":"Amount"}},"title":"Refund Item"}},"payments":{"type":"array","description":"An array of refund payments made to payment providers","minItems":1,"items":{"type":"object","title":"Refund Payment","properties":{"id":{"type":"integer","description":"Reference to refund payment id","readOnly":true},"provider_id":{"type":"string","description":"Reference to payment provider","example":"storecredit"},"amount":{"type":"number","format":"float","description":"A non-negative 2 decimal place rounded value that represents the amount that can be charged/refunded via payment providers.","example":1.99,"title":"Amount"},"offline":{"type":"boolean","description":"Indicate whether payment was offline"},"is_declined":{"type":"boolean","description":"Indicate if this payment has been declined by payment provider"},"declined_message":{"type":"string","description":"Message indicate why payment was declined"}}}}}},"meta":{"type":"object"}}}}]}]}}]},{"title":"503","blocks":[{"type":"text","data":"Service Unavailable"},{"type":"accordion","data":{"children":[{"title":"1 Example","blocks":[{"type":"tabs","data":{"children":[{"title":"application/json","blocks":[{"type":"code","data":"{\n  \"data\": [\n    {\n      \"order_id\": 1,\n      \"status\": 503,\n      \"error\": \"Tax service gone away\"\n    }\n  ],\n  \"meta\": {}\n}"}]}]}}]},{"title":"Schema","config":{"defaultOpen":true},"blocks":[{"type":"jsonSchema","data":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","description":"Failed quote response.","properties":{"order_id":{"type":"integer"},"status":{"type":"integer","description":"HTTP status code","example":422},"error":{"type":"string","description":"details why the request failed"}},"title":"FailedQuoteError"}},"meta":{"type":"object","title":"Meta","properties":{"meta":{"type":"object","description":"Data about the response, including pagination and collection totals.","title":"Pagination","properties":{"total":{"type":"integer","description":"Total number of items in the result set.\n","example":36},"count":{"type":"integer","description":"Total number of items in the collection response.\n","example":36},"per_page":{"type":"integer","description":"The amount of items returned in the collection per page, controlled by the limit parameter.\n","example":50},"current_page":{"type":"integer","description":"The page you are currently on within the collection.\n","example":1},"total_pages":{"type":"integer","description":"The total number of pages in the collection.\n","example":1},"links":{"type":"object","description":"Pagination links for the previous and next parts of the whole collection.\n","properties":{"previous":{"type":"string","description":"Link to the previous page returned in the response.\n"},"current":{"type":"string","description":"Link to the current page returned in the response.\n","example":"?page=1&limit=50"},"next":{"type":"string","description":"Link to the next page returned in the response.\n"}}}}}}}}}}]}]}}]}]},"config":{"classNames":["ApiOperation--responses"]}},{"type":"text","data":"## Send a Test Request","config":{"classNames":["ApiOperation--tryItOutTitle mt-10 -mb-10"]}},{"type":"http","data":{"method":"post","url":"https://api.bigcommerce.com/stores/{$$.env.store_hash}/v3/orders/{order_id}/payment_actions/refunds","headers":{"Accept":"application/json","Content-Type":"application/json","X-Auth-Token":"{$$.env.X-Auth-Token}"},"stepPathParams":{"order_id":""},"body":"{\n  \"items\": [\n    {\n      \"item_id\": 75,\n      \"item_type\": \"PRODUCT\",\n      \"quantity\": 1\n    }\n  ],\n  \"payments\": [\n    {\n      \"provider_id\": \"storecredit\",\n      \"amount\": 232.75,\n      \"offline\": false\n    }\n  ]\n}"},"config":{"canvas":false,"paddedInner":false,"classNames":["ApiOperation--tryItOut"]}}],"children":[]}}}}
