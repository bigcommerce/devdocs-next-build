{"path":"api-reference/store-management/tokens","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"jyzzw","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Reference","to":"/api-reference"},{"content":"Management APIs","to":"/api-reference/store-management"},{"content":"GraphQL Tokens","to":"/api-reference/store-management/tokens"}],"page":{"meta":{"title":"GraphQL Tokens - Management APIs - API Reference","url":"/api-reference/store-management/tokens","description":"Storefront Token\n\nHost: api.bigcommerce.com/stores/{$$.env.store_hash}/v3\n\nProtocols: https\n\nAccepts: application/json\n\nResponds With: application/json\n..."},"title":"GraphQL Tokens","parsedPath":["pages","/api-reference","data","children",2,"data","children",12],"rootPagePath":"/api-reference","path":"/api-reference/store-management/tokens","isSubpage":true,"route":{"path":"/tokens"},"data":{"blocks":[{"type":"text","data":"# Storefront Token\n\n- __Host:__ api.bigcommerce.com/stores/{$$.env.store_hash}/v3\n- __Protocols:__ `https`\n- __Accepts:__ `application/json`\n- __Responds With:__ `application/json`\n"},{"type":"text","data":"Get and manage tokens used to authenticate cross-origin requests to the [GraphQL Storefront API](https://developer.bigcommerce.com/api-docs/storefront/graphql/graphql-storefront-api-overview).\n\n- [Authentication](#authentication)\n- [API tokens](#api-tokens)\n- [Customer impersonation tokens](#customer-impersonation-tokens)\n- [Revoking tokens](#revoking-tokens)\n- [Additional information](#additional-information)\n\n## Authentication\n\nAuthenticate requests by including an [OAuth](https://developer.bigcommerce.com/api-docs/getting-started/authentication) `access_token` in the request header.\n\n```http\nGET https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/channels\nContent-Type: application/json\nX-Auth-Token: {{ACCESS_TOKEN}}\n```\n\n### [OAuth scopes](https://developer.bigcommerce.com/api-docs/getting-started/authentication/rest-api-authentication#oauth-scopes)\n\n| UI Name                                      | Permission | Parameter                                     |\n|----------------------------------------------|------------|-----------------------------------------------|\n| Storefront API Customer Impersonation Tokens | manage     | `store_storefront_api_customer_impersonation` |\n| Storefront API Tokens                        | manage     | `store_storefront_api`                        |\n\n## [API tokens](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/createtoken)\n\nGenerate tokens (JWT) for authenticating cross-origin requests to the [GraphQL Storefront API](https://developer.bigcommerce.com/api-docs/storefront/graphql/graphql-storefront-api-overview). To [create a token](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/createtoken), send a `POST` request to `/stores/{{STORE_HASH}}/v3/storefront/api-token`.\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/storefront/api-token\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"channel_id\": 1,\n  \"expires_at\": 1602288000,\n  \"allowed_cors_origins\": \n    [\"https://store.example.com\"]\n  \n}\n```\n\n|Property|Type|Description|\n|-|-|-|\n|`channel_id`|int| Must be a valid channel ID on the store (required) |\n|`expires_at`|int| Unix timestamp (required) |\n|`allowed_cors_origins`|array[str]| Allowed origins for cross origin requests (required) |\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/createtoken#requestrunner)\n\n\n\n[**Response:**](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/createtoken#responses)\n\n```json\n{\n  \"token\":\"...eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9...\",\n  \"meta\": {\n    // ...\n  }\n}\n```\n\n\n\n## [Customer impersonation tokens](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/customer-impersonation-token/createtokenwithcustomerimpersonation)\n\nGenerate tokens for use in server-to-server requests to the [GraphQL Storefront API](https://developer.bigcommerce.com/api-docs/storefront/graphql/graphql-storefront-api-overview#customer-impersonation-tokens). To [create a customer impersonation token](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/customer-impersonation-token/createtokenwithcustomerimpersonation), send a `POST` request to `/v3/storefront/api-token-customer-impersonation`.\n\n```http\nPOST https://api.bigcommerce.com/stores/{STORE_HASH}/v3/storefront/api-token-customer-impersonation\nx-Auth-Token: {{ACCESS_TOKEN}}\n```\n\n[**Response:**](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/customer-impersonation-token/createtokenwithcustomerimpersonation#responses)\n\n```json\n{\n  \"data\":\n  {\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\"\n  }\n  \"meta\": {}\n}\n```\n\nCustomer impersonation token authenticated requests made to the GraphQL API receive store information from the perspective of the customer with the ID specified in the `X-Bc-Customer-Id` header sent with the GraphQL `POST` request. Pricing, product availability, customer account, and customer details will be reflected. Consider this sample request using a [customer impersonation token](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/customer-impersonation-token/createtokenwithcustomerimpersonation) to run a request in the context of customer ID `123`.\n\n```http\nPOST https://store.example.com/graphql\nAuthorization: Bearer {{CUSTOMER_IMPERSONATION_TOKEN}}\nX-Bc-Customer-Id: 123\n\n{\n    \"query\": \"query CustomerInformation {\\n  customer {\\n    firstName\\n    lastName\\n    email\\n  }\\n}\"\n}\n```\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--warning\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> * Customer impersonation tokens should **never** be exposed publicly, for example, to JavaScript or HTML. These tokens should not be used for frontend requests.\n> * Unlike normal GraphQL API tokens, they are sensitive and should be treated like secrets, just as you might treat an OAuth token.\n> * Attempts to run requests using these tokens from a web browser will be rejected.\n\n</div>\n</div>\n</div>\n\n## [Revoking tokens](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/revoketoken)\nTo [revoke a token](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-api-token/api-token/revoketoken), send a `DELETE` request to `/v3/storefront/api-token`.\n\n```http\nDELETE /stores/{{STORE_HASH}}/v3/storefront/api-token-customer-impersonation\nhost: api.bigcommerce.com\nx-Auth-Token: {{ACCESS_TOKEN}}\nSf-Api-Token: {{CUSTOMER_ID}}\n```\n\n## Additional information\n\n* [GraphQL API Overview](https://developer.bigcommerce.com/api-docs/storefront/graphql/graphql-storefront-api-overview)"}],"children":[{"title":"API Token","route":{"path":"/api-token"},"data":{"children":[{"title":"Create a Token","route":{"path":"/createtoken"},"config":{"sidebar":{"token":"post"}},"data":{}},{"title":"Revoke a Token","route":{"path":"/revoketoken"},"config":{"sidebar":{"token":"delete"}},"data":{}}]}},{"title":"Customer Impersonation Token","route":{"path":"/customer-impersonation-token"},"data":{"children":[{"title":"Create a Token","route":{"path":"/createtokenwithcustomerimpersonation"},"config":{"sidebar":{"token":"post"}},"data":{}}]}}]}}}}
