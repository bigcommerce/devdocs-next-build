{"path":"api-docs/store-management/settings/contextual-filters","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"Z1Jm3fi","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Management APIs","to":"/api-docs/store-management"},{"content":"Settings","to":"/api-docs/store-management/settings"},{"content":"Contextual Filters","to":"/api-docs/store-management/settings/contextual-filters"}],"page":{"meta":{"title":"Contextual Filters - Settings - Management APIs - API Docs","url":"/api-docs/store-management/settings/contextual-filters","description":"Contextual Filters\n\n\n\nOn this page\n\nView active storefront filters\n\nView available storefront filters\n\nView available category-level filters\n\nView conte..."},"title":"Contextual Filters","parsedPath":["pages","/api-docs","data","children",2,"data","children",9,"data","children",0],"rootPagePath":"/api-docs","path":"/api-docs/store-management/settings/contextual-filters","isSubpage":true,"route":{"path":"/contextual-filters"},"data":{"blocks":[{"type":"text","data":"# Contextual Filters\n\n<div class=\"otp\" id=\"no-index\">\n\n### On this page\n- [View active storefront filters](#view-active-storefront-filters)\n- [View available storefront filters](#view-available-storefront-filters)\n- [View available category-level filters](#view-available-category-level-filters)\n- [View contextual filters](#view-contextual-filters)\n- [Configure contextual filters](#configure-contextual-filters)\n- [Related resources](#related-resources)\n\n</div>\n\nThe [Settings API](https://developer.bigcommerce.com/api-reference/store-management/settings) allows you to manage settings and configurations for BigCommerce-hosted stores and headless storefronts. \n\nYou can use the [Contextual Filters](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts) endpoint of the Settings API to programmatically configure a store's Product Filtering feature, also known as _faceted search_.\nAdditionally, the [Contextual Filters](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts) endpoint enables you to merchandise diverse product catalogs by creating a different faceted search configuration for each channel and product category on a store. With this feature, you can configure the product categories for various product lines with a different set of enabled filters, so that shoppers can filter by the most relevant criteria.\n\nThis article demonstrates how to use [Contextual Filters](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts) to configure filters that appear on a particular category page.\n\n### Limitations\n\n* Currently, the API only supports the default channel with an ID of 1.\n* At this time, you can configure contextual filters for Category pages, but not for Brand or Search Results pages.\n\n###  Prerequisites\n\n* [A BigCommerce store](https://support.bigcommerce.com/s/article/Starting-a-Bigcommerce-Trial).\n* API `access_token` with `information & settings modify` scope.\n* Knowledge of the [Settings API](https://developer.bigcommerce.com/api-reference/store-management/settings).\n* Pro or Enterprise store plan. To upgrade, see [Changing Your Store's Plan](https://support.bigcommerce.com/s/article/How-do-I-upgrade-my-stores-plan).\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> * Your store plan must support Product Filtering to use contextual filters. \n> * Product Filtering is available for Pro and Enterprise plans. To upgrade, see [Changing Your Store's Plan](https://support.bigcommerce.com/s/article/How-do-I-upgrade-my-stores-plan).\n> * Enterprise accounts have the ability to use [custom fields](https://support.bigcommerce.com/s/article/Custom-Fields) as product filters to provide shoppers with additional ways to customize their search. \n\n</div>\n</div>\n</div>\n\n## View active storefront filters\n\nThere are two ways to retrieve your store's currently active storefront filters: \n* Settings API\n* The store's control panel\n\nTo view all configured filters using the API, send a `GET` request to [`/v3/settings/search/filters`](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getenabled).\n\n```http\nGET https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/settings/search/filters\nX-Auth-Token: {{ACCESS_TOKEN}}\nAccept: application/json\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getenabled#requestrunner)\n\nThe response will contain all of the filters currently active on your store. \n\n**Response:**\n\n```json\n{\n   \"data\": [\n       {\n           \"id\": \"Y2F0ZWdvcnk=\",\n           \"display_name\": \"Category\",\n           \"type\": \"category\",\n           \"items_to_show\": 15,\n           \"collapsed_by_default\": false,\n           \"display_product_count\": true,\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"U2l6ZQ==\",\n           \"display_name\": \"Size\",\n           \"type\": \"product\",\n           \"display_product_count\": true,\n           \"collapsed_by_default\": false,\n           \"items_to_show\": 10,\n           \"sort_by\": \"alpha\",\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"cHJpY2U=\",\n           \"display_name\": \"Price\",\n           \"type\": \"price\",\n           \"collapsed_by_default\": false,\n           \"is_enabled\": true\n       }\n       ...\n   ],\n   \"meta\": {}\n}\n```\n\nThe filters returned from completing this `GET` request should match the filters you see in the control panel under **Storefront Filters**. This set of storefront filters is what you currently have configured on your store. \n\nTo access **Storefront Filters** in the control panel, go to **Products** > **Product Filtering**. \n\n![Products Filters](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/contextual-filters-01.png \"Products Filters\")\n\n## View available storefront filters\n\nThe list of available storefront filters is derived from the product information in the catalog. You create new available filters by changing the product information in your catalog, such as adding new [product options](https://support.bigcommerce.com/s/article/Product-Options-v3) or [custom fields](https://support.bigcommerce.com/s/article/Custom-Fields).\n\nTo retrieve all available storefront filters, send a `GET` request to [`/v3/settings/search/filters/available`](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getavailable).\n\n```http\nGET https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/settings/search/filters/available\nX-Auth-Token: {{ACCESS_TOKEN}}\nAccept: application/json\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getavailable#requestrunner)\n\n**Response:**\n\n```json\n{\n    \"data\": [\n        {\n            \"id\": \"Y2F0ZWdvcnk=\",\n            \"type\": \"category\",\n            \"name\": \"Category\",\n            \"product_count\": 7\n        },\n        {\n            \"id\": \"YnJhbmQ=\",\n            \"type\": \"brand\",\n            \"name\": \"Brand\",\n            \"product_count\": 8\n        },\n        ...\n        {\n            \"id\": \"Ym9vbA==\",\n            \"type\": \"other\",\n            \"name\": \"Other\"\n        }\n    ],\n    \"meta\": {}\n}\n```\n\n## View available category-level filters\n\nTo retrieve a list of filters available on a given category, include the `category_id` query parameter in your `GET` request to [`/v3/settings/search/filters/available`](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getavailable). Currently, the Settings API only supports the default `channel_id` of 1.\n\n```http\nGET https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/settings/search/filters/available?channel_id=1&category_id={{CATEGORY_ID}}\nX-Auth-Token: {{ACCESS_TOKEN}}\nAccept: application/json\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getavailable#requestrunner)\n\n**Response:**\n\n```json\n{\n    \"data\": [\n        {\n            \"id\": \"YnJhbmQ=\",\n            \"type\": \"brand\",\n            \"name\": \"Brand\",\n            \"product_count\": 3\n        },\n        {\n            \"id\": \"cmF0aW5n\",\n            \"type\": \"rating\",\n            \"name\": \"Rating\",\n            \"product_count\": 1\n        },\n        {\n            \"id\": \"cHJpY2U=\",\n            \"type\": \"price\",\n            \"name\": \"Price\",\n            \"price_range_min\": 9.95,\n            \"price_range_max\": 225\n        },\n        {\n            \"id\": \"Q29sb3I=\",\n            \"type\": \"product\",\n            \"name\": \"Color\",\n            \"product_count\": 1\n        },\n        {\n            \"id\": \"U2l6ZQ==\",\n            \"type\": \"product\",\n            \"name\": \"Size\",\n            \"product_count\": 1\n        },\n        {\n            \"id\": \"Ym9vbA==\",\n            \"type\": \"other\",\n            \"name\": \"Other\"\n        }\n    ],\n    \"meta\": {}\n}\n```\n\nThe filters returned from completing this `GET` request are the filters available for configuration on the given category. In this example, we have Brand, Rating, Price, Color, Size, and Other filters to pick from when choosing which filters to activate for the Kitchen category. In reality, you will be able to select from more filters.\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> To get a list of your store's categories, send a `GET` request to [`/v3/catalog/categories`](https://developer.bigcommerce.com/api-reference/store-management/catalog/category/getcategories).\n\n</div>\n</div>\n</div>\n\n## View contextual filters\n\nTo see if there are any contextual overrides present on a given category, send a `GET` request to [`/v3/settings/search/filters/contexts`](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts) specifying the `category_id` query parameter.\n\n```http\nGET https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/settings/search/filters/contexts?channel_id=1&category_id={{CATEGORY_ID}}\nX-Auth-Token: {{ACCESS_TOKEN}}\nAccept: application/json\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts#requestrunner)\n\nThe response will contain the category's existing contextual overrides. \n\n**Response:**\n\n```json\n{\n    \"data\": [\n        {\n            \"context\": {\n                \"channel_id\": 1,\n                \"category_id\": 21\n            },\n            \"data\": [\n                {\n                    \"id\": \"U2l6ZQ==\",\n                    \"display_name\": \"Size\",\n                    \"type\": \"product\",\n                    \"display_product_count\": false,\n                    \"collapsed_by_default\": false,\n                    \"items_to_show\": 5,\n                    \"sort_by\": \"alpha\",\n                    \"is_enabled\": false\n                },\n                {\n                    \"id\": \"cHJpY2U=\",\n                    \"display_name\": \"Price\",\n                    \"type\": \"price\",\n                    \"collapsed_by_default\": true,\n                    \"is_enabled\": true\n                },\n                ...\n                {\n                    \"id\": \"Ym9vbA==\",\n                    \"display_name\": \"Other\",\n                    \"type\": \"other\",\n                    \"is_enabled\": true,\n                    \"display_product_count\": true,\n                    \"collapsed_by_default\": true,\n                    \"show_free_shipping_filter\": true,\n                    \"show_is_featured_filter\": true,\n                    \"show_in_stock_filter\": true\n                }\n            ]\n        },\n    ],\n    \"meta\": {}\n}\n```\nThe order and names of returned filters should match the filters listed under **Category Filters** in the control panel. \n\n![Category Filters](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/contextual-filters-02.png \"Category Filters\")\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> The order of the data you send implicitly determines the sort order of the filters on the storefront. You can change the order of the filters on the live site by changing the order of the array's data.\n\n</div>\n</div>\n</div>\n\n## Configure contextual filters\n\nUsing the [Contextual Filters](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/getcontexts) endpoint, you can configure available category-level filters. To test it out, update some of your category's properties such as `display_name`, `display_product_count`, or `collapsed_by_default` and send a `PUT` request to [`/v3/settings/search/filters/contexts`](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/upsertcontexts).\n\n```http\nPUT /stores/{{STORE_HASH}}/v3/settings/search/filters/contexts\nHost: api.bigcommerce.com\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n[\n  {\n    \"data\": [\n       {\n           \"id\": \"U2l6ZQ==\",\n           \"display_name\": \"Kitchen Size\",\n           \"type\": \"product\",\n           \"display_product_count\": false,\n           \"collapsed_by_default\": true,\n           \"items_to_show\": 5,\n           \"sort_by\": \"alpha\",\n           \"is_enabled\": false\n       },\n       {\n           \"id\": \"cHJpY2U=\",\n           \"display_name\": \"Product Price\",\n           \"type\": \"price\",\n           \"collapsed_by_default\": false,\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"cmF0aW5n\",\n           \"display_name\": \"Item Rating\",\n           \"type\": \"rating\",\n           \"collapsed_by_default\": true,\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"YnJhbmQ=\",\n           \"display_name\": \"Brand\",\n           \"type\": \"brand\",\n           \"sort_by\": \"alpha\",\n           \"items_to_show\": 10,\n           \"collapsed_by_default\": false,\n           \"display_product_count\": true,\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"Q29sb3I=\",\n           \"display_name\": \"Color\",\n           \"type\": \"product\",\n           \"display_product_count\": true,\n           \"collapsed_by_default\": false,\n           \"items_to_show\": 10,\n           \"sort_by\": \"alpha\",\n           \"is_enabled\": true\n       },\n       {\n           \"id\": \"Ym9vbA==\",\n           \"display_name\": \"Other\",\n           \"type\": \"other\",\n           \"is_enabled\": true,\n           \"display_product_count\": true,\n           \"collapsed_by_default\": true,\n           \"show_free_shipping_filter\": true,\n           \"show_is_featured_filter\": true,\n           \"show_in_stock_filter\": true\n       }\n    ],\n    \"context\": {\n      \"channel_id\": 1,\n      \"category_id\": 21\n    }\n  }\n]\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/settings/search-filters/upsertcontexts#requestrunner)\n\nRefresh your store and open the category you just updated in the control panel. \n\n![Updated Category Filters](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/contextual-filters-03.png \"Updated Category Filters\")\n\nYou can also view the changes on the storefront. \n\n![Updated Category Filters](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/contextual-filters-04.png \"Updated Category Filters\")\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> * You can add new filters using [custom fields](https://support.bigcommerce.com/s/article/Custom-Fields).\n> * For information on how to manage filters using the control panel, see [Product Filtering](https://support.bigcommerce.com/s/article/Product-Filtering-Settings). \n> * A storefront can display up to 12 filters per page.\n\n</div>\n</div>\n</div> \n\n## Related resources\n\n### Articles\n* [Custom Fields](https://support.bigcommerce.com/s/article/Custom-Fields)\n* [Product Filtering](https://support.bigcommerce.com/s/article/Product-Filtering-Settings)\n\n### Endpoints\n* [Settings API](https://developer.bigcommerce.com/api-reference/store-management/settings)\n* [Get All Categories](https://developer.bigcommerce.com/api-reference/store-management/catalog/category/getcategories)"}],"children":[]}}}}
