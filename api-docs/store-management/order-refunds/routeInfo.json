{"path":"api-docs/store-management/order-refunds","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"Z1Jm3fi","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Management APIs","to":"/api-docs/store-management"},{"content":"Order Refunds","to":"/api-docs/store-management/order-refunds"}],"page":{"meta":{"title":"Order Refunds - Management APIs - API Docs","url":"/api-docs/store-management/order-refunds","description":"Order Refunds\n\n\n\nOn this page\n\nSingle order refund example\n\nCreating refund quotes\n\nCreating a refund\n\nCreating order level refunds\n\nRefunding shipping ..."},"title":"Order Refunds","parsedPath":["pages","/api-docs","data","children",2,"data","children",4],"rootPagePath":"/api-docs","path":"/api-docs/store-management/order-refunds","isSubpage":true,"route":{"path":"/order-refunds"},"data":{"blocks":[{"type":"text","data":"# Order Refunds\n\n<div class=\"otp\" id=\"no-index\">\n\n### On this page\n- [Single order refund example](#single-order-refund-example)\n- [Creating refund quotes](#creating-refund-quotes)\n- [Creating a refund](#creating-a-refund)\n- [Creating order level refunds](#creating-order-level-refunds)\n- [Refunding shipping and handling](#refunding-shipping-and-handling)\n- [Refunding products and gift wrapping](#refunding-products-and-gift-wrapping)\n- [Offline order refunds](#offline-order-refunds)\n- [FAQ](#faq)\n- [Troubleshooting](#troubleshooting)\n- [Related resources](#related-resources)\n\n</div>\n\n[Order V3](https://developer.bigcommerce.com/api-reference/store-management/order-transactions) exposes endpoints for creating refunds against orders with settled payments. These endpoints are useful when building order management or payment integrations as they make embedding refund functionality directly into the application possible without requiring merchants to return to their BigCommerce control panel.\n\nThis article provides an overview of Order's V3 refund capabilities and includes a step-by-step example for creating a [single order refund](#single-order-refund-example).\n\n## Single order refund example\n\nRefunding an order consists of two API requests.\n\n|Request|Operation|Endpoint|Description|\n|-|-|-|-|\n|1|`POST`|[`/v3/orders/{id}/payment_actions/refund_quotes`](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote)|Calculate amounts and get payment methods|\n|2|`POST`|[`/v3/orders/{id}/payment_actions/refund`](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund)|Create the refund|\n\nThe example requests in this article use an order with the following properties:\n* **Products**: Single product priced at `$10.00`\n* **Tax:** `$0.83`\n* **Shipping:** `$10.00`\n\nThe refunded amount will include the shipping, tax, and product cost (a total of `$20.83`). We will [create a refund quote](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote). Then, we will [create a refund](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund) using the information contained in the [create refund quote response](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote#responses).\n\n## Creating refund quotes\n\nA refund quote provides the tax amount, total refund amount, and a list of available payment methods for order refunds.\n\nTo [create a refund quote](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote), send a `POST` request to `/v3/orders/{order_id}/payment_actions/refund_quotes`.\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/orders/{order_id}/payment_actions/refund_quotes\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"items\": [\n    {\n      \"item_type\": \"PRODUCT\",  // Refund a product\n      \"item_id\": 8,            // Order product ID\n      \"quantity\": 1,           // Quantity to refund\n    },\n    {\n      \"item_type\": \"SHIPPING\", // Refund shipping\n      \"item_id\": 9,            // Order address ID\n      \"amount\": 10,            // Amount to refund\n    },\n    {\n      \"item_type\": \"ORDER\",    // Tax-exempt order level refund\n      \"item_id\": 9,            // Order ID\n      \"amount\": 1,             // Amount to refund\n    }\n  ]\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote#requestrunner)\n\n**[Response:](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefundquote#responses)**\n\n```json\n{\n  \"data\": {\n    \"total_refund_amount\": 21.83,\n    \"total_refund_tax_amount\": 0.83,\n    \"rounding\": 0,\n    \"adjustment\": 0,\n    \"is_tax_included\": false,\n    \"order_level_refund_amount\": 0,\n    \"refund_methods\": [\n      [\n        {\n          \"provider_id\": \"braintree\",\n          \"provider_description\": \"Store Credit\",\n          \"amount\": 21.83,\n          \"offline\": false,\n          \"offline_provider\": false,\n          \"offline_reason\": \"\"\n        }\n      ],\n      ...\n    ]\n  },\n  \"meta\": {}\n}\n```\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n> ### Note\n> * To get an `item_id`, make a `GET` request to `v2/orders/{order_id}/products`. The returned `id` value is the `item_id` needed to create a `PRODUCT` refund quote. The returned `order_address_id` value is the `item_id` needed to create a `SHIPPING` refund quote. To read more about using the `v2/orders/{order_id}/products` endpoint, visit [List Order Products](https://developer.bigcommerce.com/api-reference/store-management/orders/order-products/getallorderproducts#requestrunner).\n> * To get a list of orders and their `id`s, make a request to [get all orders](https://developer.bigcommerce.com/api-reference/store-management/orders/orders/getallorders#requestrunner).\n\n</div>\n</div>\n</div>\n\n\n## Creating a refund\n\nUse the `provider_id`, the `amount`, and `items` from the [refund quote](#creating-refund-quotes) to [create a refund](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund).\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/orders/{order_id}/payment_actions/refunds\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"items\": [\n    {\n      \"item_type\": \"PRODUCT\",  // Refund a product\n      \"item_id\": 8,            // Order product ID\n      \"quantity\": 1            // Quantity to refund\n    },\n    {\n      \"item_type\": \"SHIPPING\", // Refund shipping\n      \"item_id\": 9,            // Order address ID\n      \"amount\": 10             // Amount to refund\n    },\n    {\n      \"item_type\": \"ORDER\",   // Tax-exempt order level refund\n      \"item_id\": 123,         // Order ID\n      \"amount\": 1,            // Amount to refund\n    }\n  ],\n  \"payments\": [\n    {\n      \"provider_id\": \"braintree\",\n      \"amount\": 21.83,\n      \"offline\": false\n    }\n  ]\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#requestrunner)\n\n**[Response:](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#responses)**\n\n```json\n{\n  \"data\": {\n    \"id\": 1,\n    \"order_id\": 21,\n    \"user_id\": 0,\n    \"created\": \"\",\n    \"reason\": \"\",\n    \"total_amount\": 20.83,\n    \"total_tax\": 0.83,\n    \"items\": [\n      {\n        \"item_type\": \"PRODUCT\",\n        \"item_id\": 8,\n        \"reason\": \"\",\n        \"quantity\": 1,\n        \"requested_amount\": 10\n      },\n      {\n        \"item_type\": \"SHIPPING\",\n        \"item_id\": 9,\n        \"reason\": \"\",\n        \"requested_amount\": 10\n      }\n    ],\n    \"payments\": [\n      {\n        \"id\": 1,\n        \"provider_id\": \"braintree\",\n        \"amount\": 20.83,\n        \"offline\": false,\n        \"is_declined\": false,\n        \"declined_message\": \"\"\n      }\n    ]\n  },\n  \"meta\": {}\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#requestrunner)\n\n## Creating order level refunds\n\nTo refund a tax-exempt custom amount at the order level, set `item_type` to `ORDER` and specify the `amount` to refund.\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/orders/{order_id}/payment_actions/refunds\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"order_id\": 1234,\n  \"items\": [\n    {\n      \"item_type\": \"ORDER\", // Refund a tax-exempt custom amount\n      \"item_id\": 1234,      // Order ID\n      \"amount\": 1,          // Amount to refund\n    }\n  ],\n  \"payments\": [...]\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#requestrunner)\n\n## Refunding shipping and handling\n\nTo refund shipping or handling, set `item_type` to `SHIPPING` or `HANDLING` and specify the `amount` to refund.\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/orders/{order_id}/payment_actions/refunds\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"order_id\": 1234,\n  \"items\": [\n    {\n      \"item_type\": \"SHIPPING\", // Refund shipping\n      \"item_id\": 456,          // Order address ID\n      \"amount\": 1,             // Amount to refund\n    }\n  ],\n  \"payments\": [...]\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#requestrunner)\n\n## Refunding products and gift wrapping\n\nTo refund a product or gift wrapping, set `item_type` to `PRODUCT` or `GIFT_WRAPPING` and specify the `quantity` to refund.\n\n```http\nPOST https://api.bigcommerce.com/stores/{{STORE_HASH}}/v3/orders/{order_id}/payment_actions/refunds\nX-Auth-Token: {{ACCESS_TOKEN}}\nContent-Type: application/json\nAccept: application/json\n\n{\n  \"order_id\": 1234,\n  \"items\": [\n    {\n      \"item_type\": \"PRODUCT\",       // Refund a product\n      \"item_id\": 1234,              // Order product ID\n      \"quantity\": 1,                // Quantity to refund\n    },\n    {\n      \"item_type\": \"GIFT_WRAPPING\", // Refund gift wrapping\n      \"item_id\": 1234,              // Order product ID\n      \"quantity\": 1,                // Quantity to refund\n    }\n  ],\n  \"payments\": [...]\n}\n```\n\n[![Open in Request Runner](https://storage.googleapis.com/bigcommerce-production-dev-center/images/Open-Request-Runner.svg)](https://developer.bigcommerce.com/api-reference/store-management/order-transactions/order-refunds/postrefund#requestrunner)\n\n## Offline order refunds\n\nPayments collected outside of BigCommerce can be marked as offline when creating a refund. Marking payments as offline is a way to keep track of which portions of an order you refunded. However, no funds were collected. If you did not receive payment using BigCommerce, then the funds can not be refunded directly to the payment source using BigCommerce's refund endpoints.\n\n## FAQ\n\n**Is it possible to create a refund without using an item from the order?**\n\nYes. Set `item_type` to `ORDER` and specify an `amount` to refund. For more information, see [create order level refunds](#creating-order-level-refunds).\n\n**Can I just skip creating the quote and go straight to processing a refund?**\n\nIt is possible to process a refund without creating a quote first. Quotes serve to make sure you are refunding to the correct payment provider in the correct amount.\n\n**Where do I find the `item_id`?**\n\nUse the V2 Orders Endpoint to get the required ID:\n\n  - `PRODUCT` -- Order Product ID\n  - `GIFT_WRAPPING` -- Order Product ID\n  - `SHIPPING` -- Order Address ID\n  - `HANDLING` -- Order Address ID\n  - `ORDER` -- Order ID\n\n**Will this trigger an email to the shopper?**\n\nYes, if you configure the store to send an email when an order status changes to _Refunded_ or _Partially Refunded_.\n\n**How do I get a list of  `provider_id`s?**\n\nThe POST Refund Quote exposes `provider_id`s.\n\n**Will a refunded item be returned to inventory?**\n\nNo, you cannot return items to inventory that you refunded via API. You can either update the inventory directly on the product's page or use the [Control Panel](https://support.bigcommerce.com/s/article/Inventory-Tracking#levels) to change the inventory.\n\n## Troubleshooting\n\n* You must receive payment of the order before you can issue a refund.\n* If you use a payment gateway, it must support refunds. For a list of payment gateways that support refunds through BigCommerce, see the Supported Payment Gateways section in [Processing Refunds](https://support.bigcommerce.com/s/article/Processing-Refunds#payment-gateways).\n* If you use a payment gateway, you must settle payments. Some gateways require a certain amount of time to pass before you can process refunds.\n\n## Related resources\n\n### Articles\n* [Orders Overview](https://developer.bigcommerce.com/api-docs/store-management/orders)\n* [Order Webhook Events](https://developer.bigcommerce.com/api-docs/store-management/webhooks/events#orders)\n\n### Endpoints\n* [Orders V2 Reference](https://developer.bigcommerce.com/api-reference/store-management/orders)\n* [Orders V3 Reference](https://developer.bigcommerce.com/api-reference/store-management/order-transactions)\n"}],"children":[]}}}}
