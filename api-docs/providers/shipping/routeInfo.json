{"path":"api-docs/providers/shipping","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"Z1Jm3fi","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Provider APIs","to":"/api-docs/providers"},{"content":"Shipping Providers","to":"/api-docs/providers/shipping"}],"page":{"meta":{"title":"Shipping Providers - Provider APIs - API Docs","url":"/api-docs/providers/shipping","description":"Shipping Providers\n\n\n\nOn this page\n\nSign-up\n\nBefore development\n\nDeveloping the app\n\nControl Panel installation workflow\n\nValidation credentials\n\nAPI in..."},"title":"Shipping Providers","parsedPath":["pages","/api-docs","data","children",3,"data","children",0],"rootPagePath":"/api-docs","path":"/api-docs/providers/shipping","isSubpage":true,"route":{"path":"/shipping"},"data":{"blocks":[{"type":"text","data":"# Shipping Providers\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this page\r\n\r\n- [Sign-up](#sign-up)\r\n- [Before development](#before-development)\r\n- [Developing the app](#developing-the-app)\r\n- [Control Panel installation workflow](#control-panel-installation-workflow)\r\n- [Validation credentials](#validation-credentials)\r\n- [API installation workflow](#api-installation-workflow)\r\n- [Returning shipping quotes](#returning-shipping-quotes)\r\n- [Including product metatadata in rate requests](#including-product-metatadata-in-rate-requests)\r\n- [Submitting the app](#submitting-the-app)\r\n- [App diagram](#app-diagram)\r\n- [Definitions](#definitions)\r\n- [FAQ](#faq)\r\n- [Related resources](#related-resources)\r\n\r\n</div>\r\n\r\nShipping service providers wishing to offer shipping services and rates to BigCommerce merchants and shoppers can implement BigCommerce Shipping Provider endpoints. Once they implement and accept their service into BigCommerce's shipping Carrier Registry, merchants will have access to enable and configure the service through their BigCommerce control panel. Once enabled on a store, BigCommerce will automatically retrieve the service options and rates using the provider's endpoints and display them to merchants in the store's control panel and to shoppers on the storefront.\r\n\r\nMerchants can also use shipping provider endpoints to retrieve rates from custom shipping tables or an in-house shipping rate calculation service.\r\n\r\nSome use cases for the Shipping Provider API are:\r\n\r\n- A drop-shipper that requires their own rates\r\n- A merchant that already has a shipping table\r\n- Third-party logistics\r\n- Create a combination of in-store pickup and shipping options for shoppers\r\n\r\n### Prerequisites\r\n\r\n* Required [OAuth](/api-docs/getting-started/authentication#authentication_oauth-scopes) scopes: `Information and Settings`\r\n* BigCommerce [single-click app](https://developer.bigcommerce.com/api-docs/apps/guide/types#single-click)\r\n\r\n## Sign-up\r\n\r\nWhen creating your app, add the shipping data to our Carrier Registry, so it returns to shoppers on the front-end.\r\n\r\nTo get your app setup, send an email to\r\n<a href=\"mailto:shippingproviderapi@bigcommerce.com\">shippingproviderapi@bigcommerce.com</a>.\r\n\r\nPlease include:\r\n\r\n- Name\r\n- Partner ID\r\n- App ID (see below)\r\n- Email\r\n- Description of the app\r\n- [Your service URLs](#your-service-urls) \r\n\r\n\r\nTo get your app ID, create an app in [Developer Tools](https://devtools.bigcommerce.com/), and fill out the information on [Step 3 Technical](https://developer.bigcommerce.com/api-docs/apps/guide/publishing#add-technical-information). In the URL, the app will have a unique ID. Send the unique ID in exchange for a carrier ID to test the app.\r\n\r\n![#### App ID](//s3.amazonaws.com/user-content.stoplight.io/6012/1552664114224 \"#### App ID\")\r\n\r\n## Before development\r\n\r\nBigCommerce will send requests to your server to get information back about shipping quotes, credential validation, and configuration.\r\n\r\n### Your service URLs\r\n\r\nSince BigCommerce will be sending requests, you will need to provide BigCommerce with URLs that can accept quote requests and optionally a URL to check and validate connection options during app registration. These can be any valid HTTPS URL using port `443`, for example:\r\n\r\n`https://yourhost.com/rate`\r\n\r\nReplace your host and rate with your own host and path.\r\n\r\n### Routes\r\n\r\nYou should create a URL to provide shipping quotes on your API and check the available shipping rates. The second URL (optional) checks to ensure the merchant’s connection settings are valid. It can perform any checks necessary to do so, such as looking up credentials in your database or calling a downstream service to verify them.\r\n\r\n### Requests and responses\r\n\r\nBigCommerce will send and receive data using JSON. The request for rates will always be formatted using the [Base Rate Request Model](https://developer.bigcommerce.com/api-reference/providers/shipping-provider-api/shipping-provider/requestshippingrates). The response for rates should be formatted using the [Carrier Quote Object](https://developer.bigcommerce.com/api-reference/providers/shipping-provider-api/shipping-provider/requestshippingrates). Format the request to check for merchant app credentials as Check Connection Options request payload, and the response should be formatted using the Check Connection Options response payload.\r\n\r\n### Error handling\r\n\r\nIn the case of errors, include error messages in the response payload under the messages key.\r\n\r\nExample:\r\n\r\n```json\r\n{\r\n  \"valid\": false,\r\n  \"messages\": [\r\n    {\r\n      \"text\": \"Your account ID is invalid\",\r\n      \"type\": \"ERROR\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n## Developing the app\r\n\r\nTo use the Shipping Provider API to provide shipping quotes, shipping providers must build a BigCommerce [single-click app](https://developer.bigcommerce.com/api-docs/apps/guide/types#single-click). \r\n\r\nUsing a BigCommerce app enables shipping providers to promote their solution in the BigCommerce apps marketplace, request merchant authorization of API scopes during app install, and enable configuration of shipping provider settings and/or order fulfilment via an iFrame in the BigCommerce control panel.\r\n\r\nFor more information, see our [Introduction to Building Apps](https://developer.bigcommerce.com/api-docs/apps/guide/intro).\r\n\r\n## Control Panel installation workflow\r\n\r\nDuring the app setup, if you configure the Check Connection Options URL for the carrier, an attempt to connect the carrier via the Shipping Manager UI or the Connect Carrier API causes a request to be made to that URL with the provided options. The resource should respond by indicating if the credentials are valid and explain what is wrong. If you did not configure this URL, this check is not required and the credentials are assumed valid as long as they pass type checks.\r\n\r\nTo validate connection options, send a `POST` request to `http://<yourserver.com>/check_connection_options`:\r\n\r\n```json\r\n{\r\n  \"connection_options\": {\r\n    \"account_id\": \"a1ty\"\r\n  }\r\n}\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n  \"valid\": false,\r\n  \"messages\": [\r\n    {\r\n      \"text\": \"Your account ID is invalid\",\r\n      \"type\": \"ERROR\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme:  -->\r\n\r\n## Validation credentials\r\n\r\n> The step of validating the credentials is optional. It does not change how the app operates. It is best practice to authenticate the user against your database or the downstream provider service.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\nOnce you install the app, it will be made available for configuration by merchants and API users. A merchant can navigate to the Shipping Manager and enable, configure, and disable the carrier for any defined zone.\r\n\r\n## API installation workflow\r\n\r\nTo set up a carrier using the API, first, connect it using the Connect Carrier API. Make a request containing the connection settings required by your carrier. The ID of the carrier is required. The carrier ID will be issued by BigCommerce when your carrier is registered. All connection fields are unique per carrier. If your carrier doesn’t require any connection settings, then this object can be left empty.\r\n\r\n<!--\r\ntitle: \"Sample Request \"\r\nsubtitle: \"POST https://developerserver.com/shipping/carrier/connection\"\r\nlineNumbers: true\r\n-->\r\n\r\nTo create a carrier connection, send a `POST` request. For example:\r\n\r\n```json\r\n{\r\n  \"carrier_id\": \"carrier_33\",\r\n  \"connection\": {\r\n    \"key\": \"userKey\",\r\n    \"account_number\": \"userAccountNumber\"\r\n  }\r\n}\r\n```\r\n\r\n<!--\r\ntitle: \"Sample Request with Empty Object\"\r\nsubtitle: \"POST https://developerserver.com/shipping/carrier/connection\"\r\nlineNumbers: true\r\n-->\r\n\r\n**Example request with empty object**\r\n\r\n```json\r\n{\r\n  \"carrier_id\": \"carrier_33\",\r\n  \"connection\": {}\r\n}\r\n```\r\n\r\nOnce connected, it’s possible to create shipping methods for a connected carrier in any shipping zone. You can query shipping zones using the Shipping Zones resource. For any zone, a request can be made to the Shipping Methods resource using the zone ID from the Shipping Zones resource to create a new method for the connected carrier. You are required to enter the shipping carrier’s ID in the type field.\r\n\r\n<!--\r\ntitle: \"Sample Request\"\r\nsubtitle: \"POST https://api.bigcommerce.com/stores/{store_hash}/v2/shipping/zones/{zone_id}/methods\"\r\nlineNumbers: true\r\n-->\r\n\r\nTo create a shipping method, send a `POST` request. For example:\r\n\r\n`/POST https://api.bigcommerce.com/stores/{store_hash}/v2/shipping/zones/{zone_id}/methods`\r\n\r\n```json\r\n{\r\n  \"name\": \"Example Shipping Carrier\",\r\n  \"type\": \"carrier_33\",\r\n  \"settings\": {\r\n    \"carrier_options\": {\r\n      \"account_id\": \"a1ty\"\r\n    }\r\n  },\r\n  \"enabled\": true\r\n}\r\n```\r\n\r\n<!--\r\ntitle: \"Sample Response\"\r\nsubtitle: \"POST https://api.bigcommerce.com/stores/{store_hash}/v2/shipping/zones/{zone_id}/methods\"\r\nlineNumbers: true\r\n-->\r\n\r\nResponse:\r\n\r\n`/POST https://api.bigcommerce.com/stores/{store_hash}/v2/shipping/zones/{zone_id}/methods`\r\n\r\n```json\r\n{\r\n  \"id\": 24,\r\n  \"name\": \"Per Order Test\",\r\n  \"type\": \"perorder\",\r\n  \"settings\": {\r\n    \"rate\": 8.3\r\n  },\r\n  \"enabled\": true,\r\n  \"handling_fees\": {\r\n    \"fixed_surcharge\": 3\r\n  },\r\n  \"is_fallback\": false\r\n}\r\n```\r\n\r\n## Returning shipping quotes\r\n\r\nWhenever shipping rates are required, BigCommerce checks its internal cache for valid entries. BigCommerce uses valid entries and does not call the shipping carrier. If a valid cache entry does not exist, BigCommerce makes a request to the Quote URL with details of the items to be shipped, the shipping origin, and the shipping destination. If you configured any connection settings or zone settings, include these. The shipping carrier must then respond with zero or more shipping quotes.\r\n\r\n<!--\r\ntitle: \"Sample Request\"\r\nsubtitle: \"POST https://developerserver.com/rate\"\r\nlineNumbers: true\r\n-->\r\n\r\nTo request shipping rates, send a `POST` request. For example:\r\n\r\n`/POST https://developerserver.com/rate`\r\n\r\n```json\r\n{\r\n  \"base_options\": {\r\n    \"origin\": {\r\n      \"street_1\": \"685 MARKET ST\",\r\n      \"street_2\": \"\",\r\n      \"zip\": \"94105\",\r\n      \"city\": \"SAN FRANCISCO\",\r\n      \"state_iso2\": \"CA\",\r\n      \"country_iso2\": \"US\",\r\n      \"address_type\": \"commercial\"\r\n    },\r\n    \"destination\": {\r\n      \"street_1\": \"\",\r\n      \"street_2\": \"\",\r\n      \"zip\": \"94103\",\r\n      \"city\": \"\",\r\n      \"state_iso2\": \"CA\",\r\n      \"country_iso2\": \"US\",\r\n      \"address_type\": \"residential\"\r\n    },\r\n    \"items\": [\r\n      {\r\n        \"sku\": \"SKU-100\",\r\n        \"variant_id\": \"1\",\r\n        \"product_id\": \"1\",\r\n        \"name\": \"Shirt\",\r\n        \"length\": {\r\n          \"units\": \"in\",\r\n          \"value\": 1\r\n        },\r\n        \"width\": {\r\n          \"units\": \"in\",\r\n          \"value\": 1\r\n        },\r\n        \"height\": {\r\n          \"units\": \"in\",\r\n          \"value\": 1\r\n        },\r\n        \"weight\": {\r\n          \"units\": \"oz\",\r\n          \"value\": 1\r\n        },\r\n        \"discounted_price\": {\r\n          \"currency\": \"USD\",\r\n          \"amount\": \"10\"\r\n        },\r\n        \"declared_value\": {\r\n          \"currency\": \"USD\",\r\n          \"amount\": \"10\"\r\n        },\r\n        \"quantity\": 1,\r\n        \"attributes\": []\r\n      }\r\n    ],\r\n    \"customer\": {\r\n      \"customer_groups\": [\r\n        {\r\n          \"customer_group_id\": 5,\r\n          \"customer_group_name\": \"Retail\"\r\n        }\r\n      ],\r\n      \"customer_id\": 6\r\n    },\r\n    \"store_id\": \"ru7t7fv9\",\r\n    \"request_context\": {\r\n      \"reference_values\": [\r\n        {\r\n          \"name\": \"cart_id\",\r\n          \"value\": \"8\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \"connection_options\": {\r\n    \"key\": \"userKey\",\r\n    \"account_number\": \"userAccountNumber\"\r\n  },\r\n  \"zone_options\": {\r\n    \"show_transit_time\": true\r\n  },\r\n  \"rate_options\": []\r\n}\r\n```\r\n\r\n<!--\r\ntitle: \"Sample Response\"\r\nsubtitle: \"POST https://developerserver.com/rate\"\r\nlineNumbers: true\r\n-->\r\n\r\nResponse:\r\n\r\n`POST https://developerserver.com/rate`\r\n\r\n```json\r\n{\r\n  \"quote_id\": \"sample_quote\",\r\n  \"messages\": [],\r\n  \"carrier_quotes\": [\r\n    {\r\n      \"carrier_info\": {\r\n        \"code\": \"usps_pitney_bowes\",\r\n        \"display_name\": \"USPS\"\r\n      },\r\n      \"quotes\": [\r\n        {\r\n          \"code\": \"\",\r\n          \"rate_id\": \"9vcV1JfckPJZW2pjeNXcKP5y\",\r\n          \"display_name\": \"USPS Priority Mail\",\r\n          \"cost\": {\r\n            \"currency\": \"USD\",\r\n            \"amount\": 6.35\r\n          },\r\n          \"transit_time\": {\r\n            \"units\": \"BUSINESS_DAYS\",\r\n            \"duration\": 1\r\n          },\r\n          \"dispatch_date\": \"2018-08-29T00:00:00-05:00\"\r\n        },\r\n        {\r\n          \"code\": \"\",\r\n          \"rate_id\": \"EakTRTvck2XYGVAQw9Mza8WW\",\r\n          \"display_name\": \"USPS Priority Mail Express\",\r\n          \"cost\": {\r\n            \"currency\": \"USD\",\r\n            \"amount\": 22.98\r\n          },\r\n          \"transit_time\": {\r\n            \"units\": \"BUSINESS_DAYS\",\r\n            \"duration\": 1\r\n          },\r\n          \"dispatch_date\": \"2018-08-29T00:00:00-05:00\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"carrier_info\": {\r\n        \"code\": \"fedex\",\r\n        \"display_name\": \"FedEx\"\r\n      },\r\n      \"quotes\": [\r\n        {\r\n          \"code\": \"GND\",\r\n          \"rate_id\": \"JnQ2MPqkAMX9cBsw0jyt551R\",\r\n          \"display_name\": \"FedEx Ground\",\r\n          \"cost\": {\r\n            \"currency\": \"USD\",\r\n            \"amount\": 8.53\r\n          },\r\n          \"transit_time\": {\r\n            \"units\": \"BUSINESS_DAYS\",\r\n            \"duration\": 1\r\n          },\r\n          \"dispatch_date\": \"2018-09-05T11:00:00-05:00\"\r\n        },\r\n        {\r\n          \"code\": \"2DA\",\r\n          \"rate_id\": \"QwygEz9XjZx1bT9rfDZsVxSy\",\r\n          \"display_name\": \"FedEx 2 Day\",\r\n          \"cost\": {\r\n            \"currency\": \"USD\",\r\n            \"amount\": 10.47\r\n          },\r\n          \"transit_time\": {\r\n            \"units\": \"BUSINESS_DAYS\",\r\n            \"duration\": 2\r\n          },\r\n          \"dispatch_date\": \"2018-09-05T11:00:00-05:00\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nWhen you uninstall an app with an associated shipping carrier, you also automatically remove all of the shipping methods and connection info for that carrier from the store. You can no longer make quote requests, and users will no longer see shipping quotes for that carrier.\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n> ### Note\r\n>The response payload will display shipping quotes from lowest to highest price.\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Including product metatadata in rate requests\r\n\r\nBigCommerce passes carrier-specific product metadata to a carrier service in a rate request via product and variant metafields. This product metadata can be useful if your service depends on specific fields that are not existent on BigCommerce products or variants by default.\r\n\r\nTo pass metadata in a rate request, the metafields must meet the following requirements:\r\n\r\n- must be a product or variant metafields (you cannot pass category, brand, and other metafields in rate requests)\r\n- `permission_set` on the metafield must be `read` or `write`\r\n- `namespace` on the metafield must match this format: `shipping_carrier_carrier_id` (example: `shipping_carrier_72`)\r\n\r\nThe carrier registration process described in the [Sign-up Section](https://developer.bigcommerce.com/api-docs/providers/shipping#sign-up) provides the `carrier_id`.\r\n\r\nFor more information on product and variant metafields, see:\r\n\r\n- [API Reference > Store Management > Catalog > Product Metafields](https://developer.bigcommerce.com/api-reference/catalog/catalog-api/product-metafields)\r\n- [API Reference > Store Management > Catalog > Product Variant Metafields](https://developer.bigcommerce.com/api-reference/catalog/catalog-api/product-variants-metafields)\r\n\r\n## Submitting the app\r\n\r\nBefore submitting your app, make sure you have the following information.\r\n\r\n**Single-carrier vs. multi-carrier**\r\n\r\nA single-carrier app will offer one service, such as USPS. A multi-carrier app will offer more than one carrier such as USPS, DHL, and Canada Post.\r\n\r\n**Name and description**\r\n\r\nName and description of the shipping carrier or carriers.\r\n\r\n**Logo**\r\n\r\nA 70x70 pixel logo that represents the shipping carrier app.\r\n\r\n**Configuration fields**\r\n\r\nAny shipping zone-specific or connection-specific fields to be made available to merchants or APIs for configuration. Configuration fields can include which rates to offer, packaging type, or packing method.\r\n\r\nTo submit your app, send an email to <a href=\"mailto:shippingproviderapi@bigcommerce.com\">shippingproviderapi@bigcommerce.com</a>.\r\n\r\n## App diagram\r\n\r\n<!--\r\n    title: #### Carrier Service API\r\n\r\n    data: //s3.amazonaws.com/user-content.stoplight.io/6012/1552664566834\r\n-->\r\n\r\n#### Carrier Service API\r\n\r\n![#### Carrier Service API\r\n](//s3.amazonaws.com/user-content.stoplight.io/6012/1552664566834 \"#### Carrier Service API\r\n\")\r\n\r\nOnly one registered shipping carrier may be associated with an app. This [registered carrier](#shipping_provider-definitions) can provide quotes from multiple downstream carriers if desired. In this case, it will become a multi-carrier aggregator.\r\n\r\n## Definitions\r\n\r\n| Name                            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\r\n| ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n| Configuration Fields            | The fields the merchant will see in the control panel. Merchants can navigate to the Shipping Manager and enable, configure, and disable the carrier for any defined zone. They will also be able to activate the app using the Carrier Connection API. Then use the Shipping Zones API and Shipping Methods API to configure the app from there.                                                                                                                                                                               |\r\n| Quote URL                       | A URL for a resource of the shipping carrier that accepts quote requests and responds with shipping quotes. For more on the Quote URL, see a typical app workflow below.                                                                                                                                                                                                                                                                                                                                                        |\r\n| Single Carrier vs. Multi Carrier | A single carrier app will offer only one shipping provider. A multi carrier app will aggregate multiple shipping carriers in one app.                                                                                                                                                                                                                                                                                                                                                                                           |\r\n| Countries Available             | A list of countries where you can use the shipping carrier. The default behavior is that the carrier is available for every shipping origin. In most cases, this list should be as broad as possible. For example, if your carrier operates worldwide, make it available worldwide. You can limit the countries further than what the shipping carrier has provided. If the service is worldwide, then leave this field blank to specify that it is worldwide. Specifying the use of the shipping carrier is an optional step. |\r\n| Shipping Carrier                | A shipping carrier provides quotes to BigCommerce. If a shipping carrier uses more than one shipping provider, then it becomes a multi carrier aggregator. A carrier includes a name, a description, and a logo.                                                                                                                                                                                                                                                                                                                |\r\n| Multi-Carrier Aggregator        | A shipping solution that provides shipping quotes for multiple carriers.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |\r\n| Check Connection Options URL    | A URL for a shipping carrier resource that accepts check requests containing the connection options provided by a user when enabling the carrier and indicates whether or not those settings are valid. This is an optional step.                                                                                                                                                                                                                                                                                               |\r\n| Shipping Quote                  | An estimation of the cost to ship a set of items from an origin to a destination.                                                                                                                                                                                                                                                                                                                                                                                                                                               |\r\n| Shipping Zone                   | Describes a set of destination addresses and the applicable shipping settings, such as handling fees and available shipping methods.                                                                                                                                                                                                                                                                                                                                                                                            |\r\n| Shipping Origin                 | The location from which goods are shipped. This origin determines which shipping carriers are available for the merchant to configure in the control panel.                                                                                                                                                                                                                                                                                                                                                                     |\r\n\r\n## FAQ\r\n\r\n**Can I publish more than one app at a time?**\r\n\r\nNo, you can only publish one app at a time. The others can be for use as testing or as private apps.\r\n\r\n## Related resources\r\n\r\n### Articles\r\n\r\n- [App Store Approval Requirements](https://developer.bigcommerce.com/api-docs/partner/app-store-approval-requirements)\r\n\r\n### Endpoints\r\n\r\n- [Shipping Providers](/api-reference/store-management/shipping-provider-api)\r\n- [Shipping Zones](/api-reference/store-management/shipping-api/shipping-zones)\r\n- [Shipping Methods](/api-reference/store-management/shipping-api/shipping-method)\r\n- [Shipping Carriers](/api-reference/store-management/shipping-api/shipping-carrier)\r\n\r\n### Webhooks\r\n\r\n- [Webhooks](/api-docs/getting-started/webhooks/webhook-events#webhook-events_shipment)\r\n"}],"children":[]}}}}
