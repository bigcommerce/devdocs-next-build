{"path":"api-docs/storefront/graphql/graphql-storefront-api-overview","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"Z1Jm3fi","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Storefront APIs","to":"/api-docs/storefront"},{"content":"GraphQL","to":"/api-docs/storefront/graphql"},{"content":"Overview","to":"/api-docs/storefront/graphql/graphql-storefront-api-overview"}],"page":{"meta":{"title":"Overview - GraphQL - Storefront APIs - API Docs","url":"/api-docs/storefront/graphql/graphql-storefront-api-overview","description":"GraphQL Storefront API Overview\n\n\n\nOn this page\n\nSee it in action\n\nAccessing the GraphQL Playground\n\nUsing the GraphQL Playground\n\nAuthentication\n\nQuery..."},"title":"Overview","parsedPath":["pages","/api-docs","data","children",1,"data","children",1,"data","children",0],"rootPagePath":"/api-docs","path":"/api-docs/storefront/graphql/graphql-storefront-api-overview","isSubpage":true,"route":{"path":"/graphql-storefront-api-overview"},"data":{"blocks":[{"type":"text","data":"# GraphQL Storefront API Overview\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this page\r\n\r\n- [See it in action](#see-it-in-action)\r\n- [Accessing the GraphQL Playground](#accessing-the-graphql-playground)\r\n- [Using the GraphQL Playground](#using-the-graphql-playground)\r\n- [Authentication](#authentication)\r\n- [Querying within a BigCommerce storefront](#querying-within-a-bigcommerce-storefront)\r\n- [Querying from external systems](#querying-from-external-systems)\r\n- [Pagination](#pagination)\r\n- [Complexity limits](#complexity-limits)\r\n- [Related resources](#related-resources)\r\n\r\n</div>\r\n\r\nBigCommerce's GraphQL Storefront API makes it possible to query storefront data from within a [Stencil](https://developer.bigcommerce.com/stencil-docs/getting-started/about-stencil) theme or remote site. This means information previously only available on the back-end via [Stencil's template logic](https://developer.bigcommerce.com/stencil-docs/reference-docs/global-objects-and-properties) can now be accessed via front-end JavaScript. For example, with the Storefront API, it is possible to do the following:\r\n\r\n* Access product options, variations, and custom fields for any product from any page.\r\n* Request any product's images at any resolution.\r\n* Ask for customer details such as name, email address, and attributes (if logged in).\r\n* Look up objects, such as categories or brands, by URL and fetch their details.\r\n\r\n* Build front-end applications on top of a BigCommerce's [Stencil](https://developer.bigcommerce.com/stencil-docs/getting-started/about-stencil) theme or on a remote site.\r\n\r\n\r\nAdditionally, by leveraging the power of [GraphQL](https://graphql.org/), data for multiple resources can be returned from a single API call, which simplifies integration and increases performance so that developers can focus on building delightful shopper experiences.\r\n\r\nThis article is a general overview of BigCommerce's GraphQL Storefront API; it includes sections on authentication and how to access a store's GraphQL Playground. To see specific examples of how GraphQL can be used to query storefront data, see [GraphQL Storefront API Example Queries](https://developer.bigcommerce.com/api-docs/storefront/graphql/graphql-storefront-api-samples).\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### Note\r\n\r\n> * The GraphQL Storefront API is in early access and is feature-incomplete; it will remain in early access until we reach the minimum amount of functionality necessary to power an end-to-end shopping experience.\r\n> * As new features are added to the API, they will be called out in our [Developer Changelog](https://developer.bigcommerce.com/changelog#labels/storefront-api).\r\n> * BigCommerce legacy Blueprint themes currently do not support the GraphQL API and Playground.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<a id=\"see-it-in-action\" class=\"devdocsAnchor\"></a>\r\n\r\n## See it in action\r\n\r\nTo see the GraphQL Storefront API in action, checkout the [Bootstrap + Vanilla JS Storefront API Example](https://bigcommerce.github.io/storefront-api-examples/html-bootstrap-vanillajs/) hosted on GitHub. This example shows how a static HTML site can be used to render dynamic product information via the GraphQL Storefront API.\r\n\r\nOpen the link and click submit with the sample data in the form. To see the example page with your store's data, [create a Storefront API Token](https://developer.bigcommerce.com/api-reference/storefront/graphql-api-tokens/api-token/createtoken) against your store and paste the token into the example form. Be sure to create a token valid for this origin: `https://bigcommerce.github.io`.\r\n\r\n\r\nFor a full list of examples, see the [Storefront API Examples repo](https://github.com/bigcommerce/storefront-api-examples).\r\n\r\n## Accessing the GraphQL Playground\r\n\r\nTo access the GraphQL Storefront API Playground and documentation, [log into your store](https://login.bigcommerce.com/deep-links/manage) and navigate to **Advanced Settings** > **Storefront API Playground**.\r\n\r\n\r\nThe GraphQL Storefront API Playground will be opened.\r\n\r\n![GraphQL Storefront API Playground](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/graphql-storefront-api-playground.png \"GraphQL Storefront API Playground\")\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: info -->\r\n\r\n### Note\r\n\r\n> * GraphQL Playground is a [GraphQL IDE](https://github.com/andev-software/graphql-ide) built on Electron. For more information, see [GraphQL Playground](https://electronjs.org/apps/graphql-playground) on [electrongjs.org](https://electronjs.org)\r\n> * If the **Storefront API Playground** link is not visible, the store may not be using a Stencil theme. Apply a Stencil theme to use the Storefront GraphQL API.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Using the GraphQL Playground\r\n\r\nTo use the request runner, input queries on the left side and then click the **Play** button. Query results will be displayed on the right side.\r\n\r\n\r\n![GraphQL Playground Query](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/graphql-storefront-api-playground2.png \"GraphQL Playground Query\")\r\n\r\nBelow is a sample query to get you started.\r\n\r\n\r\n```javascript\r\nquery MyFirstQuery {\r\n  site {\r\n    settings {\r\n      storeName\r\n    }\r\n    products {\r\n      edges {\r\n        node {\r\n          name\r\n          sku\r\n          prices {\r\n            retailPrice {\r\n              value\r\n              currencyCode\r\n            }\r\n            price {\r\n              value\r\n              currencyCode\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nTo explore the storefront GraphQL schema, checkout the **Docs** and **Schema** tabs on the right.\r\n\r\n\r\n\r\n![GraphQL Playground Docs](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/graphql-playground-docs.png \"GraphQL Playground Docs\")\r\n\r\n## Authentication\r\n\r\nGraphQL Storefront API requests are authenticated with tokens sent via the HTTP `Authorization` header.\r\n\r\n\r\n```bash\r\ncurl 'https://{bigcommerce_storefront_domain}.com/graphql'\\\r\n  # ...\r\n  -H 'Authorization: Bearer {token}'\\\r\n  # ...\r\n```\r\n\r\n### Creating a token\r\n\r\nJWT tokens for authenticating cross-origin requests to the Storefront API can be created using the [Storefront API Token endpoint](https://developer.bigcommerce.com/api-reference/storefront/graphql-api-tokens/api-token/createtoken).\r\n\r\n**`POST`** `https://api.bigcommerce.com/stores/{store_hash}/v3/storefront/api-token`\r\n\r\n```javascript\r\n{\r\n  \"channel_id\": 1,            // int (must be a valid channel ID on the store)\r\n  \"expires_at\": 1602288000,   // double utc unix timestamp (required)\r\n  \"allowed_cors_origins\": [   // array (accepts 1 origin currently)\r\n    \"https://example.com\"\r\n  ]\r\n}\r\n```\r\n\r\n**Response:**\r\n\r\n```json\r\n{\r\n  \"token\":\"...eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9...\",\r\n  \"meta\": {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\n### Authenticating with an auto-generated Stencil token\r\n\r\nClient code in BigCommerce Stencil themes can be passed a token at render time with the `{{settings.storefront_api.token}}` Handlebars object:\r\n\r\n```js\r\nfetch('/graphql', {\r\n  method: 'POST',\r\n  credentials: 'same-origin',\r\n  headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer {{settings.storefront_api.token}}'\r\n  },\r\n  body: JSON.stringify({ query: `query MyFirstQuery {...}`})\r\n});\r\n```\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n<!-- theme: warning -->\r\n\r\n### Note\r\n> * `1` can be passed in for the `channel_id` for generating tokens for use on the default Stencil storefront.\r\n> * To create a channel for a remote site, see [Create Channel](https://developer.bigcommerce.com/api-reference/cart-checkout/channels-listings-api/channels/createchannel) in the API Reference.\r\n> * `allowed_cors_origins` array accepts only a single origin currently -- one token must be generated for each origin.\r\n> * `/storefront/api-token` endpoint requires the `Manage` `Storefront API Tokens` OAuth Scope.\r\n> * `storefront/api-token-customer-impersonation` endpoint requires the `Manage` `Storefront API Customer Impersonation Tokens` OAuth Scope.\r\n> * The `fetch` request `credentials` property must be set to `same-origin` (even when making request from a Stencil theme).\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n### Customer impersonation tokens\r\n\r\nIt's also possible to generate tokens for use in server-to-server interactions with a trusted consumer by sending a `POST` request to [`/v3/storefront/api-token-customer-impersonation`](https://developer.bigcommerce.com/api-reference/storefront/graphql-api-tokens/customer-impersonation-token/createtokenwithcustomerimpersonation).\r\n\r\n\r\n**`POST`** `https://api.bigcommerce.com/stores/{store_id}/v3/storefront/api-token-customer-impersonation`\r\n\r\n```json\r\n{\r\n  \"channel_id\": 1,\r\n  \"expires_at\": 1602288000\r\n}\r\n```\r\n\r\n**Response**:\r\n\r\n```json\r\n{\r\n  \"data\":\r\n  {\r\n    \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\"\r\n  }\r\n  \"meta\": {}\r\n}\r\n```\r\n\r\nCustomer impersonation token authenticated requests made to the GraphQL API receive store information from the perspective of the customer corresponding to the customer ID specified in the `X-Bc-Customer-Id` header sent with the GraphQL `POST` request. Pricing, product availability, customer account, and customer details will be reflected.\r\n\r\n\r\nCustomer impersonation tokens should **never** be exposed publicly, for example, to JavaScript or HTML. These tokens should not be used for frontend requests.\r\n\r\nUnlike normal GraphQL Storefront API tokens, they are sensitive and should be treated like secrets, just as you might treat an OAuth token for BigCommerce's administrative APIs. Attempts to run requests using these tokens from a web browser will be rejected.\r\n\r\n\r\n\r\nConsider this sample request using a Customer Impersonation token to run a request in the context of customer ID `123`.\r\n\r\n```\r\ncurl 'https://store.com/graphql' -H 'Authorization: Bearer TOKEN_GOES_HERE' -H 'X-Bc-Customer-Id: 123' --data-binary '{\"query\":\"query CustomerInformation {\\n  customer {\\n    firstName\\n    lastName\\n    email\\n  }\\n}\"}'\r\n```\r\n\r\n### Customer login\r\n\r\nIf you're using the Storefront API from a browser, for example, on top of your Stencil storefront, you can use the new Customer Login mutation to log in a customer account with an email address and a password. For server-side integrations, consider a customer impersonation token instead. This will set a session cookie in the browser which will authenticate the customer account on future requests:\r\n\r\n\r\n\r\n```js\r\nmutation Login($email: String!, $pass: String!) {\r\n  login(email: $email, password: $pass) {\r\n    result\r\n  }\r\n}\r\n```\r\n\r\nAs a best practice, you should inject the password using GraphQL query variables. This prevents the password from being exposed in the query itself. In the [GraphQL Playground](https://developer.bigcommerce.com/graphql-playground), you can set the variables for the request.\r\n\r\n![GraphQL Playground Query Variables](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/graphql-overview-01.png \"GraphQL Playground Query Variables\")\r\n\r\n## Querying within a BigCommerce storefront\r\n\r\nGraphQL Storefront API calls can be made directly from within a Stencil theme or from a script in [Storefront > Script Manager](https://support.bigcommerce.com/s/article/Using-Script-Manager).\r\n\r\nHere's an an example request using the  `{{settings.storefront_api.token}}` handlebars object and [`fetch()`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API):\r\n\r\n```js\r\nfetch('/graphql', {\r\n    method: 'POST',\r\n    credentials: 'same-origin',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer {{ settings.storefront_api.token }}'\r\n    },\r\n    body: JSON.stringify({\r\n        query: `\r\n        query MyFirstQuery {\r\n        site {\r\n            settings {\r\n            storeName\r\n            }\r\n            products {\r\n            edges {\r\n                node {\r\n                  name\r\n                  sku\r\n                  prices {\r\n                    retailPrice {\r\n                      value\r\n                      currencyCode\r\n                    }\r\n                    price {\r\n                      value\r\n                      currencyCode\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        `\r\n    }),\r\n})\r\n.then(res => res.json())\r\n.then(json => console.log(json));\r\n```\r\n\r\nIn addition to using `fetch()`, there's a other ways to query the API:\r\n* **Using [Apollo Client](https://www.apollographql.com/docs/react/)** - Apollo is a popular GraphQL client that's easy to use in BigCommerce themes. For a quick example of adding Apollo Client to cornerstone, checkout this [Cornerstone commit](https://github.com/bigcommerce/cornerstone/commit/508feeb1b00d2bb2940771e5e91250a08b6be4d9) on GitHub.\r\n* **Using any GraphQL Client** - GraphQL is a standard with client libraries in many languages, so feel free to explore your options.\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: info -->\r\n\r\n### Note\r\n\r\n> * If pasted directly into a script in [**Storefront** > **Script Manager**](https://support.bigcommerce.com/s/article/Using-Script-Manager), the output from `console.log(json)` will be viewable in the browser's Javascript Console.\r\n> * The above code must be used in a place where the `{{settings.storefront_api.token}}` handlebars variable can be accessed in order to get credentials for the API request.\r\n> * The `fetch` request `credentials` property must be set to `same-origin` (even when making request from a Stencil theme).\r\n> * You can control the number of items retrieved for the nodes that return multiple items. Use the `first` argument to retrieve a specific number of records from a query. The example below returns the first ten products. \r\n \r\n ```js\r\n products(first: 10) \r\n ```\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Querying from external systems\r\n\r\nIf you wish to use the GraphQL Storefront API from an external system, there are a few considerations.\r\n\r\n- Which Channel do you wish to run requests in the context of?\r\n- Are you running requests from a server or a frontend application/browser?\r\n\r\n\r\n- If you are running requests from a frontend application, do you need to show customer-specific information or only anonymous information?\r\n\r\n\r\n- If you are running requests from a server, do you need the ability to impersonate customers?\r\n\r\nAs a best practice, you should create tokens that expire and rotate them regularly before their expiry. However, you are also permitted to create long-lived tokens.\r\n\r\n#### I want to run requests in the context of the store's default channel (Channel ID 1)\r\n\r\nYou have two options for public URLs you can use to run requests:\r\n\r\n\r\n- The store's default storefront URL, e.g. `https://store.com/graphql`\r\n- The store's permanent URL, e.g. `https://store-STOREHASH.mybigcommerce.com/graphql`\r\n\r\n#### I want to run requests from the perspective of another Channel\r\n\r\nYou should use the Channel's Permanent URL of the form `https://store-STOREHASH-CHANNELID.mybigcommerce.com/graphql`.\r\n\r\n\r\nFor example, if your store hash is `abc123` and your channel ID is `456`, the correct URL would be `https://store-abc123-456.mybigcommerce.com/graphql`.\r\n\r\n\r\nNote that you must create your Storefront API Token with the same channel ID, or your request will be rejected.\r\n\r\nIn order for the Channel's Permanent URL to be available, you must [create a Site](https://developer.bigcommerce.com/api-reference/cart-checkout/sites-routes-api/sites/post-site) for the channel.\r\n\r\n#### I want to run requests from a frontend application or browser (e.g. React app), and I only show anonymous information/I do not support logging in as a customer\r\n\r\nUse a normal Storefront API Token. You can use an anonymous `fetch` or `XHR` mode that does not send cookies along with the request. When creating your token, be sure to specify the origin from which your requests will be run in order to whitelist this origin for [CORS.](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)\r\n\r\n\r\n#### I want to run requests from a server and I don't need customer impersonation abilities\r\n\r\nUse normal Storefront API Tokens. According to the [Principle of least privilege](https://en.wikipedia.org/wiki/Principle_of_least_privilege), you should not create a token that has permissions you do not need.\r\n\r\n\r\n#### I want to run requests from a server and I need customer impersonation abilities\r\n\r\nUse a Customer Impersonation Storefront API Token and store it securely on your server like other secrets. When you need to run requests in the context of a particular Customer (for example, if they've logged in to your application), send their BigCommerce Customer ID along with the request as the `X-Bc-Customer-Id` header.\r\n\r\n## Pagination\r\n\r\nThe GraphQL Storefront API follows the [GraphQL Cursor Connections Specification](https://facebook.github.io/relay/graphql/connections.htm) for pagination. If this is your first time working with GraphQL pagination, see [Apollo's Blog Post \"Explaining GraphQL Connections\"](https://blog.apollographql.com/explaining-graphql-connections-c48b7c3d6976) for an accessible introduction. If you've worked with other GraphQL APIs, pagination on BigCommerce should look familiar.\r\n\r\nTo demonstrate, here's a query for a store's first three products (notice `first: 3` passed to `products`):\r\n\r\n```js\r\nquery paginateProducts {\r\n  site {\r\n    products (first: 3) {\r\n      pageInfo {\r\n        startCursor\r\n        endCursor\r\n      }\r\n      edges {\r\n        cursor\r\n        node {\r\n          entityId\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou can run this query against an example storefront using the [GraphQL Playground](https://developer.bigcommerce.com/graphql-playground?tabs=firstThreeProducts).\r\n\r\nThe results will look something like this:\r\n\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"site\": {\r\n      \"products\": {\r\n        \"pageInfo\": {\r\n          \"startCursor\": \"YXJyYXljb25uZWN0aW9uOjA=\",\r\n          \"endCursor\": \"YXJyYXljb25uZWN0aW9uOjI=\"\r\n        },\r\n        \"edges\": [\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjA=\",\r\n            \"node\": {\r\n              \"entityId\": 80,\r\n              \"name\": \"Orbit Terrarium - Large\"\r\n            }\r\n          },\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjE=\",\r\n            \"node\": {\r\n              \"entityId\": 81,\r\n              \"name\": \"Shower Curtain\"\r\n            }\r\n          },\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjI=\",\r\n            \"node\": {\r\n              \"entityId\": 82,\r\n              \"name\": \"Chambray Towel\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNotice the `edge` corresponding to `entityId: 81` has a `cursor` of `YXJyYXljb25uZWN0aW9uOjE=`. We can pass that cursor to the `after` parameter to get the three products after `entityId: 81`:\r\n\r\n```js\r\nquery paginateProducts {\r\n  site {\r\n    products (first: 3, after: \"YXJyYXljb25uZWN0aW9uOjE=\") {\r\n      pageInfo {\r\n        startCursor\r\n        endCursor\r\n      }\r\n      edges {\r\n        cursor\r\n        node {\r\n          entityId\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe results will look something like this (notice the last product `entityId: 82` is now the first product):\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"site\": {\r\n      \"products\": {\r\n        \"pageInfo\": {\r\n          \"startCursor\": \"YXJyYXljb25uZWN0aW9uOjI=\",\r\n          \"endCursor\": \"YXJyYXljb25uZWN0aW9uOjQ=\"\r\n        },\r\n        \"edges\": [\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjI=\",\r\n            \"node\": {\r\n              \"entityId\": 82,\r\n              \"name\": \"Chambray Towel\"\r\n            }\r\n          },\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjM=\",\r\n            \"node\": {\r\n              \"entityId\": 83,\r\n              \"name\": \"Hand & Body Cream\"\r\n            }\r\n          },\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjQ=\",\r\n            \"node\": {\r\n              \"entityId\": 84,\r\n              \"name\": \"Room Spray\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\nThis same approach can be used to *slice* any GraphQL connection and paginate through the *slices* via `startCursor` and `endCursor`. For example, we could get the first thirty brands with the following query:\r\n\r\n```javascript\r\nquery brands {\r\n  site {\r\n    brands (first: 30) {\r\n      pageInfo {\r\n        startCursor\r\n        endCursor\r\n      }\r\n      edges {\r\n        cursor\r\n        node {\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nAnd given the following results:\r\n\r\n```json\r\n{\r\n  \"data\": {\r\n    \"site\": {\r\n      \"brands\": {\r\n        \"pageInfo\": {\r\n          \"startCursor\": \"YXJyYXljb25uZWN0aW9uOjA=\",\r\n          \"endCursor\": \"YXJyYXljb25uZWN0aW9uOjM=\"\r\n        },\r\n        \"edges\": [\r\n          {\r\n            \"cursor\": \"YXJyYXljb25uZWN0aW9uOjA=\",\r\n            \"node\": {\r\n              \"name\": \"Sagaform\"\r\n            }\r\n          },\r\n          ...\r\n        ]\r\n      }\r\n    }\r\n```\r\n\r\n\r\nthe next thirty could be retrieved by making a new query and passing in the `endCursor` from the first page of results:\r\n\r\n```js\r\nquery brands {\r\n  site {\r\n    brands (first: 30, after:\"YXJyYXljb25uZWN0aW9uOjM=\"  {\r\n      pageInfo {\r\n        startCursor\r\n        endCursor\r\n      }\r\n      edges {\r\n        cursor\r\n        node {\r\n          name\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## Complexity limits\r\n\r\nThe GraphQL Storefront API uses an algorithm to calculate a complexity score for queries made against the API. Queries that exceed the complexity score will receive an error response:\r\n\r\n```json\r\n{\r\n  \"error\": {\r\n    \"error\": \"The query is too complex as it has a complexity score of 1223 out of 1000. Please remove some elements and try again\"\r\n  }\r\n}\r\n```\r\n\r\nThe complexity limit error is usually caused by queries for a large quantity of deeply nested objects, for example, this query for first 50 products and their prices, variants, options, and option values.\r\n\r\n```js\r\nquery {\r\n  site {\r\n    products(first:50) {\r\n      edges {\r\n        node {\r\n          name\r\n          prices {\r\n            price {\r\n              value\r\n              currencyCode\r\n            }\r\n            retailPrice {\r\n              value\r\n              currencyCode\r\n            }\r\n          }\r\n          variants {\r\n            edges {\r\n              node {\r\n                entityId\r\n                depth {\r\n                  value\r\n                  unit\r\n                }\r\n                sku\r\n              }\r\n            }\r\n          }\r\n          options {\r\n            edges {\r\n              node {\r\n                displayName\r\n                values {\r\n                  edges {\r\n                    node {\r\n                      label\r\n                      entityId\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe complexity of this query is easily reduced by changing the number of products queried from `first:50` to `first:10`:\r\n\r\n```js\r\nquery {\r\n  site {\r\n    products(first:10) { // <--- reducing quantity requested reduces complexity score\r\n      // ...\r\n```\r\n\r\nIn general, to reduce complexity, reduce the number of objects requested. For example, do the following:\r\n* Limit collections to a smaller page size (for example, `first:10` instead of `first:50`).\r\n\r\n* Reduce the number of items in nested collections.\r\n* Request less fields.\r\n\r\n## Related resources\r\n\r\n### Tools\r\n* [GraphQL Cheat Sheet](https://devhints.io/graphql)\r\n\r\n"}],"children":[]}}}}
