{"path":"api-docs/storefront/tutorials/carts","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"Z1Jm3fi","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"API Docs","to":"/api-docs"},{"content":"Storefront APIs","to":"/api-docs/storefront"},{"content":"Tutorials","to":"/api-docs/storefront/tutorials"},{"content":"Carts and Checkouts","to":"/api-docs/storefront/tutorials/carts"}],"page":{"meta":{"title":"Carts and Checkouts - Tutorials - Storefront APIs - API Docs","url":"/api-docs/storefront/tutorials/carts","description":"Working with the Storefront Cart and Checkout APIs\n\n\n\nOn this Page\n\nPrerequisites\n\nGetting started\n\nStorefront Cart\n\nStorefront Checkout\n\nTroubleshootin..."},"title":"Carts and Checkouts","parsedPath":["pages","/api-docs","data","children",1,"data","children",7,"data","children",0],"rootPagePath":"/api-docs","path":"/api-docs/storefront/tutorials/carts","isSubpage":true,"route":{"path":"/carts"},"data":{"blocks":[{"type":"text","data":"# Working with the Storefront Cart and Checkout APIs\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this Page\r\n- [Prerequisites](#prerequisites)\r\n- [Getting started](#getting-started)\r\n- [Storefront Cart](#storefront-cart)\r\n- [Storefront Checkout](#storefront-checkout)\r\n- [Troubleshooting](#troubleshooting)\r\n- [Related resources](#related-resources)\r\n\r\n</div>\r\n\r\nBigCommerce's [Storefront API](https://developer.bigcommerce.com/api-reference#storefront-api) exposes storefront data to Stencil themes. You can use this client API to manage a shopper's cart, checkout, and order data via client-side JavaScript.\r\n\r\n\r\nThis tutorial exhibits common use cases to help you get started with the Storefront API. Each use case contains JavaScript code snippets you can paste into your browser's console, allowing you to test in the context of your storefront session.\r\n\r\n\r\nBy the end of this tutorial, you should be familiar enough with some of the Storefront API endpoints to test them.\r\n\r\n\r\n## Prerequisites\r\n\r\nFor this tutorial, you will need a BigCommerce store with at least two products and a shipping option.\r\n\r\n\r\n## Getting started\r\n\r\nTo begin, navigate to your storefront and open your browser’s developer console.\r\n\r\n\r\nFor this tutorial, set the credentials option to `same-origin` and the content-type fetch request option to `application/json`. In production, your credentials will depend on your app setup. See [Request.credentials](https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials) to learn more about other possible values.\r\n\r\n\r\n## Storefront Cart\r\n\r\nThe first part of this tutorial will cover using the [Storefront Cart API](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-cart-api) to create a cart, add a line item, and delete a line item directly from the storefront.\r\n\r\n### Create a cart\r\n\r\nYou can create a cart by sending a POST request to the [Create Cart](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-cart-api/cart/createacart) endpoint.\r\n\r\n\r\nWe will create the `createCart()` helper function to accomplish this POST request. Copy and execute the code below to create the function.\r\n\r\n\r\n```js\r\nfunction createCart(url, cartItems) {\r\n   return fetch(url, {\r\n       method: \"POST\",\r\n       credentials: \"same-origin\",\r\n       headers: {\r\n           \"Content-Type\": \"application/json\"},\r\n       body: JSON.stringify(cartItems),\r\n   })\r\n   .then(response => response.json());\r\n };\r\n```\r\n\r\nThe `createCart()` function takes two arguments:\r\n* `url`: The Storefront Cart API url.\r\n* `cartItems`: A `lineItems` array containing product IDs and quantities of the items we want to add.\r\n\r\nTo create a cart, execute the code below passing in `productId` values specific to your store.\r\n\r\n```js\r\ncreateCart(`/api/storefront/carts`, {\r\n   \"lineItems\": [\r\n   {\r\n       \"quantity\": 1,\r\n       \"productId\": 86\r\n   },\r\n   {\r\n       \"quantity\": 1,\r\n       \"productId\": 88\r\n   }\r\n   ]}\r\n)\r\n.then(data => console.log(JSON.stringify(data)))\r\n.catch(error => console.error(error));\r\n```\r\n\r\nYour result should be similar to the one below.\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n \"customerId\": 0,\r\n \"email\": \"\",\r\n \"currency\": {\r\n   \"name\": \"US Dollars\",\r\n   \"code\": \"USD\",\r\n   \"symbol\": \"$\",\r\n   \"decimalPlaces\": 2\r\n },\r\n \"isTaxIncluded\": false,\r\n \"baseAmount\": 274.5,\r\n \"discountAmount\": 0,\r\n \"cartAmount\": 274.5,\r\n \"coupons\": [],\r\n \"discounts\": [\r\n\t...\r\n ],\r\n \"lineItems\": {\r\n   \"physicalItems\": [\r\n     {\r\n       \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n       \"parentId\": null,\r\n       \"variantId\": 66,\r\n       \"productId\": 86,\r\n       \"sku\": \"ABS\",\r\n       \"name\": \"[Sample] Able Brewing System\",\r\n       \"url\": \"https://{store_url}/all/able-brewing-system/\",\r\n       \"quantity\": 1,\r\n\t\t...\r\n       \"extendedSalePrice\": 225,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     },\r\n     {\r\n       \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n       \"parentId\": null,\r\n       \"variantId\": 67,\r\n       \"productId\": 88,\r\n       \"sku\": \"CC3C\",\r\n       \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n       \"url\": \"https://{store_url}/all/chemex-coffeemaker-3-cup/\",\r\n       \"quantity\": 1,\r\n\t\t...\r\n       \"extendedSalePrice\": 49.5,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     }\r\n   ],\r\n  ...\r\n },\r\n ...\r\n}\r\n```\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n>Note: Please take note of the value of the `cartId` as it will be used later in the tutorial.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n### Get a cart\r\n\r\nTo display the contents of a cart, we need to send a GET request to the [Get a Cart](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-cart-api/cart/getacart) endpoint. By default, the cart response returns abbreviated product details. To get the full product details, we need to add the `include` query parameter.\r\n\r\n\r\nCopy and execute the code below to create and subsequently call the `getCart()` helper function.\r\n\r\n```js\r\nfunction getCart(url) {\r\n   return fetch(url, {\r\n       method: \"GET\",\r\n       credentials: \"same-origin\"\r\n   })\r\n   .then(response => response.json());\r\n};\r\n\r\ngetCart('/api/storefront/carts?include=lineItems.digitalItems.options,lineItems.physicalItems.options')\r\n .then(data => console.log(JSON.stringify(data)))\r\n .catch(error => console.error(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n[\r\n {\r\n   \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n   \"customerId\": 0,\r\n   \"email\": \"\",\r\n   \"currency\": {\r\n     \"name\": \"US Dollars\",\r\n     \"code\": \"USD\",\r\n     \"symbol\": \"$\",\r\n     \"decimalPlaces\": 2\r\n   },\r\n   \"isTaxIncluded\": false,\r\n   \"baseAmount\": 274.5,\r\n   \"discountAmount\": 0,\r\n   \"cartAmount\": 274.5,\r\n   \"coupons\": [],\r\n   \"discounts\": [\r\n     ...\r\n   ],\r\n   \"lineItems\": {\r\n     \"physicalItems\": [\r\n       {\r\n         \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n         \"parentId\": null,\r\n         \"variantId\": 66,\r\n         \"productId\": 86,\r\n         \"sku\": \"ABS\",\r\n         \"name\": \"[Sample] Able Brewing System\",\r\n         \"url\": \"https://{store_url}/able-brewing-system/\",\r\n         \"quantity\": 1,\r\n         ...\r\n         \"extendedSalePrice\": 225,\r\n         \"isShippingRequired\": true,\r\n         \"type\": \"physical\",\r\n         \"giftWrapping\": null,\r\n         \"options\": []\r\n       },\r\n       {\r\n         \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n         \"parentId\": null,\r\n         \"variantId\": 67,\r\n         \"productId\": 88,\r\n         \"sku\": \"CC3C\",\r\n         \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n         \"url\": \"https://{store_url}/chemex-coffeemaker-3-cup/\",\r\n         \"quantity\": 1,\r\n          ...\r\n         \"extendedSalePrice\": 49.5,\r\n         \"isShippingRequired\": true,\r\n         \"type\": \"physical\",\r\n         \"giftWrapping\": null,\r\n         \"options\": []\r\n       }\r\n     ],\r\n    ...\r\n   },\r\n   ...\r\n }\r\n]\r\n```\r\n\r\n### Add a cart item\r\n\r\nTo add a new line item to the existing cart, the ID of the cart must be included in the endpoint. The card ID was returned as part of the “Create a cart” POST request. Alternatively, you can retrieve the cart ID by making a “Get a cart” GET request.\r\nSee [Add Cart Line Items](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-cart-api/cart-items/addcartlineitem) for more information.\r\n\r\nCopy and execute the code below to create the `addCartItem()` helper function.\r\n\r\n```js\r\nfunction addCartItem(url, cartId, cartItems) {\r\n     return fetch(url + cartId + '/items', {\r\n         method: \"POST\",\r\n         credentials: \"same-origin\",\r\n         headers: {\r\n             \"Content-Type\": \"application/json\"},\r\n         body: JSON.stringify(cartItems),\r\n     })\r\n     .then(response => response.json());\r\n};\r\n```\r\nCall the function to add a new line item to your cart. Make sure to replace the `cartId` and `productId` with your own values.\r\n\r\n\r\n```js\r\naddCartItem(`/api/storefront/carts/`, `d4e978c2-bdcf-41b0-a49b-fecf4f5223c1`, {\r\n   \"lineItems\": [\r\n     {\r\n       \"quantity\": 1,\r\n       \"productId\": 97\r\n     }\r\n   ]\r\n })\r\n .then(data => console.log(JSON.stringify(data)))\r\n .catch(error => console.error(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n \"customerId\": 0,\r\n \"email\": \"\",\r\n \"currency\": {\r\n   \"name\": \"US Dollars\",\r\n   \"code\": \"USD\",\r\n   \"symbol\": \"$\",\r\n   \"decimalPlaces\": 2\r\n },\r\n \"isTaxIncluded\": false,\r\n \"baseAmount\": 394.45,\r\n \"discountAmount\": 0,\r\n \"cartAmount\": 394.45,\r\n \"coupons\": [],\r\n \"discounts\": [\r\n  ...\r\n ],\r\n \"lineItems\": {\r\n   \"physicalItems\": [\r\n     {\r\n       \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n       \"parentId\": null,\r\n       \"variantId\": 66,\r\n       \"productId\": 86,\r\n       \"sku\": \"ABS\",\r\n       \"name\": \"[Sample] Able Brewing System\",\r\n       \"url\": \"https://{store_url}/able-brewing-system/\",\r\n       \"quantity\": 1,\r\n        ...\r\n       \"extendedSalePrice\": 225,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     },\r\n     {\r\n       \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n       \"parentId\": null,\r\n       \"variantId\": 67,\r\n       \"productId\": 88,\r\n       \"sku\": \"CC3C\",\r\n       \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n       \"url\": \"https://{store_url}/chemex-coffeemaker-3-cup/\",\r\n       \"quantity\": 1,\r\n        ...\r\n       \"extendedSalePrice\": 49.5,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     },\r\n     {\r\n       \"id\": \"3f8dd1ed-f917-41be-b7f7-20c10f406e09\",\r\n       \"parentId\": null,\r\n       \"variantId\": 69,\r\n       \"productId\": 97,\r\n       \"sku\": \"TWB\",\r\n       \"name\": \"[Sample] Tiered Wire Basket\",\r\n       \"url\": \"https://{store_url}/tiered-wire-basket/\",\r\n       \"quantity\": 1,\r\n        ...\r\n       \"extendedSalePrice\": 119.95,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     }\r\n   ],\r\n  ...\r\n },\r\n...\r\n}\r\n```\r\n\r\n### Delete a cart item\r\n\r\nTo delete a line item from a cart, send a DELETE request to the [Delete Cart Line Item](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-cart-api/cart-items/deletecartlineitem) endpoint and pass in the `cartId` and `itemId` to be deleted.\r\n\r\n\r\n```js\r\nfunction deleteCartItem(url, cartId, itemId) {\r\n   return fetch(url + cartId + '/items/' + itemId, {\r\n       method: \"DELETE\",\r\n       credentials: \"same-origin\",\r\n       headers: {\r\n           \"Content-Type\": \"application/json\",}\r\n})\r\n.then(response => response.json());\r\n};\r\n```\r\n\r\nPass your `cartId` and `itemId` to the `deleteCartItem()` helper function to delete the line item.\r\n\r\n```js\r\ndeleteCartItem(`/api/storefront/carts/`, `d4e978c2-bdcf-41b0-a49b-fecf4f5223c1`, `3f8dd1ed-f917-41be-b7f7-20c10f406e09`)\r\n.then(data => console.log(JSON.stringify(data)))\r\n.catch(error => console.log(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n \"customerId\": 0,\r\n \"email\": \"\",\r\n \"currency\": {\r\n   \"name\": \"US Dollars\",\r\n   \"code\": \"USD\",\r\n   \"symbol\": \"$\",\r\n   \"decimalPlaces\": 2\r\n },\r\n \"isTaxIncluded\": false,\r\n \"baseAmount\": 274.5,\r\n \"discountAmount\": 0,\r\n \"cartAmount\": 274.5,\r\n \"coupons\": [],\r\n \"discounts\": [\r\n  ...\r\n ],\r\n \"lineItems\": {\r\n   \"physicalItems\": [\r\n     {\r\n       \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n       \"parentId\": null,\r\n       \"variantId\": 66,\r\n       \"productId\": 86,\r\n       \"sku\": \"ABS\",\r\n       \"name\": \"[Sample] Able Brewing System\",\r\n       \"url\": \"https://{store_url}/able-brewing-system/\",\r\n       \"quantity\": 1,\r\n       ...\r\n       \"extendedSalePrice\": 225,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     },\r\n     {\r\n       \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n       \"parentId\": null,\r\n       \"variantId\": 67,\r\n       \"productId\": 88,\r\n       \"sku\": \"CC3C\",\r\n       \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n       \"url\": \"https://{store_url}/chemex-coffeemaker-3-cup/\",\r\n       \"quantity\": 1,\r\n       ...\r\n       \"extendedSalePrice\": 49.5,\r\n       \"isShippingRequired\": true,\r\n       \"type\": \"physical\",\r\n       \"giftWrapping\": null\r\n     }\r\n   ],\r\n  ...\r\n },\r\n...\r\n}\r\n```\r\n\r\n## Storefront Checkout\r\n\r\nIn this section, we will add a billing address to a checkout, create a consignment, and update a consignment to add a shipping option directly from the storefront. See [Storefront Checkout](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-checkout-api) for more information.\r\n\r\nBefore proceeding, make sure you have added two different line items to your cart.\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme:  -->\r\n>Note: `checkoutId` is the `cartId`.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n### Add a billing address\r\n\r\nTo add a billing address to a checkout, send a POST request to the [Add Checkout Billing Address](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-checkout-api/checkout-billing-address/checkoutsbillingaddressbycheckoutidpost) endpoint.\r\n\r\n\r\nCopy and execute the code below to create the `addBillingAddress()` helper function.\r\n\r\n```js\r\nfunction addBillingAddress(url, cartId, data) {\r\n   return fetch(url + cartId + `/billing-address`,  {\r\n       method: \"POST\",\r\n       credentials: \"same-origin\",\r\n       headers: {\r\n           \"Content-Type\": \"application/json\",\r\n       },\r\n       body: JSON.stringify(data),\r\n   })\r\n   .then(response => response.json());\r\n};\r\n```\r\n\r\nNow call the `addBillingAddress()` function making sure to replace the `cartId` with your own value.\r\n\r\n```js\r\naddBillingAddress(`/api/storefront/checkouts/`, `d4e978c2-bdcf-41b0-a49b-fecf4f5223c1`, {\r\n   \"firstName\": \"Jane\",\r\n   \"lastName\": \"Doe\",\r\n   \"email\": \"janedoe@email.com\",\r\n   \"company\": \"BigCommerce\",\r\n   \"address1\": \"123 Main Street\",\r\n   \"address2\": \"Apt 1\",\r\n   \"city\": \"Austin\",\r\n   \"stateOrProvinceCode\": \"TX\",\r\n   \"countryCode\": \"USA\",\r\n   \"postalCode\": \"78751\"\r\n   })\r\n   .then(data => console.log(JSON.stringify(data)))\r\n   .catch(error => console.error(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n \"cart\": {\r\n   \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n   \"customerId\": 0,\r\n   \"email\": \"janedoe@email.com\",\r\n   \"currency\": {\r\n     \"name\": \"US Dollars\",\r\n     \"code\": \"USD\",\r\n     \"symbol\": \"$\",\r\n     \"decimalPlaces\": 2\r\n   },\r\n   ...\r\n   \"coupons\": [],\r\n   \"discounts\": [\r\n    ...\r\n   ],\r\n   \"lineItems\": {\r\n     \"physicalItems\": [\r\n       {\r\n         \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n         \"parentId\": null,\r\n         \"variantId\": 66,\r\n         \"productId\": 86,\r\n         \"sku\": \"ABS\",\r\n         \"name\": \"[Sample] Able Brewing System\",\r\n         \"url\": \"https://{store_url}}/able-brewing-system/\",\r\n         \"quantity\": 1,\r\n        ...\r\n         \"extendedSalePrice\": 225,\r\n         \"comparisonPrice\": 225,\r\n         \"extendedComparisonPrice\": 225,\r\n         \"isShippingRequired\": true,\r\n         \"giftWrapping\": null,\r\n         \"addedByPromotion\": false\r\n       },\r\n       {\r\n         \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n         \"parentId\": null,\r\n         \"variantId\": 67,\r\n         \"productId\": 88,\r\n         \"sku\": \"CC3C\",\r\n         \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n         \"url\": \"https://{store_url}}/chemex-coffeemaker-3-cup/\",\r\n         \"quantity\": 1,\r\n        ...\r\n         \"extendedSalePrice\": 49.5,\r\n         \"comparisonPrice\": 49.5,\r\n         \"extendedComparisonPrice\": 49.5,\r\n         \"isShippingRequired\": true,\r\n         \"giftWrapping\": null,\r\n         \"addedByPromotion\": false\r\n       }\r\n     ],\r\n    ...\r\n   },\r\n   ...\r\n },\r\n \"billingAddress\": {\r\n   \"id\": \"5e6a8cad71318\",\r\n   \"firstName\": \"Jane\",\r\n   \"lastName\": \"Doe\",\r\n   \"email\": \"janedoe@email.com\",\r\n   \"company\": \"BigCommerce\",\r\n   \"address1\": \"123 Main Street\",\r\n   \"address2\": \"Apt 1\",\r\n   \"city\": \"Austin\",\r\n   \"stateOrProvince\": \"Texas\",\r\n   \"stateOrProvinceCode\": \"TX\",\r\n   \"country\": \"\",\r\n   \"countryCode\": \"\",\r\n   \"postalCode\": \"78751\",\r\n   \"phone\": \"\",\r\n   \"customFields\": []\r\n },\r\n \"consignments\": [],\r\n \"orderId\": null,\r\n \"shippingCostTotal\": 0,\r\n \"shippingCostBeforeDiscount\": 0,\r\n \"handlingCostTotal\": 0,\r\n \"taxTotal\": 27.45,\r\n \"coupons\": [],\r\n \"taxes\": [\r\n   {\r\n     \"name\": \"Tax\",\r\n     \"amount\": 27.45\r\n   }\r\n ],\r\n \"subtotal\": 274.5,\r\n \"grandTotal\": 301.95,\r\n...\r\n \"customerMessage\": \"\"\r\n}\r\n```\r\n\r\n### Add a new consignment\r\n\r\nA consignment consists of a shipping address with the associated line items. At a minimum, you must include one shipping address with line items and shipping options in the checkout. If you use multiple shipping locations, match each `lineItem` with the correct shipping address.  When adding a shipping address to the checkout, include the `?include=consignments.availableShippingOptions` query parameter to return the shipping options available for any address.\r\n\r\nSee [Add New Consignment to Checkout](https://developer.bigcommerce.com/api-reference/cart-checkout/storefront-checkout-api/checkout-consignments/checkoutsconsignmentsbycheckoutidpost) for more information.\r\n\r\n\r\nCreate the `createConsignment()`helper function to test this functionality.\r\n\r\n\r\n```js\r\nfunction createConsignment(url, cartId, data) {\r\n return fetch(url + cartId + `/consignments?include=consignments.availableShippingOptions`,   {\r\n     method: \"POST\",\r\n     credentials: \"same-origin\",\r\n     headers: {\r\n         \"Content-Type\": \"application/json\" ,\r\n     },\r\n     body: JSON.stringify(data),\r\n })\r\n .then(response => response.json());\r\n };\r\n```\r\n\r\nCopy and execute the code below to create a new consignment. Make sure to replace the `cartId` with your own value.\r\n\r\n\r\n```js\r\ncreateConsignment(`/api/storefront/checkouts/`, `d4e978c2-bdcf-41b0-a49b-fecf4f5223c1`,\r\n   [{\r\n     \"shippingAddress\": {\r\n         \"firstName\": \"Jane\",\r\n         \"lastName\": \"Doe\",\r\n         \"email\": \"janedoe@email.com\",\r\n         \"company\": \"BigCommerce\",\r\n         \"address1\": \"123 Main Street\",\r\n         \"address2\": \"Apt 1\",\r\n         \"city\": \"Austin\",\r\n         \"stateOrProvinceCode\": \"TX\",\r\n         \"countryCode\": \"US\",\r\n         \"postalCode\": \"78751\"\r\n     },\r\n     \"lineItems\": [{\r\n         \"itemId\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n         \"quantity\": 1\r\n     }]\r\n   },\r\n   {\r\n     \"shippingAddress\": {\r\n         \"firstName\": \"John\",\r\n         \"lastName\": \"Doe\",\r\n         \"email\": \"johnedoe@email.com\",\r\n         \"company\": \"BigCommerce\",\r\n         \"address1\": \"123 South Street\",\r\n         \"address2\": \"Apt 5\",\r\n         \"city\": \"Austin\",\r\n         \"stateOrProvinceCode\": \"TX\",\r\n         \"countryCode\": \"US\",\r\n         \"postalCode\": \"78726\"\r\n     },\r\n     \"lineItems\": [{\r\n         \"itemId\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n         \"quantity\": 1\r\n     }]\r\n   }]\r\n )\r\n .then(data => console.log(JSON.stringify(data)))\r\n .catch(error => console.error(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n{\r\n  \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n    \"cart\": {\r\n      \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n      \"customerId\": 0,\r\n      \"email\": \"janedoe@email.com\",\r\n      \"currency\": {\r\n        \"name\": \"US Dollars\",\r\n        \"code\": \"USD\",\r\n        \"symbol\": \"$\",\r\n        \"decimalPlaces\": 2\r\n      },\r\n    ...\r\n      \"coupons\": [],\r\n      \"discounts\": [\r\n        ...\r\n      ],\r\n      \"lineItems\": {\r\n        \"physicalItems\": [\r\n          {\r\n            \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n            \"parentId\": null,\r\n            \"variantId\": 66,\r\n            \"productId\": 86,\r\n            \"sku\": \"ABS\",\r\n            \"name\": \"[Sample] Able Brewing System\",\r\n            \"url\": \"https://{store_url}/able-brewing-system/\",\r\n            \"quantity\": 1,\r\n            ...\r\n            \"extendedSalePrice\": 225,\r\n            \"comparisonPrice\": 225,\r\n            \"extendedComparisonPrice\": 225,\r\n            \"isShippingRequired\": true,\r\n            \"giftWrapping\": null,\r\n            \"addedByPromotion\": false\r\n          },\r\n          {\r\n            \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n            \"parentId\": null,\r\n            \"variantId\": 67,\r\n            \"productId\": 88,\r\n            \"sku\": \"CC3C\",\r\n            \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n            \"url\": \"https://{store_url}/chemex-coffeemaker-3-cup/\",\r\n            \"quantity\": 1,\r\n            ...\r\n            \"comparisonPrice\": 49.5,\r\n            \"extendedComparisonPrice\": 49.5,\r\n            \"isShippingRequired\": true,\r\n            \"giftWrapping\": null,\r\n            \"addedByPromotion\": false\r\n          }\r\n        ],\r\n        ...\r\n      },\r\n      ...\r\n    },\r\n    \"billingAddress\": {\r\n      \"id\": \"5e6a8cad71318\",\r\n      \"firstName\": \"Jane\",\r\n      \"lastName\": \"Doe\",\r\n      \"email\": \"janedoe@email.com\",\r\n      \"company\": \"BigCommerce\",\r\n      \"address1\": \"123 Main Street\",\r\n      \"address2\": \"Apt 1\",\r\n      \"city\": \"Austin\",\r\n      \"stateOrProvince\": \"\",\r\n      \"stateOrProvinceCode\": \"\",\r\n      \"country\": \"\",\r\n      \"countryCode\": \"\",\r\n      \"postalCode\": \"78751\",\r\n      \"phone\": \"\",\r\n      \"customFields\": []\r\n    },\r\n    \"consignments\": [\r\n      {\r\n        \"id\": \"5e6a91ff83c6d\",\r\n        \"shippingCost\": 0,\r\n        ...\r\n        \"lineItemIds\": [\r\n          \"57a877e0-d898-47d0-910d-88656e8dee0c\"\r\n        ],\r\n        \"selectedShippingOption\": null,\r\n        \"shippingAddress\": {\r\n          \"firstName\": \"Jane\",\r\n          \"lastName\": \"Doe\",\r\n          \"email\": \"janedoe@email.com\",\r\n          \"company\": \"BigCommerce\",\r\n          \"address1\": \"123 Main Street\",\r\n          \"address2\": \"Apt 1\",\r\n          \"city\": \"Austin\",\r\n          \"stateOrProvince\": \"Texas\",\r\n          \"stateOrProvinceCode\": \"TX\",\r\n          \"country\": \"United States\",\r\n          \"countryCode\": \"US\",\r\n          \"postalCode\": \"78751\",\r\n          \"phone\": \"\",\r\n          \"customFields\": []\r\n        },\r\n        \"availableShippingOptions\": [\r\n          {\r\n            \"id\": \"80ad65f7946c23bd4ee9a531d85c5e21\",\r\n            \"type\": \"shipping_pickupinstore\",\r\n            \"description\": \"Pickup In Store\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 0,\r\n            ...\r\n          },\r\n          {\r\n            \"id\": \"4dcbf24f457dd67d5f89bcf374e0bc9b\",\r\n            \"type\": \"freeshipping\",\r\n            \"description\": \"Free Shipping\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 0,\r\n            ...\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"id\": \"5e6a91ffeac84\",\r\n        \"shippingCost\": 0,\r\n        ...\r\n        \"lineItemIds\": [\r\n          \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\"\r\n        ],\r\n        \"selectedShippingOption\": null,\r\n        \"shippingAddress\": {\r\n          \"firstName\": \"John\",\r\n          \"lastName\": \"Doe\",\r\n          \"email\": \"johnedoe@email.com\",\r\n          \"company\": \"BigCommerce\",\r\n          \"address1\": \"123 South Street\",\r\n          \"address2\": \"Apt 5\",\r\n          \"city\": \"Austin\",\r\n          \"stateOrProvince\": \"Texas\",\r\n          \"stateOrProvinceCode\": \"TX\",\r\n          \"country\": \"United States\",\r\n          \"countryCode\": \"US\",\r\n          \"postalCode\": \"78726\",\r\n          \"phone\": \"\",\r\n          \"customFields\": []\r\n        },\r\n        \"availableShippingOptions\": [\r\n          {\r\n            \"id\": \"80ad65f7946c23bd4ee9a531d85c5e21\",\r\n            \"type\": \"shipping_pickupinstore\",\r\n            \"description\": \"Pickup In Store\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 0,\r\n            \"transitTime\": \"\",\r\n            \"isRecommended\": false,\r\n            \"additionalDescription\": \"\"\r\n          },\r\n          {\r\n            \"id\": \"4dcbf24f457dd67d5f89bcf374e0bc9b\",\r\n            \"type\": \"freeshipping\",\r\n            \"description\": \"Free Shipping\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 0,\r\n            ...\r\n          },\r\n          {\r\n            \"id\": \"85dfaf5f834d7e594f0bd7cf67d5b200\",\r\n            \"type\": \"shipping_flatrate\",\r\n            \"description\": \"Flat Rate\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 5,\r\n            ...\r\n          },\r\n          {\r\n            \"id\": \"8809b0bbcc8bdc2d5cad2a4fcbd6cf09\",\r\n            \"type\": \"shipping_byweight\",\r\n            \"description\": \"Ship by Weight\",\r\n            \"imageUrl\": \"\",\r\n            \"cost\": 10,\r\n            ...\r\n          }\r\n        ]\r\n      }\r\n    ],\r\n    \"orderId\": null,\r\n    \"shippingCostTotal\": 0,\r\n    \"shippingCostBeforeDiscount\": 0,\r\n    \"handlingCostTotal\": 0,\r\n    \"taxTotal\": 22.65,\r\n    ...\r\n    \"subtotal\": 274.5,\r\n    ...\r\n    \"customerMessage\": \"\"\r\n  }\r\n```\r\n\r\n### Update a consignment to add a shipping option\r\n\r\nTo update a consignment, add your `consignmentId` and the appropriate `shippingOptionId` (located inside the `availableShippingOptions` object) to the PUT request parameters. See [Update Checkout Consignment](https://developer.bigcommerce.com/api-reference/cart-checkout/server-server-checkout-api/checkout-consignments) for more information.\r\n\r\n>**Note:** Only one consignment can be updated at a time.\r\n\r\n\r\nCreate the `updateConsignment()` helper function to accomplish this.\r\n\r\n\r\n```js\r\nfunction updateConsignment(url, cartId, consignmentId, data,) {\r\n return fetch(url + cartId + `/consignments/` + consignmentId,   {\r\n     method: \"PUT\",\r\n     credentials: \"same-origin\",\r\n     headers: {\r\n         \"Content-Type\": \"application/json;\",\r\n     },\r\n     body: JSON.stringify(data),\r\n })\r\n .then(response => response.json());\r\n};\r\n```\r\n\r\nExecute the code below to update the consignment, replacing `cartId` , `consigmentId`, and `shippingOptionId` with your values.\r\n\r\n\r\n```js\r\n updateConsignment(`/api/storefront/checkouts/`, `d4e978c2-bdcf-41b0-a49b-fecf4f5223c1`, `5e6a91ff83c6d`,{\r\n   \"shippingOptionId\": \"4dcbf24f457dd67d5f89bcf374e0bc9b\"\r\n})\r\n .then(data => console.log(JSON.stringify(data)))\r\n .catch(error => console.error(error));\r\n```\r\n\r\nResponse:\r\n\r\n```json\r\n \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n \"cart\": {\r\n   \"id\": \"d4e978c2-bdcf-41b0-a49b-fecf4f5223c1\",\r\n   \"customerId\": 0,\r\n   \"email\": \"janedoe@email.com\",\r\n   \"currency\": {\r\n     \"name\": \"US Dollars\",\r\n     \"code\": \"USD\",\r\n     \"symbol\": \"$\",\r\n     \"decimalPlaces\": 2\r\n   },\r\n   ...\r\n   \"coupons\": [],\r\n   \"discounts\": [\r\n    ...\r\n   ],\r\n   \"lineItems\": {\r\n     \"physicalItems\": [\r\n       {\r\n         \"id\": \"57a877e0-d898-47d0-910d-88656e8dee0c\",\r\n         \"parentId\": null,\r\n         \"variantId\": 66,\r\n         \"productId\": 86,\r\n         \"sku\": \"ABS\",\r\n         \"name\": \"[Sample] Able Brewing System\",\r\n         \"url\": \"https://{store_url}/able-brewing-system/\",\r\n         \"quantity\": 1,\r\n         ...\r\n         \"extendedSalePrice\": 225,\r\n         \"comparisonPrice\": 225,\r\n         \"extendedComparisonPrice\": 225,\r\n         \"isShippingRequired\": true,\r\n         \"giftWrapping\": null,\r\n         \"addedByPromotion\": false\r\n       },\r\n       {\r\n         \"id\": \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\",\r\n         \"parentId\": null,\r\n         \"variantId\": 67,\r\n         \"productId\": 88,\r\n         \"sku\": \"CC3C\",\r\n         \"name\": \"[Sample] Chemex Coffeemaker 3 Cup\",\r\n         \"url\": \"https://{store_url}/chemex-coffeemaker-3-cup/\",\r\n         \"quantity\": 1,\r\n         ...\r\n         \"extendedSalePrice\": 49.5,\r\n         \"comparisonPrice\": 49.5,\r\n         \"extendedComparisonPrice\": 49.5,\r\n         \"isShippingRequired\": true,\r\n         \"giftWrapping\": null,\r\n         \"addedByPromotion\": false\r\n       }\r\n     ],\r\n    ...\r\n   },\r\n   ...\r\n },\r\n \"billingAddress\": {\r\n   \"id\": \"5e6a8cad71318\",\r\n   \"firstName\": \"Jane\",\r\n   \"lastName\": \"Doe\",\r\n   \"email\": \"janedoe@email.com\",\r\n   \"company\": \"BigCommerce\",\r\n   \"address1\": \"123 Main Street\",\r\n   \"address2\": \"Apt 1\",\r\n   \"city\": \"Austin\",\r\n   \"stateOrProvince\": \"\",\r\n   \"stateOrProvinceCode\": \"\",\r\n   \"country\": \"\",\r\n   \"countryCode\": \"\",\r\n   \"postalCode\": \"78751\",\r\n   \"phone\": \"\",\r\n   \"customFields\": []\r\n },\r\n \"consignments\": [\r\n   {\r\n     \"id\": \"5e6a91ff83c6d\",\r\n     \"shippingCost\": 0,\r\n     \"handlingCost\": 0,\r\n     \"couponDiscounts\": [],\r\n     \"discounts\": [],\r\n     \"lineItemIds\": [\r\n       \"57a877e0-d898-47d0-910d-88656e8dee0c\"\r\n     ],\r\n     \"selectedShippingOption\": {\r\n       \"id\": \"4dcbf24f457dd67d5f89bcf374e0bc9b\",\r\n       \"type\": \"freeshipping\",\r\n       \"description\": \"Free Shipping\",\r\n       \"imageUrl\": \"\",\r\n       \"cost\": 0,\r\n       \"transitTime\": \"\",\r\n       \"additionalDescription\": \"\"\r\n     },\r\n     \"shippingAddress\": {\r\n       \"firstName\": \"Jane\",\r\n       \"lastName\": \"Doe\",\r\n       \"email\": \"janedoe@email.com\",\r\n       \"company\": \"BigCommerce\",\r\n       \"address1\": \"123 Main Street\",\r\n       \"address2\": \"Apt 1\",\r\n       \"city\": \"Austin\",\r\n       \"stateOrProvince\": \"Texas\",\r\n       \"stateOrProvinceCode\": \"TX\",\r\n       \"country\": \"United States\",\r\n       \"countryCode\": \"US\",\r\n       \"postalCode\": \"78751\",\r\n       \"phone\": \"\",\r\n       \"customFields\": []\r\n     }\r\n   },\r\n   {\r\n     \"id\": \"5e6a91ffeac84\",\r\n     \"shippingCost\": 0,\r\n     \"handlingCost\": 0,\r\n     \"couponDiscounts\": [],\r\n     \"discounts\": [],\r\n     \"lineItemIds\": [\r\n       \"22c461a2-eff9-4b72-8d22-7c2792ce2c2d\"\r\n     ],\r\n     \"selectedShippingOption\": null,\r\n     \"shippingAddress\": {\r\n       \"firstName\": \"John\",\r\n       \"lastName\": \"Doe\",\r\n       \"email\": \"johnedoe@email.com\",\r\n       \"company\": \"BigCommerce\",\r\n       \"address1\": \"123 South Street\",\r\n       \"address2\": \"Apt 5\",\r\n       \"city\": \"Austin\",\r\n       \"stateOrProvince\": \"Texas\",\r\n       \"stateOrProvinceCode\": \"TX\",\r\n       \"country\": \"United States\",\r\n       \"countryCode\": \"US\",\r\n       \"postalCode\": \"78726\",\r\n       \"phone\": \"\",\r\n       \"customFields\": []\r\n     }\r\n   }\r\n ],\r\n \"orderId\": null,\r\n \"shippingCostTotal\": 0,\r\n \"shippingCostBeforeDiscount\": 0,\r\n \"handlingCostTotal\": 0,\r\n \"taxTotal\": 22.65,\r\n \"coupons\": [],\r\n \"taxes\": [\r\n   {\r\n     \"name\": \"Tax\",\r\n     \"amount\": 22.65\r\n   }\r\n ],\r\n \"subtotal\": 274.5,\r\n...\r\n}\r\n```\r\n\r\n## Troubleshooting\r\n\r\n**Did you get a 404?**\r\nMake sure you have at least one item in your cart. Removing all items deletes the cart and returns a 404 error.\r\n\r\n\r\n## Related resources\r\n\r\n### Articles\r\n- [Let’s Talk About CORS](https://medium.com/bigcommerce-developer-blog/lets-talk-about-cors-84800c726919)\r\n\r\n### Endpoints\r\n- [Storefront Cart](/api-reference/cart-checkout/storefront-cart-api)\r\n- [Storefront Checkout](/api-reference/cart-checkout/storefront-checkout-api)\r\n"}],"children":[]}}}}
