{"path":"stencil-docs/javascript-and-event-hooks/event-hooks","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"23J4Lj","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"JavaScript","to":"/stencil-docs/javascript-and-event-hooks"},{"content":"Event Hooks","to":"/stencil-docs/javascript-and-event-hooks/event-hooks"}],"page":{"meta":{"title":"Event Hooks - JavaScript - Stencil Docs","url":"/stencil-docs/javascript-and-event-hooks/event-hooks","description":"Event Hooks\n\n\n\nOn This Page\n\nCookie Notification Example\n\nCart Dialog Example\n\nStencil Data Tags and Event Hooks\n\nResources\n\n\n\nStencil themes provide ac..."},"title":"Event Hooks","parsedPath":["pages","/stencil-docs","data","children",5,"data","children",1],"rootPagePath":"/stencil-docs","path":"/stencil-docs/javascript-and-event-hooks/event-hooks","isSubpage":true,"route":{"path":"/event-hooks"},"data":{"blocks":[{"type":"text","data":"# Event Hooks\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On This Page\r\n- [Cookie Notification Example](#cookie-notification-example)\r\n- [Cart Dialog Example](#cart-dialog-example)\r\n- [Stencil Data Tags and Event Hooks](#stencil-data-tags-and-event-hooks)\r\n- [Resources](#resources)\r\n\r\n</div>\r\n\r\nStencil themes provide access to remote resources through data tags and event hooks. Developers can use these hooks to trigger defined events. A theme can hook to an event to perform actions or calculations based on shopper behavior.\r\n\r\nStencil themes incorporate event hooks by importing the stencil-utils module. If take a look at [cornerstone/assets/js/theme/](https://github.com/bigcommerce/cornerstone/tree/master/assets/js/theme), you will see the import statement `'import utils from '@bigcommerce/stencil-utils';` at the top of files using leveraging event hooks.\r\n\r\n## Cookie Notification Example\r\n\r\nIn the example below, the `cookie-privacy-notification` hook enables customization of the alert window that displays European Union–required cookie notifications:\r\n\r\nFirst, ensure you have loaded the `stencil-utils` package with the following command:\r\n\r\n`import utils from '@bigcommerce/stencil-utils';`\r\n\r\nEuropean websites must notify users of cookies to comply with European Union law.\r\nThe following code implements a hook that will alert shoppers that the website uses cookies.\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\"></div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```javascript\r\nexport default function() {\r\n\r\n  // Here you can override the default browser alert box by\r\n  // hooking to the 'cookie-privacy-notification' hook.\r\n  utils.hooks.on('cookie-privacy-notification', (event, privacyMessage) => {\r\n\r\n    // You can make your own custom modal or alert box\r\n    // appear in your theme using the privacyMessage provided\r\n    myCustomAlert(privacyMessage);\r\n\r\n    // Call event.preventDefault() to prevent the default\r\n    // browser alert from occurring in stencil-utils\r\n    event.preventDefault();\r\n  });\r\n}\r\n\r\n```\r\n\r\nA theme would listen for the `cookie-privacy-notification` event to override the browser’s default notification UI.\r\n\r\n## Cart Dialog Example\r\n\r\nIn the following code snippet from Cornerstone in [templates/components/products/product-view.html](https://github.com/bigcommerce/cornerstone/blob/master/templates/components/products/product-view.html), note the data tag named `data‑cart‑item‑add`:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\"></div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```html\r\n<form class=\"form\" method=\"post\" action=\"{{product.cart_url}}\"\r\n    enctype=\"multipart/form-data\" data-cart-item-add>\r\n```\r\n\r\nThis data tag enables the emission of the `cart‑item‑add` event in this next snippet:\r\n\r\n<div class=\"HubBlock-header\">\r\n    <div class=\"HubBlock-header-title flex items-center\">\r\n        <div class=\"HubBlock-header-name\"></div>\r\n    </div><div class=\"HubBlock-header-subtitle\"></div>\r\n</div>\r\n\r\n<!--\r\ntitle: \"\"\r\nsubtitle: \"\"\r\nlineNumbers: true\r\n-->\r\n\r\n```js\r\n/*  \r\n * Import all product-specific js\r\n */\r\n[...]\r\nimport utils from '@bigcommerce/stencil-utils';\r\n[...]\r\naddProductToCart() {\r\n    utils.hooks.on('cart-item-add', (event) => {\r\n        event.preventDefault();\r\n    });\r\n}\r\n```\r\n\r\n## Stencil Data Tags and Event Hooks\r\nStencil themes provide the following chains of data tags, delegated DOM (Document Object Model) events, emitted Stencil event hooks, and Stencil event parameter(s).\r\n\r\n### Cart Item Added\r\n\r\nHook for items added to the customer’s shopping cart.\r\n\r\n**Function Signature:**\r\n\r\n```javascript\r\nitemAdd() {\r\n    this.$body.on('submit', '[data-cart-item-add]', (event) => {\r\n        this.emit('cart-item-add', event, event.target);\r\n    });\r\n}\r\n```\r\n\r\n<table>\r\n\t<tr>\r\n\t\t<th>Data Tag</th>\r\n\t\t<th>Delegated DOM Event</th>\r\n\t\t<th>Stencil Event/Hook</th>\r\n\t\t<th>Stencil Event Parameter(s)</th>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>data-cart-item-add</td>\r\n\t\t<td>submit</td>\r\n\t\t<td>cart-item-add</td>\r\n\t\t<td>event, event.target</td>\r\n\t</tr>\r\n</table>\r\n\r\n### Faceted-Search Events\r\n\r\nHooks for faceted-search selections that the customer initiates or submits.\r\n\r\n**Function Signature**\r\n\r\n```javascript\r\nsearchEvents() {\r\n  this.$body.on('click', '[data-faceted-search-facet]', (event) => {\r\n        this.emit('facetedSearch-facet-clicked', event);\r\n  });\r\n\r\n  this.$body.on('submit', '[data-faceted-search-range]', (event) => {\r\n        this.emit('facetedSearch-range-submitted', event);\r\n  });\r\n}\r\n\r\n```\r\n\r\n<table>\r\n\t<tr>\r\n\t\t<th>Data Tag</th>\r\n\t\t<th>Delegated DOM Event</th>\r\n\t\t<th>Stencil Event/Hook</th>\r\n\t\t<th>Stencil Event Parameter(s)</th>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>data-faceted-search-facet</td>\r\n\t\t<td>click</td>\r\n\t\t<td>facetedSearch-facet-clicked</td>\r\n\t\t<td>event</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td>data-faceted-search-range</td>\r\n\t\t<td>submit</td>\r\n\t\t<td>facetedSearch-range-submitted</td>\r\n\t\t<td>event</td>\r\n\t</tr>\r\n</table>\r\n\r\n## Resources\r\n\r\n### Additional Resources\r\n* [cookieNotification.js](https://github.com/bigcommerce/cornerstone/blob/637ef1b0ff130333aea128663daa6d1a4d37fb78/assets/js/theme/global/cookieNotification.js) (BigCommerce Github)\r\n"}],"children":[]}}}}
