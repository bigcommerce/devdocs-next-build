{"path":"stencil-docs/javascript-and-event-hooks/customizing-javascript","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"23J4Lj","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"JavaScript","to":"/stencil-docs/javascript-and-event-hooks"},{"content":"Customizing Javascript","to":"/stencil-docs/javascript-and-event-hooks/customizing-javascript"}],"page":{"meta":{"title":"Customizing Javascript - JavaScript - Stencil Docs","url":"/stencil-docs/javascript-and-event-hooks/customizing-javascript","description":"Customizing Javascript\n\n\n\nOn this page\n\nModifying a page's Javascript\n\nBringing in Handlebars context\n\nInstalling libraries\n\n\n\nMost Cornerstone theme pa..."},"title":"Customizing Javascript","parsedPath":["pages","/stencil-docs","data","children",5,"data","children",2],"rootPagePath":"/stencil-docs","path":"/stencil-docs/javascript-and-event-hooks/customizing-javascript","isSubpage":true,"route":{"path":"/customizing-javascript"},"data":{"blocks":[{"type":"text","data":"# Customizing Javascript\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this page\r\n- [Modifying a page's Javascript](#modifying-a-pages-javascript)\r\n- [Bringing in Handlebars context](#bringing-in-handlebars-context)\r\n\r\n- [Installing libraries](#installing-libraries)\r\n\r\n</div>\r\n\r\nMost [Cornerstone theme](https://github.com/bigcommerce/cornerstone) page template files located in `templates/pages/` have a corresponding `.js` file in `assets/js/theme/`. These JavaScript files contain event handlers and logic for managing page specific elements and actions.\r\n\r\nFor example, `assets/js/theme/product.js` corresponds to `templates/pages/product.html` and contains a `productReviewHandler()` and `bulkPricingHandler()`. These functions are implemented within a derived `Product` class which extends an abstract class called `PageManager`. This same pattern is repeated in all `assets/js/theme/*.js` files.\r\n\r\n\r\nBy default, all derived `PageManager` classes contain an `onReady` method functionally similar to `JQuery.ready()`. Additionally, certain pages have unique event handlers. For example, the `cartUpdate` handler in `assets/js/cart.js` runs each time certain cart elements are changed. Developers can customize and enhance page behavior and functionality by editing code within these event handlers or by creating their own event handlers.\r\n\r\n\r\nTo demonstrate, this article describes how to add some very simple JavaScript to `product.js`.\r\n\r\n## Modifying a page's Javascript\r\n\r\nIn this example, we will add some \"Hello World!\" text to the product page's `onReady` event. We'll first add a call to the function. Then, we will implement the function itself.\r\n\r\n\r\nIn `assets/js/theme/product.js` file, add a call to `this.helloWorld()` to the bottom of the `onReady()` method, which we'll implement in the next step.\r\n\r\n\r\n```js\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }\r\n\r\n    onReady() {\r\n      // ...\r\n      // Example Code\r\n      this.helloWorld();\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nNext, implement the `helloWorld()` function by adding it to the `Product` class just after the closing `onReady()` bracket.\r\n\r\n```javascript\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }\r\n\r\n    onReady() {\r\n      // ...\r\n\r\n      // Example Code\r\n      this.helloWorld();\r\n    }\r\n\r\n    // Example Code\r\n    helloWorld() {\r\n        console.log(\"[assets/js/theme/product.js]: Hello World!\");\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nIn your browser, refresh any product details pop-up or page to see your new \"Hello World\" message. If you are using the Stencil CLI and browsing to localhost, you may need to restart for the most recent changes to be reflected.\r\n\r\n\r\n## Bringing in Handlebars context\r\n\r\n\r\nYou can inject any variables from the Handlebars context into your client-side JavaScript by using the `{{inject...}}` expression.\r\n\r\n```html\r\n{{inject 'productThumbSize' theme_settings.productthumb_size}}\r\n```\r\n\r\nTo inject `theme_settings.productthumb_size` into the product page's context, add `{{inject 'productThumbSize' theme_settings.productthumb_size}}` just under `{{#partial \"page\"}}` in `templates/pages/product.html<`:\r\n\r\n```html\r\nproduct:\r\n    videos:\r\n        limit: {{theme_settings.productpage_videos_count}}\r\n    reviews:\r\n        limit: {{theme_settings.productpage_reviews_count}}\r\n    related_products:\r\n        limit: {{theme_settings.productpage_related_products_count}}\r\n    similar_by_views:\r\n        limit: {{theme_settings.productpage_similar_by_views_count}}\r\n\r\n{{#partial \"page\"}}\r\n    <!-- Context Injection Example: -->\r\n    {{inject 'productThumbSize' theme_settings.productthumb_size}}\r\n    <!-- End Context Injection Example -->\r\n    <!-- ... -->\r\n{{/partial}}\r\n{{> layout/base}}\r\n```\r\n\r\nThe injected `productThumbSize` property can then be accessed from `product.js` by calling `this.context.productThumbSize`.\r\n\r\n```js\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n    }\r\n\r\n    onReady() {\r\n      //...\r\n        // Example Code\r\n        this.helloWorld();\r\n    }\r\n\r\n    // Example Code\r\n    helloWorld() {\r\n      console.log(\"[assets/js/theme/product.js]: Hello World!\");\r\n      console.log(\"[assets/js/theme/product.js]: \" + this.context.productThumbSize);\r\n    }\r\n    // ...\r\n}\r\n```\r\n\r\nNote that the `console.log(this.context.themeImageSizes);` statement will report the configured image size, following the \"Hello World!\" message previously defined in the [Customizing JavaScript for Individual Pages](#customizing-javascript_customizing) above.\r\n\r\n\r\n```\r\n[/assets/js/theme/product.js]: Hello World!\r\nproduct.js:63 [/assets/js/theme/product.js]: 100x100\r\n```\r\n\r\n## Installing libraries\r\n\r\nOnce you have installed the default Stencil theme, you can add custom JavaScript libraries with npm.\r\n\r\n\r\n```shell\r\nnpm install jquery\r\n```\r\n\r\nNext, you would open `assets/js/theme/product.js`, and insert the statements excerpted below:\r\n\r\n```js\r\nimport $ from 'jquery';\r\n\r\n$('.myElement').click(() => {\r\n    alert(\"You clicked myElement\");\r\n});\r\n```\r\n\r\nFor additional installation instructions, refer to your chosen library's documentation.\r\n"}],"children":[]}}}}
