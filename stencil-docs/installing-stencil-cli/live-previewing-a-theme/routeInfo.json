{"path":"stencil-docs/installing-stencil-cli/live-previewing-a-theme","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"23J4Lj","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"Stencil CLI","to":"/stencil-docs/installing-stencil-cli"},{"content":"Live Previewing a Theme","to":"/stencil-docs/installing-stencil-cli/live-previewing-a-theme"}],"page":{"meta":{"title":"Live Previewing a Theme - Stencil CLI - Stencil Docs","url":"/stencil-docs/installing-stencil-cli/live-previewing-a-theme","description":"Live Previewing a Theme\n\n\n\nOn this page\n\nObtaining store API credentials\n\nDownloading a theme\n\nInstalling theme modules\n\nServing a live preview\n\nResourc..."},"title":"Live Previewing a Theme","parsedPath":["pages","/stencil-docs","data","children",1,"data","children",1],"rootPagePath":"/stencil-docs","path":"/stencil-docs/installing-stencil-cli/live-previewing-a-theme","isSubpage":true,"route":{"path":"/live-previewing-a-theme"},"data":{"blocks":[{"type":"text","data":"# Live Previewing a Theme\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this page\r\n- [Obtaining store API credentials](#obtaining-store-api-credentials)\r\n- [Downloading a theme](#downloading-a-theme)\r\n- [Installing theme modules](#installing-theme-modules)\r\n- [Serving a live preview](#serving-a-live-preview)\r\n- [Resources](#resources)\r\n\r\n</div>\r\n\r\nOnce you've installed the Stencil CLI, the next steps are downloading a theme to edit and previewing live changes using Stencil CLI's powerful Browsersync functionality. This article walks you through the process of downloading a theme for development, installing theme modules, and serving a live preview using Stencil CLI's `stencil start` command.\r\n\r\nThe steps in this article assume you've installed Stencil CLI on your system. If you haven't installed it yet, see [Installing Stencil CLI](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/installing-stencil) for detailed, system-specific instructions.\r\n\r\n\r\n## Obtaining store API credentials\r\n\r\nStencil CLI uses various BigCommerce APIs to inject store-specific data, like carousel images and products, into the live theme preview it serves up. To do so, you must supply the Stencil CLI with a Stencil CLI token. For detailed instructions, see [Store API Accounts](https://support.bigcommerce.com/s/article/Store-API-Accounts).\r\n\r\n\r\n\r\nTo automatically create a store API account with the scopes and permissions required by Stencil CLI, select **Create Stencil-CLI Token** in the **Create API Accounts** dropdown:\r\n\r\n![Create API Account](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/create-api-account.png \"Create API Account\")\r\n\r\nThe **Stencil-CLI Access Level** can then be set by selecting **local development only** or **publish theme**:\r\n\r\n![Create Stencil-CLI Token](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/create-stencil-cli-token.png \"Create Stencil-CLI Token\")\r\n\r\n* **local development only** - can read theme related store data, but can not publish\r\n* **publish theme** - can read theme related store data and push themes to the live storefront\r\n\r\n## Downloading a theme\r\n\r\nTo develop against BigCommerce's Cornerstone theme (which is the building block and starting point for rapidly developing themes for BigCommerce) clone [the repository](https://github.com/bigcommerce/cornerstone) from GitHub:\r\n\r\n```shell\r\ngit clone https://github.com/bigcommerce/cornerstone.git\r\n```\r\n\r\nCornerstone and other themes can also be downloaded from the BigCommerce control panel. For instructions on doing so, see [Downloading and Uploading Custom Themes](https://support.bigcommerce.com/s/article/Stencil-Themes#download-upload) (BigCommerce Knowledge Base). \r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: info -->\r\n\r\n### Note  \r\nDownloading a theme does not include the current configuration of a theme. Run a [stencil pull](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/stencil-cli-options-and-commands#stencil-pull) command to obtain the theme's most recently saved version (appears only for themes customized for this store).\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### Theme access, copyright, and distribution\r\n> Developers may customize free and purchased marketplace themes; however, the original creator retains rights to the theme's design, which means derived themes may not be uploaded to a public theme marketplace (BigCommerce's or third-party) or sold privately.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### Distribution of Cornerstone-based themes\r\n\r\n> Distribution of Cornerstone-based themes is subject to BigCommerce's Cornerstone license, including the mandatory incorporation of BigCommerce's copyright statement.\r\n\r\n### Back up before reinstalling\r\n\r\n> If you're re-installing an existing theme, be sure to back up the theme’s `.stencil` file or `secrets.stencil.json` and `config.stencil.json` files (if using Stencil V3.1 release or later). The files contain the store URL, username, access tokens, and other settings. If you would like to allow for complete rollback, back up your entire theme’s directory.\r\n\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Installing theme modules\r\n\r\n\r\nFor theme versions `1.10.0+`, modules can be installed with `npm`:\r\n\r\n```shell\r\n# move into the theme dir\r\ncd ~/path/to/theme/dir\r\n\r\n# install modules using npm\r\nnpm install\r\n```\r\n\r\nThis will install the `npm` modules required to properly leverage the Stencil event framework.\r\n\r\n## Serving a live preview\r\n\r\nOnce Stencil CLI is installed and a theme is downloaded, a `.stencil` or `config.stencil.json` configuration file (if using Stencil V3.1 release or later) can be initialized for the theme and development can begin.\r\n\r\nStencil CLI uses [Browsersync](https://github.com/bigcommerce/browser-sync) to serve up a live preview of a theme in development. When the preview is opened on multiple devices or browser windows, scroll, click, refresh and form actions are mirrored across the browser instances.\r\n\r\nThe Browsersync preview is launched by executing the `stencil start` command in a terminal window. When `stencil start` is executed, Stencil CLI checks for the required `.stencil` configuration file or `secrets.stencil.json` and `config.stencil.json` configuration files (if using Stencil V3.1 release or later), which contains the following information:\r\n* the store's URL\r\n* an API access token\r\n* a local port number\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: info -->\r\n\r\n### Note  \r\nThe store's URL should be a vanity URL.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\nThis configuration file is created by running `stencil init` and entering the information listed above. Before doing so, be sure to [obtain store API credentials](#obtaining-store-api-credentials).\r\n\r\nTo initialize a new `.stencil` or `config.stencil.json` configuration file (if using Stencil V3.1 release or later) and start live preview, run the following commands in a terminal:\r\n\r\n```shell\r\n# move into the theme's directory\r\ncd ~/path/to/theme/dir\r\n\r\n# install theme modules (if you haven't already)\r\nnpm install\r\n\r\n# create `.stencil` or `config.stencil.json` configuration file (if using Stencil V3.1 release or later)\r\nstencil init --url https://yourstore.com/ --token 19d3ae6-dc15-4af9-bead-a2c703aa7b --port 3000\r\n\r\n# serve a live preview of the theme:\r\nstencil start\r\n```\r\n\r\n`stencil start` will output several URLs:\r\n\r\n```shell\r\n# ...\r\n[Browsersync] Proxying: http://localhost:3001\r\n[Browsersync] Access URLs:\r\n --\r\n       Local: http://localhost:3000  # preview real-time changes on your local machine\r\n    External: http://10.4.10.71:3000 # preview real-time changes across multiple devices\r\n --\r\n          UI: http://localhost:3002\r\n UI External: http://10.4.10.71:3002\r\n --\r\n[Browsersync] Watching files...\r\n```\r\n\r\nBrowse to the local URL to preview the theme and see changes updated in real-time. To preview the theme on multiple devices simultaneously, browse to the external URL on the desired devices. As you navigate through the site, Stencil CLI will use store API token supplied to make API calls to BigCommerce's API and populate the theme preview with live store data in order to mimic production as closely as possible.\r\n\r\nFor a full list of Stencil CLI commands, see [Stencil CLI Options and Commands](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/stencil-cli-options-and-commands). For help troubleshooting errors or installation issues, see [Troubleshooting Your Setup](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/troubleshooting-your-setup).\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### BitBucket re-authentication\r\n> If you receive error messages about resolving BitBucket as an SSH host when running `stencil init`, enter the BitBucket password used to set up the BitBucket SSH Keys when prompted.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--info\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: info -->\r\n\r\n### Debugging your theme  \r\nThe Stencil framework provides built-in debugging tools to aid in your custom front-end development. To see what data is available on the page you are working on, add the debug query string to your store's localhost URL. For example, `http://localhost:3000/product/sample-product?debug=context`. This string will return a list of all the objects on the page in JSON syntax. If you want to view the available JSON objects and rendered page simultaneously, change the debug value to `bar`. For example, `http://localhost:3000/product/sample-product?debug=bar`.\r\n\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Resources\r\n\r\n### Additional resources\r\n* [Demonstration of Stencil Installation and Launch](https://www.youtube.com/watch/iWBrJalyM0A) (Youtube)\r\n* [Stencil CLI GitHub Repo](https://github.com/bigcommerce/stencil-cli)\r\n"}],"children":[]}}}}
