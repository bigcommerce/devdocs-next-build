{"path":"stencil-docs/installing-stencil-cli/troubleshooting-your-setup","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"23J4Lj","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"Stencil CLI","to":"/stencil-docs/installing-stencil-cli"},{"content":"Troubleshooting Stencil CLI","to":"/stencil-docs/installing-stencil-cli/troubleshooting-your-setup"}],"page":{"meta":{"title":"Troubleshooting Stencil CLI - Stencil CLI - Stencil Docs","url":"/stencil-docs/installing-stencil-cli/troubleshooting-your-setup","description":"Troubleshooting Your Setup\n\n\n\nOn this page\n\nUnsupported Node version\n\nnpm install errors\n\nnpm install and stencil init errors\n\nstencil init/stencil star..."},"title":"Troubleshooting Stencil CLI","parsedPath":["pages","/stencil-docs","data","children",1,"data","children",3],"rootPagePath":"/stencil-docs","path":"/stencil-docs/installing-stencil-cli/troubleshooting-your-setup","isSubpage":true,"route":{"path":"/troubleshooting-your-setup"},"data":{"blocks":[{"type":"text","data":"# Troubleshooting Your Setup\n\n<div class=\"otp\" id=\"no-index\">\n\n### On this page\n- [Unsupported Node version](#unsupported-node-version)\n- [`npm install` errors](#npm-install-errors)\n- [`npm install` and `stencil init` errors](#npm-install-and-stencil-init-errors)\n- [`stencil init`/`stencil start` errors](#stencil-initstencil-start-errors)\n- [`stencil start` missing module errors](#stencil-start-missing-module-errors)\n- [Mac OS: `Xcode/iOS license...` errors](#mac-os-xcodeios-license-errors)\n- [ETIMEOUT errors on Node > 4.4.0](#etimeout-errors-on-node--440)\n- [`stencil` command not found](#stencil-command-not-found)\n- [`stencil start` errors](#stencil-start-errors)\n- [500 errors](#500-errors)\n- [Lint errors upon bundling](#lint-errors-upon-bundling)\n- [Module not found errors upon bundling](#module-not-found-errors-upon-bundling)\n- [Short undescriptive JavaScript diagnostics](#short-undescriptive-javascript-diagnostics)\n- [TR-300 error upon theme upload](#tr-300-error-upon-theme-upload)\n- [Reinstalling Stencil CLI](#reinstalling-stencil-cli)\n- [Resources](#resources)\n\n</div>\n\nFor any unexpected behavior you encounter while developing your Stencil theme, we recommend checking the terminal window where you started Stencil CLI.\n\nIn some cases, the terminal will provide a verbose error message specifying where to look for problems. It has the potential to provide further insight on the issue. Diagnostic suggestions are listed on this page for error messages that may not be helpful in revealing the issue you're experiencing.\n\n## Unsupported Node version\n\nIf you receive the following error message, please reinstall Node.js to a supported \"LTS\" (\"Long-Term Support\") version:\n\n```text\nDebug: internal, implementation, error\n        TypeError: Uncaught error: Object #<Object> has no method 'parse'\n        at internals.implementation\n        (/usr/local/lib/node_modules/stencil-cli/server/plugins/CssCompiler/index.js:32:26)\n```\n\nOn Mac OS, we have tested Stencil CLI most robustly on Node.js version 4.4.0. On Linux, we have tested most robustly on version 4.1.2. On Windows, we have tested most robustly on version 4.6.1. Youâ€™ll find detailed steps (for each operating system) in these instructions' Installing Stencil Prerequisites by OS section.\n\n## `npm install` errors\n\nThe following headings represent errors that may occur when running the `npm install` command. The content under each heading issues a fix for the issue.\n\n### \"Unmet peer dependency\"\n\nIf you get any `Unmet Peer Dependency` errors when issuing the `npm install` command make sure you are running the `npm install` command **inside** your theme directory.\n\nIf running the `npm install ` command inside your theme directory does not resolve the error, try one of the following:\n\n* Try removing your theme directory's `/node_modules/` subdirectory, by running `rm -rf node_modules`\n\n* Run the `npm cache clean` command\n\n* Re-run `npm install`\n\n### Permissions errors\n\nIf you get a file-permissions error such as `EPERM` or `EACCES` when issuing the `npm install` command, try one of the workarounds listed on [Fixing npm Permissions](https://docs.npmjs.com/getting-started/fixing-npm-permissions) (docs.npmjs.com).\n\n### \"js/bundle\" errors\n\nIf you get errors of the following type upon executing the `stencil init` command:\n\n```text\nPotentially unhandled rejection [6] TypeError: Error loading \"js/bundle\"\nat file:/Users/<username>/Desktop/Fortune-1.4.6/assets/js/bundle.js\nError evaluating file:/Users/<username>/Desktop/Fortune-1.4.6/assets/js/bundle.js\nCannot read property 'createElement' of undefined...\n```\n\nTry the following workaround:\n\n1. Download and unzip a fresh copy of the theme.\n\n2. Refresh theme dependencies by running `npm install`.\n\n3. Run `stencil init`.\n\n*You will see the same error message as before, but proceed to:*\n\n4. Delete the `assets/js/bundle.js` file.\n\n5. Run `stencil init` again.\nThis should now execute properly.\n6. Run `stencil start`.\n\n8. Verify your theme's launch at: http://localhost:3000.\n\n## `npm install` and `stencil init` errors\n\nIf you get an unexpected error messages when issuing the `npm install` or `stencil init` commands, check your Node.js version and ensure it aligns with a version compatible for the Stencil framework.\n\n## `stencil init`/`stencil start` errors\n\nIf you get an unexpected error message or unexpected results upon executing the `stencil init`, `stencil start`, or other Stencil CLI commands, make sure you are working in the subdirectory for the specific theme you intend to launch.\n\nOne way of checking what directory you are working in is by running the `pwd` command in your terminal.\n\n## `stencil start` missing module errors\n\nIf executing `stencil start` provokes errors like the following\n\n```text\nmodule.js:327\nthrow err;\n^\n\nError: Cannot find module 'webpack'\nat Function.Module._resolveFilename (module.js:325:15)\nat Function.Module._load (module.js:276:25)\nat Module.require (module.js:353:17)\nat require (internal/module.js:12:17)\nat Object. (/Users/jane.doe/themes/cornerstone/stencil.conf.js:2:15)\nat Module._compile (module.js:409:26)\nat Object.Module._extensions..js (module.js:416:10)\nat Module.load (module.js:343:32)\nat Function.Module._load (module.js:300:12)\nat Module.require (module.js:353:17)\n```\n\nswitch to your theme directory and run `npm install`. Running this command will add the missing JavaScript library dependencies.\n\nIf you receive the same error again after running `npm install`, you should completely uninstall and reinstall both the Stencil framework and Node.js.\n\n## Mac OS: `Xcode/iOS license...` errors\n\nOn Mac OS, if you have recently installed a new version of Xcode, the command line will display the following error when you next try to use or reinstall Stencil:\n\n`error: Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.`\n\nTo resolve this error, do the following:\n* Launch Xcode.\n* Accept its user agreement.\n* Quit Xcode.\n* Re-execute your Stencil command.\n\n## ETIMEOUT errors on Node > 4.4.0\n\nIf you are running a version of Node.js higher than 4.4.0, and you receive an `ETIMEOUT` error when running Stencil CLI, re-install the latest version of Stencil CLI to resolve this error by following the workflow in Installing Stencil CLI/Framework.\n\n## `stencil` command not found\n\n### Reinstall Stencil CLI\n\nIf you receive the error message -bash: `stencil: command not found`, ensure that you have followed the steps on Installing Stencil CLI/Framework or attempt to reinstall the Stencil CLI.\n\n### Redirect Bash shell\n\nIf you receive the error message -bash: stencil: command not found, enter echo $NVM_DIR. If this command returns nothing, then run source ~/.bash_profile and try running running stencil commands again.\n\n### Check/Specify `nvm` version\n\nIf you receive a `stencil: command not found` error message upon executing stencil start from inside your theme subdirectory: Check whether nvm has installed multiple versions of Node.js, by entering the following command:\n\n`ls ~/.nvm/versions/node`\n\nIf this reports more than one version, specify your platform's supported Node.js `<version_number>` by entering:\n\n`nvm use <version_number>`\n\nTo prevent this error from recurring, add the same `nvm use <version_number>` command to your ~/.bash_profile file.\n\n<a id=\"troubleshooting_stencil-start-errors\"></a>\n\n## `stencil start` errors\n\n### \"Unauthorized...username/token\" error\n\nIf executing the `stencil start` command generates an `Unauthorized, please use a valid username/token` error, make sure the `.stencil` file or `secrets.stencil.json` and `config.stencil.json` files (if using Stencil V3.1 release or later) contain the correct store URL. Also, verify that you copied the correct username and token. If you continue to get the same error, please reissue tokens.\n\n### 403 errors\n\nIf the Stencil server responds with a `403` error and you are using a proxy-based domain service like Cloudflare or Amazon Cloudfront, modify the hosts file on your machine to map the localhost to the IP address of the BigCommerce server.\n\n## 500 errors\n\nIf you see errors like or _similar_ to below:\n\n`{\"statusCode\":500,\"error\":\"Internal Server Error\",\"message\":\"An internal server error occurred\"}`\n\nThey often indicate a template syntax error, such as unmatched or missing punctuation. Check your terminal window for more details.\n\n## Lint errors upon bundling\n\nIf bundling your theme triggers multiple lint errors related to the `bundle.js` file, your theme is missing the `.eslintignore` file. Retrieve this file from the [Cornerstone repo](https://github.com/bigcommerce/cornerstone), then re-run `stencil bundle`.\n\n## Module not found errors upon bundling\n\nIf you see the following error when running stencil bundle, this is a past bug that has since been corrected.\n\n`[ModuleNotFoundError: Module not found: Error: Cannot resolve module 'pace' in...]`\n\nTo remove the error, please update your Cornerstone version.\n\n## Short undescriptive JavaScript diagnostics\n\nIf JavaScript errors in your browser's developer tools are not reporting filenames and line numbers, try changing your `webpack.conf.js` file's sourcemap entry from:\n\n`devtool: 'eval-cheap-module-source-map'`\n\nto:\n\n`devtool: 'eval-source-map'`\n\nThe `eval-cheap-module-source-map` option performs faster rebuilds, but omits line numbers. The `eval-source-map` option is slower, but more verbose.\n\n## TR-300 error upon theme upload\n\nIf uploading your theme triggers a TR-300 error, this can indicate an included source-map file (`bundle.js.map`) that exceeds its size limit of 5 MB. If your `bundle.js.map` exceeds that limit, the workaround is to move this file outside your theme directory before re-running `stencil bundle`.\n\nOther reasons for this error include exceeding these stencil theme limitations:\n* Max file size for `/templates/` and `/parsed/templates/`: 1 MB\n* Max for any single file in the bundle: 5 MB\n* Max zipped size: 50 MB\n* Max unzipped size: 100 MB\n* Max total files: 2500\n\n## Reinstalling Stencil CLI\n\nIf you encounter persistent problems in initializing or starting Stencil, you have the option of completely removing Stencil CLI and doing a fresh reinstall. You would do so as follows:\n\n1. From your command line, issue the command:\n`npm uninstall -g @bigcommerce/stencil-cli`\n\n2. Navigate back to the Installing and Launching Stencil section and repeat all installation steps to reinstall dependencies and restore your theme, according to your development scenario.\n\nA more-drastic measure is to uninstall and reinstall Stencil CLI's Node.js prerequisites (along with uninstalling Stencil CLI). We do not recommend this, as it might disable other Node.js applications on your local machine.\n\n## Resources\n\n### Related articles\n* [Authorizing and Initializing the CLI](/stencil-docs/installing-stencil-cli/installing-stencil)\n* [Stencil CLI Options and Commands](/stencil-docs/installing-stencil-cli/stencil-cli-options-and-commands)\n"}],"children":[]}}}}
