{"path":"bigcommerce-for-wordpress/extending-the-plugin/multi-channel-capabilities","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"YoY00","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"BigCommerce for WordPress","to":"/bigcommerce-for-wordpress"},{"content":"Extending the Plugin","to":"/bigcommerce-for-wordpress/extending-the-plugin"},{"content":"Multi-Channel Capabilities","to":"/bigcommerce-for-wordpress/extending-the-plugin/multi-channel-capabilities"}],"page":{"meta":{"title":"Multi-Channel Capabilities - Extending the Plugin - BigCommerce for WordPress","url":"/bigcommerce-for-wordpress/extending-the-plugin/multi-channel-capabilities","description":"Multi-Channel Capabilities\n\n\n\nOn this Page\n\nEnabling Multiple Channels\n\nSwitching Channels\n\nPlugin Example\n\nStep 1: Setup Directory Structure\n\nStep 2: C..."},"title":"Multi-Channel Capabilities","parsedPath":["pages","/bigcommerce-for-wordpress","data","children",2,"data","children",4],"rootPagePath":"/bigcommerce-for-wordpress","path":"/bigcommerce-for-wordpress/extending-the-plugin/multi-channel-capabilities","isSubpage":true,"route":{"path":"/multi-channel-capabilities"},"data":{"blocks":[{"type":"text","data":"# Multi-Channel Capabilities\n\n<div class=\"otp\" id=\"no-index\">\n\n### On this Page\n- [Enabling Multiple Channels](#enabling-multiple-channels)\n- [Switching Channels](#switching-channels)\n- [Plugin Example](#plugin-example)\n- [Step 1: Setup Directory Structure](#step-1-setup-directory-structure)\n- [Step 2: Connect Channels](#step-2-connect-channels)\n- [Step 2: Add the Plugin Code](#step-2-add-the-plugin-code)\n- [Developing Further](#developing-further)\n- [FAQ](#faq)\n- [Resources](#resources)\n\n</div>\n\nSince version `3.1.0`, BigCommerce for WordPress is capable of managing multiple channels (and displaying different product listings for each channel) from within a single WordPress site. This makes it possible to have multiple storefronts on a single WordPress instance with BigCommerce serving as headless commerce back-end.\n\nThis article explains how to enable and make use of BigCommerce for WordPress's multi-channel capabilities. The first two sections briefly note the the filters required to enable and use the functionality; then, in [Plugin Example](#plugin-example), a more in-depth demonstration with example code is provided. For longer discussion on multi-storefront use cases and additional examples, see [Build a Multi-Region Storefront with BigCommerce for WordPress 3.1.0+](https://medium.com/bigcommerce-developer-blog/build-a-multi-region-storefront-with-bigcommerce-for-wordpress-3-1-0-80cf56c3e8e9) on our [Developer Blog](https://medium.com/bigcommerce-developer-blog)\n\n## Enabling Multiple Channels\n\nMulti-channel capabilities can be enabled with the addition of a BigCommerce for WordPress specific filter:\n\n```php\nadd_filter( 'bigcommerce/channels/enable-multi-channel', '__return_true' );\n```\n\nThis will enable an admin to connect to multiple channels on the settings screen. The primary channel will still be used for all front-end requests unless filtered to use a different channel.\n\n## Switching Channels\n\nOnce multi-channel support is enabled and multiple channels are connected via BigCommerce settings in the WordPress admin, the channel displayed to shoppers on the front-end can be toggled with the following filter:\n\n```php\nadd_filter( 'bigcommerce/channel/current', function( $channel ) {\n\n    // add logic here to determine the channel to use\n    // note: replace '31' with the WordPress term_id of your connected channel\n    return get_term( 31, \\BigCommerce\\Taxonomies\\Channel\\Channel::NAME );\n});\n```\n\nThe filter above displays the connected channel associated to the WordPress `term_id` passed to `get_term()` (`31` in the example). An easy way to find your connected channel's `term_id` is by hovering over the **Make Primary** link in BigCommerce Channel Settings in the WordPress Admin (note the `term_id` shown in the URL indicated by the red arrow):\n\n![Geting the term_id](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/multi-channel-capabilities-0.png)\n\n## Plugin Example\n\nA common use case for multiple channels and storefronts is offering differentiated shopping experiences for multiple geographic regions (ex: a UK and US storefronts with different translations, currencies, products, and pricing). With BigCommerce for WordPress's multi-channel capabilities, its possible to create a multi-region storefront using a single WordPress instance powered by a BigCommerce back-end. To demonstrate, this section provides steps to creating a simple plugin for switching channels and currency symbols via query string parameters.\n\n### Prerequisites\n* Familiarity with developing WordPress plugins\n* BigCommerce store with at least two channels and products in each channel\n* Admin access to a WordPress instance with BigCommerce for WordPress installed\n* Ability to edit WordPress instance files locally or via FTP\n\n## Step 1: Setup Directory Structure\n\nIn your WordPress instance's `wp-content/plugins/` directory:\n1. create a subdirectory called `query-string-activation`\n2. in the `query-string-activation` subdirectory, create a file called `query-string-region-activation.php`\n\nOnce finished, the directory structure should look as follows:\n\n```bash\n├── wp-content                                       # WP instance wp-content dir\n|    ├── plugins                                     # WP instance plugins dir\n|    |   ├── bigcommerce                             # BigCommerce for WordPress Plugin\n│    |   ├── query-string-activation                 # Example Child Plugin\n│    |   |   └── query-string-region-activation.php\n|    |   ├── ...\n```\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n<!-- theme: info -->\n\n> ### Note\n> * For more information on editing WordPress and plugin files, see [Editing Files](https://wordpress.org/support/article/editing-files/) (wordpress.org).\n\n</div>\n</div>\n</div>\n\n## Step 2: Connect Channels\n\nAdd and connect the desired channels in **WordPress Admin > BigCommerce > Settings > Channels** and make note of the `term_id` in the URL when hovering over **Make Primary**:\n\n![Getting the term_id](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/multi-channel-capabilities-0.png)\n\nIn the example screenshot above, we've created and connected two channels:\n1. a `US` channel with `term_id` `32` (primary), and\n1. a `UK` channel with `term_id` `31`\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n<!-- theme: info -->\n\n> ### Note\n> * The `term_id`s for your channels will probably be different\n\n</div>\n</div>\n</div>\n\n## Step 2: Add the Plugin Code\n\nNow that we've connected two channels and made note of the `term_id`s, we're ready to begin coding.\n\nUsing your favorite code editor, copy and paste the following source code into `query-string-region-activation.php`:\n\n```php\n<?php\n/**\n * Plugin Name: BC4WP: Query String Region Activation\n * Plugin URI: http://www.bigcommerce.com/wordpress\n * Description: Proof of concept for region activation by query string\n * Version: 0.5\n * Author: BigCommerce\n * Author URI: http://www.bigcommerce.com\n */\n\n// Enable multi channel capabilities\nadd_filter( 'bigcommerce/channels/enable-multi-channel', '__return_true' );\n\n// If ?region=uk\nif ( $_GET[ 'region' ] !== 'us' && ($_GET[ 'region' ] === 'uk' || strpos($_SERVER['HTTP_REFERER'], 'region=uk') !== false) ) {\n\n\t// switch to the uk channel\n\tadd_filter( 'bigcommerce/channel/current', function( $channel ) {\n\n        // NOTE: change 31 to the  term_id of your channel\n\t\treturn get_term( 31, \\BigCommerce\\Taxonomies\\Channel\\Channel::NAME );\n\t}, 10, 1 );\n\n\t// set currency code to GBP\n\tadd_filter( 'pre_option_' . 'bigcommerce_currency_code', function() {\n\t\treturn 'GBP';\n\t}, 10, 0 );\n\n\t// Set currency symbol to £\n\tadd_filter( 'pre_option_bigcommerce_currency_symbol', function() {\n\t\treturn '£';\n\t}, 10, 0 );\n}\n```\n\n<div class=\"HubBlock--callout\">\n<div class=\"CalloutBlock--info\">\n<div class=\"HubBlock-content\">\n\n<!-- theme: info -->\n\n> ### Note\n> * replace `31` in `get_term()` above with the `term_id` of your channel\n> * change `uk`, `GBP`, and `£` to the country code and currency corresponding to your channel, as desired\n\n</div>\n</div>\n</div>\n\nHere's what's happening in the example code:\n1. First enable multi-channel capabilities with `add_filter( 'bigcommerce/channels/enable-multi-channel', '__return_true' );`\n2. Then, there's an `if` statement to check the value of the `?region=` query string from the browser:\n   * If the value is **NOT** `us` and **IS** `uk`, filter to channel with `term_id=31` (UK in this case)\n      * change currency code to `GBP` (British pound sterling).\n      * change the currency symbol to `£`\n\nOnce everything is configured correctly, we can test by navigating to **All Products** (`/products/`) on the WordPress storefront (note the product and currency symbol):\n\n![All Product US](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/multi-channel-capabilities-1.png)\n\nNow let's switch the channel and currency symbol by passing in `region=uk` in the query string (notice product and currency symbol have changed):\n\n![All Product UK](https://raw.githubusercontent.com/bigcommerce/dev-docs/master/assets/images/multi-channel-capabilities-2.png)\n\n## Developing Further\n\nObviously, the example plugin above is simple and not super useful as-is; however, its a starting point to creating rich, multi-storefront shopping experiences.\n\nFor additional implementation ideas (such as adding a region selection dropdown and switching regions based on a shopper's geo IP), checkout how to [Build a Multi-Region Storefront with BigCommerce for WordPress 3.1.0+](https://medium.com/bigcommerce-developer-blog/build-a-multi-region-storefront-with-bigcommerce-for-wordpress-3-1-0-80cf56c3e8e9) on our developer blog.\n\n## FAQ\n\n**How does BigCommerce for WordPress sync changes made to products in BigCommerce?**\nIn the past, if you made a change to a single product you would have to re-sync your entire catalog to copy the changes to WordPress. Now each product has a Sync button in the admin area so you can initiate a sync on a given product.\n\n**What is the taxonomy for storing channels?**\nMost stores will only have one, but a store with multi-channel enabled may have many. The taxonomy’s UI is hidden, and it is only exposed during onboarding (when selecting the initial channel) and in the Channel Settings section when multi-channel is enabled. All products are associated with a channel term on import.\n\n## Resources\n\n**BigCommerce**\n* [BigCommerce for WordPress Repo](https://github.com/bigcommerce/bigcommerce-for-wordpress) (GitHub)\n* [New Release: BigCommerce for WordPress 3.1.0](https://medium.com/bigcommerce-developer-blog/new-release-bigcommerce-for-wordpress-3-1-0-9bbe436153d8) (BigCommerce Dev Blog)\n* [Build a Multi-Region Storefront with BigCommerce for WordPress 3.1.0+](https://medium.com/bigcommerce-developer-blog/build-a-multi-region-storefront-with-bigcommerce-for-wordpress-3-1-0-80cf56c3e8e9) (BigCommerce Dev Blog)\n\n**Other Resources**\n* [Editing Files](https://wordpress.org/support/article/editing-files/) (wordpress.org)"}],"children":[]}}}}
